<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Deb Bose">
<meta name="dcterms.date" content="2026-01-09">

<title>The Diminishing Returns of Education on Quality of Life: An Empirical Analysis of Macroeconomic Decoupling – Deb Bose</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-635a35c16803d16fd9db22f392043487.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Deb Bose</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../posts/"> 
<span class="menu-text">Articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../notebooks/index.html"> 
<span class="menu-text">Notebooks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../papers/index.html"> 
<span class="menu-text">Papers</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/dbose"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-evolving-impact-of-education-on-quality-of-life-in-the-context-of-m012consumer-inflation-and-socioeconomic-shifts" id="toc-the-evolving-impact-of-education-on-quality-of-life-in-the-context-of-m012consumer-inflation-and-socioeconomic-shifts" class="nav-link active" data-scroll-target="#the-evolving-impact-of-education-on-quality-of-life-in-the-context-of-m012consumer-inflation-and-socioeconomic-shifts">The Evolving Impact of Education on Quality of Life in the Context of M0/1/2/Consumer Inflation and Socioeconomic Shifts</a>
  <ul class="collapse">
  <li><a href="#chapter-1-introduction" id="toc-chapter-1-introduction" class="nav-link" data-scroll-target="#chapter-1-introduction">Chapter 1: Introduction</a></li>
  <li><a href="#chapter-2-quality-of-life-qol-improvement-traditionally-associated-with-years-in-education" id="toc-chapter-2-quality-of-life-qol-improvement-traditionally-associated-with-years-in-education" class="nav-link" data-scroll-target="#chapter-2-quality-of-life-qol-improvement-traditionally-associated-with-years-in-education">Chapter 2: Quality of Life (QoL) Improvement Traditionally Associated with Years in Education</a></li>
  </ul></li>
  <li><a href="#long-years-in-education-job-stability-and-income-mobility-1" id="toc-long-years-in-education-job-stability-and-income-mobility-1" class="nav-link" data-scroll-target="#long-years-in-education-job-stability-and-income-mobility-1">1. Long Years in Education, Job Stability and Income Mobility:</a></li>
  <li><a href="#career-sharpe-ratio-formal-definition" id="toc-career-sharpe-ratio-formal-definition" class="nav-link" data-scroll-target="#career-sharpe-ratio-formal-definition">Career Sharpe Ratio — Formal Definition</a>
  <ul class="collapse">
  <li><a href="#expected-real-earnings" id="toc-expected-real-earnings" class="nav-link" data-scroll-target="#expected-real-earnings">Expected real earnings</a></li>
  <li><a href="#career-return-growth" id="toc-career-return-growth" class="nav-link" data-scroll-target="#career-return-growth">Career return (growth)</a></li>
  <li><a href="#career-sharpe-ratio" id="toc-career-sharpe-ratio" class="nav-link" data-scroll-target="#career-sharpe-ratio">Career Sharpe Ratio</a></li>
  <li><a href="#interpretation" id="toc-interpretation" class="nav-link" data-scroll-target="#interpretation">Interpretation</a></li>
  <li><a href="#individual-level-extension" id="toc-individual-level-extension" class="nav-link" data-scroll-target="#individual-level-extension">Individual-level extension</a></li>
  <li><a href="#social-status-mobility" id="toc-social-status-mobility" class="nav-link" data-scroll-target="#social-status-mobility">Social Status &amp; Mobility</a></li>
  <li><a href="#its-inflation" id="toc-its-inflation" class="nav-link" data-scroll-target="#its-inflation">It’s Inflation !</a></li>
  </ul></li>
  <li><a href="#reducing-compensation-given-a-productivity-level-1" id="toc-reducing-compensation-given-a-productivity-level-1" class="nav-link" data-scroll-target="#reducing-compensation-given-a-productivity-level-1">2. Reducing Compensation Given a Productivity Level</a>
  <ul class="collapse">
  <li><a href="#impact-of-technological-disruption-automation-and-job-displacement" id="toc-impact-of-technological-disruption-automation-and-job-displacement" class="nav-link" data-scroll-target="#impact-of-technological-disruption-automation-and-job-displacement">Impact of Technological Disruption: Automation and Job Displacement:</a></li>
  <li><a href="#summary-of-five-main-reasons-for-declining-labor-share" id="toc-summary-of-five-main-reasons-for-declining-labor-share" class="nav-link" data-scroll-target="#summary-of-five-main-reasons-for-declining-labor-share">Summary of Five Main Reasons for Declining Labor Share:</a></li>
  </ul></li>
  <li><a href="#impact-of-technological-disruption-underemployment-of-graduates" id="toc-impact-of-technological-disruption-underemployment-of-graduates" class="nav-link" data-scroll-target="#impact-of-technological-disruption-underemployment-of-graduates">Impact of Technological Disruption: Underemployment of Graduates:</a>
  <ul class="collapse">
  <li><a href="#trend-in-job-openings-to-unemployment" id="toc-trend-in-job-openings-to-unemployment" class="nav-link" data-scroll-target="#trend-in-job-openings-to-unemployment">Trend in Job openings to unemployment</a></li>
  </ul></li>
  <li><a href="#jor" id="toc-jor" class="nav-link" data-scroll-target="#jor">JOR</a>
  <ul class="collapse">
  <li><a href="#key-components" id="toc-key-components" class="nav-link" data-scroll-target="#key-components">Key Components:</a></li>
  <li><a href="#purpose" id="toc-purpose" class="nav-link" data-scroll-target="#purpose">Purpose:</a></li>
  </ul></li>
  <li><a href="#b.-social-status-and-mobility" id="toc-b.-social-status-and-mobility" class="nav-link" data-scroll-target="#b.-social-status-and-mobility">1b. Social Status and Mobility</a>
  <ul class="collapse">
  <li><a href="#rise-of-elite-education-as-a-gateway" id="toc-rise-of-elite-education-as-a-gateway" class="nav-link" data-scroll-target="#rise-of-elite-education-as-a-gateway">Rise of Elite Education as a Gateway</a></li>
  <li><a href="#data-on-educational-attainment-and-professional-success" id="toc-data-on-educational-attainment-and-professional-success" class="nav-link" data-scroll-target="#data-on-educational-attainment-and-professional-success">Data on Educational Attainment and Professional Success</a></li>
  <li><a href="#the-winner-take-all-society" id="toc-the-winner-take-all-society" class="nav-link" data-scroll-target="#the-winner-take-all-society">The Winner-Take-All Society</a></li>
  </ul></li>
  <li><a href="#high-competitive-stress-1" id="toc-high-competitive-stress-1" class="nav-link" data-scroll-target="#high-competitive-stress-1">High Competitive Stress:</a>
  <ul class="collapse">
  <li><a href="#admission-to-ivy-league-and-other-selective-universities." id="toc-admission-to-ivy-league-and-other-selective-universities." class="nav-link" data-scroll-target="#admission-to-ivy-league-and-other-selective-universities.">Admission to Ivy League and Other Selective Universities.</a></li>
  <li><a href="#why-did-number-of-applicants-continues-to-surge-each-year" id="toc-why-did-number-of-applicants-continues-to-surge-each-year" class="nav-link" data-scroll-target="#why-did-number-of-applicants-continues-to-surge-each-year">Why did number of applicants continues to surge each year ?</a></li>
  <li><a href="#what-about-mental-health" id="toc-what-about-mental-health" class="nav-link" data-scroll-target="#what-about-mental-health">What about mental health ?</a></li>
  <li><a href="#decline-in-job-satisfaction-over-time" id="toc-decline-in-job-satisfaction-over-time" class="nav-link" data-scroll-target="#decline-in-job-satisfaction-over-time">Decline in Job Satisfaction Over Time</a></li>
  <li><a href="#mental-health-of-students-escalating-concerns" id="toc-mental-health-of-students-escalating-concerns" class="nav-link" data-scroll-target="#mental-health-of-students-escalating-concerns">Mental Health of Students: Escalating Concerns</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The Diminishing Returns of Education on Quality of Life: An Empirical Analysis of Macroeconomic Decoupling</h1>
<p class="subtitle lead">Investigating the Causal Links Between M2 Monetary Expansion, Tuition Inflation, and the Erosion of Professional Career Stability</p>
  <div class="quarto-categories">
    <div class="quarto-category">macro</div>
    <div class="quarto-category">economics</div>
    <div class="quarto-category">education policy</div>
    <div class="quarto-category">labor market</div>
    <div class="quarto-category">monetary policy</div>
    <div class="quarto-category">mental health</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Deb Bose </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 9, 2026</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    <p>This analysis challenges the traditional association between extended formal education and improved quality of life (QoL) by examining the structural breakdown of professional labor returns. Utilizing longitudinal data from 1979 to 2025, the study identifies a significant decoupling of real wages from productivity growth and a staggering disparity between tuition inflation and median income. Through Granger Causality tests, the research validates that expansions in the M2 money supply serve as a primary predictor for rising educational costs, effectively devaluing the net financial return of degrees. Furthermore, the application of a “Career Sharpe Ratio” framework reveals that higher education no longer functions as career insurance; rather, increased credentials often lead to higher income volatility that offsets marginal gains. The findings suggest a shift in the role of tertiary education from a tool for knowledge acquisition to a mechanism for “elite inclusion,” a transition that correlates with rising underemployment and a documented decline in the mental health and job satisfaction of highly educated professionals.</p>
  </div>
</div>


</header>


<section id="the-evolving-impact-of-education-on-quality-of-life-in-the-context-of-m012consumer-inflation-and-socioeconomic-shifts" class="level2">
<h2 class="anchored" data-anchor-id="the-evolving-impact-of-education-on-quality-of-life-in-the-context-of-m012consumer-inflation-and-socioeconomic-shifts">The Evolving Impact of Education on Quality of Life in the Context of M0/1/2/Consumer Inflation and Socioeconomic Shifts</h2>
<p>This thesis explores the relationship between the length of formal education and overall quality of life (QoL), considering the evolving economic landscape influenced by M0/1/2/Consumer inflation. It hypothesizes that while extended education initially correlated with improved QoL through higher income, better employment, stable marriages, and overall well-being, lately, the benefits of prolonged education have diminished in the face of increasing economic pressures, competitive stress, and societal shifts. The study uses a combination of economic theory, quantitative data analysis, and sociological perspectives to examine how the changing cost-benefit dynamics of education affect life satisfaction in modern times.</p>
<section id="chapter-1-introduction" class="level3">
<h3 class="anchored" data-anchor-id="chapter-1-introduction">Chapter 1: Introduction</h3>
<p>Background</p>
<p>Education and Quality of Life: Historically, education has been seen as a key driver of social mobility and improved quality of life. Extended years in education have been associated with higher income, better job prospects, stable marriages, and improved health outcomes. M2 Inflation and Economic Environment: Over the past few decades, the global economic environment has been influenced by central banks’ monetary policies, including significant increases in M2 money supply. This has led to inflationary pressures, impacting the cost of education, living standards, and overall socioeconomic structures.</p>
<p>1.2 Research Problem</p>
<p>The traditional view that more education equates to better QoL is being challenged by new economic realities. Increasing costs of education, diminishing returns on educational investment, and changing societal expectations have altered the landscape.</p>
<p>1.3 Hypothesis</p>
<p>Up to a certain period, increased years of education correlated positively with improvements in QoL. However, as M0/1/2/Consumer inflation increased, leading to rising educational costs and altered economic dynamics, the benefits of prolonged education have diminished, even potentially reversing in certain cases.</p>
</section>
<section id="chapter-2-quality-of-life-qol-improvement-traditionally-associated-with-years-in-education" class="level3">
<h3 class="anchored" data-anchor-id="chapter-2-quality-of-life-qol-improvement-traditionally-associated-with-years-in-education">Chapter 2: Quality of Life (QoL) Improvement Traditionally Associated with Years in Education</h3>
<ol type="1">
<li><h4 id="long-years-in-education-job-stability-and-income-mobility" class="anchored">Long Years in Education, Job Stability and Income Mobility:</h4></li>
</ol>
<ul>
<li><p>Income and Job Stability: Traditionally, longer years in education have been associated with higher income and better job stability. Research consistently shows that individuals with more education tend to earn more over their lifetimes and are less likely to be unemployed. This connection has been a key driver for the push towards extended education in many societies​. No longer True.</p></li>
<li><p>Social Status and Mobility: Extended education has also been linked with higher social status and greater social mobility. The credentials obtained through prolonged education often serve as markers of social class, allowing individuals to access higher social and professional circles. No longer True.</p></li>
</ul>
<ol start="2" type="1">
<li><h4 id="reducing-compensation-given-a-productivity-level" class="anchored">Reducing Compensation Given a Productivity Level:</h4></li>
</ol>
<ul>
<li>Wage Stagnation: In recent decades, there has been growing concern that despite increasing levels of education, wages have not kept pace with productivity gains. This wage stagnation, coupled with rising education costs, has led to a situation where the financial returns on education may no longer justify the investment, thus reducing the perceived value of long-term education in improving QoL​ (World Bank).</li>
<li>Underemployment: Many graduates find themselves in jobs that do not require the level of education they have attained, leading to underemployment. This mismatch between education and job requirements can contribute to dissatisfaction and frustration.</li>
</ul>
<ol start="3" type="1">
<li><h4 id="high-competitive-stress" class="anchored">High Competitive Stress:</h4></li>
</ol>
<ul>
<li><p>Mental Health Impacts: As the demand for higher education has increased, so has the competition, leading to significant stress among students. The pressure to perform well academically to secure top-tier jobs has contributed to a rise in mental health issues, including anxiety and depression. This competitive stress can negate some of the QoL improvements associated with higher education​ (World Bank).</p></li>
<li><p>Work-Life Imbalance: The need to excel in education often leads to work-life imbalances, where students and young professionals may sacrifice leisure and family time for academic or career success, potentially reducing overall life satisfaction.</p></li>
</ul>
<ol start="4" type="1">
<li><h4 id="sedentary-lifestyles-of-educated-individuals" class="anchored">Sedentary Lifestyles of Educated Individuals:</h4></li>
</ol>
<ul>
<li><p>Health Implications: Higher levels of education are often associated with sedentary jobs, such as office work, which can lead to health issues like obesity, cardiovascular diseases, and mental health problems. The sedentary lifestyle that accompanies many highly educated professions may undermine the health benefits that should accompany better employment and income​ (Our World in Data).</p></li>
<li><p>Reduced Physical Activity: As people spend more time in education and subsequently in knowledge-intensive jobs, they may have less time for physical activities, which negatively impacts their overall well-being. T-leves for men.</p></li>
</ul>
<ol start="5" type="1">
<li><h4 id="high-demand-from-partners-selection-female" class="anchored">High-Demand from Partners Selection (Female):</h4></li>
</ol>
<ul>
<li><p>Marital Satisfaction and Selection Pressure: Educated individuals, especially women, may face higher expectations in partner selection, leading to delays in marriage or dissatisfaction due to mismatched expectations. The emphasis on finding a partner with similar educational or socioeconomic status can create additional stress and reduce life satisfaction​ (Our World in Data).</p></li>
<li><p>Family Dynamics: Higher education levels can lead to different expectations in family roles, potentially causing conflicts or dissatisfaction within marriages, especially if traditional roles are challenged.</p></li>
</ul>
<ol start="6" type="1">
<li><h4 id="inability-to-go-back-to-do-business-perceived-as-lower-socioeconomic" class="anchored">Inability to Go Back to Do Business Perceived as “Lower Socioeconomic”:</h4></li>
</ol>
<ul>
<li><p>Entrepreneurial Barriers: Educated individuals may feel trapped in their career paths, unable to pivot to entrepreneurship or other non-traditional roles without risking social stigma. This perception of certain businesses as “lower socioeconomic” can prevent them from pursuing potentially fulfilling and profitable ventures​ (World Bank).</p></li>
<li><p>Risk Aversion: Higher education often leads to risk aversion, where individuals prefer the stability of employment over the uncertainties of starting a business. This conservative approach can limit their opportunities for significant QoL improvements through entrepreneurship.</p></li>
</ul>
<ol start="7" type="1">
<li><h4 id="servitude-of-service-jobs-taken-by-educated-individuals" class="anchored">Servitude of Service Jobs Taken by Educated Individuals:</h4></li>
</ol>
<ul>
<li><p>Job Dissatisfaction: Many graduates find themselves in service-oriented jobs that may not align with their education or career aspirations. The servitude nature of these jobs, coupled with the disconnect from their education, can lead to job dissatisfaction and lower life satisfaction​.</p></li>
<li><p>Economic Pressure: The necessity to repay student loans and meet living expenses often forces educated individuals into jobs that do not utilize their full potential, leading to feelings of underachievement and frustration.</p></li>
</ul>
<ol start="8" type="1">
<li><h4 id="reducing-chances-of-entrepreneurship" class="anchored">Reducing Chances of Entrepreneurship:</h4></li>
</ol>
<ul>
<li><p>Socioeconomic Barriers: Entrepreneurship increasingly appears to be dominated by individuals with access to significant capital, often from affluent backgrounds. This reduces the chances for those from less privileged backgrounds, even if they are highly educated, to pursue entrepreneurial opportunities​ (World Bank).</p></li>
<li><p>VC and Networking Challenges: Access to venture capital and entrepreneurial networks is often limited to those with the right connections or backgrounds, making it difficult for highly educated individuals without these advantages to succeed in starting their own businesses.</p></li>
</ul>
<ol start="9" type="1">
<li><h4 id="realization-of-index-investing-e.g.-spy-for-qol-satisfaction" class="anchored">Realization of Index Investing (e.g., SPY) for QoL Satisfaction:</h4></li>
</ol>
<ul>
<li><p>Financial Independence: As individuals realize the time and stress associated with traditional employment, many are turning to passive investing strategies, such as investing in index funds (e.g., SPY), to achieve financial independence and improve QoL. This shift reflects a growing understanding that financial security can be achieved through means other than prolonged education and employment​ (World Bank).</p></li>
<li><p>Shift in Priorities: The realization that passive income (and/or wealth creation) from investments can provide a more stable and less stressful life has led many to question the traditional emphasis on education as the primary path to a better QoL.</p></li>
</ul>
<ol start="10" type="1">
<li><h4 id="education-for-inclusion-in-cosy-clubs-rather-than-knowledge" class="anchored">Education for Inclusion in “Cosy Clubs” Rather Than Knowledge:</h4></li>
</ol>
<ul>
<li><p>Networking and Social Capital: Increasingly, education is seen as a means to gain entry into exclusive professional networks (e.g., MBA, IB, VC, PE) rather than purely for knowledge acquisition. This shift has implications for QoL, as the primary value of education becomes social capital rather than personal or intellectual development​ (Our World in Data).</p></li>
<li><p>Decline in Knowledge-Based QoL: As access to knowledge becomes more democratized through the internet, the direct impact of education on QoL through knowledge acquisition has diminished. The focus on networking rather than knowledge challenges the traditional notion of education as a means to improve QoL through intellectual growth.</p></li>
</ul>
<div id="bc8fa4b9-04a0-471b-be72-ee305515efaa" class="cell" data-execution_count="31">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.stattools <span class="im">import</span> grangercausalitytests</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas_datareader.data <span class="im">as</span> web</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> io <span class="im">import</span> StringIO</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>start_date_str <span class="op">=</span> <span class="st">'1979-01-01'</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>start_date <span class="op">=</span> datetime.strptime(start_date_str,<span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>end_date <span class="op">=</span> datetime.today()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="long-years-in-education-job-stability-and-income-mobility-1" class="level2">
<h2 class="anchored" data-anchor-id="long-years-in-education-job-stability-and-income-mobility-1">1. Long Years in Education, Job Stability and Income Mobility:</h2>
<p>Traditionally, more years in education have been strongly associated with higher income and better job stability. However, several factors, including M0/1/2/Consumer inflation and technological disruption, have weakened this association in recent years.</p>
</section>
<section id="career-sharpe-ratio-formal-definition" class="level2">
<h2 class="anchored" data-anchor-id="career-sharpe-ratio-formal-definition">Career Sharpe Ratio — Formal Definition</h2>
<section id="expected-real-earnings" class="level3">
<h3 class="anchored" data-anchor-id="expected-real-earnings">Expected real earnings</h3>
<p><span class="math display">\[
E_t
=
\frac{W_t}{P_t / 100}
\cdot
(1 - u_t)
\]</span></p>
<p>where:</p>
<p><span class="math display">\[
\begin{aligned}
W_t &amp; = \text{nominal median earnings at time } t \\
P_t &amp; = \text{price level (CPI index, base } 100) \\
u_t &amp; = \text{unemployment rate at time } t
\end{aligned}
\]</span></p>
<hr>
</section>
<section id="career-return-growth" class="level3">
<h3 class="anchored" data-anchor-id="career-return-growth">Career return (growth)</h3>
<p><span class="math display">\[
r_t
=
\ln(E_t)
-
\ln(E_{t-1})
\]</span></p>
<hr>
</section>
<section id="career-sharpe-ratio" class="level3">
<h3 class="anchored" data-anchor-id="career-sharpe-ratio">Career Sharpe Ratio</h3>
<p>Let:</p>
<p><span class="math display">\[
\mu_r = \mathbb{E}[r_t]
\]</span></p>
<p><span class="math display">\[
\sigma_r = \sqrt{\mathbb{V}[r_t]}
\]</span></p>
<p>Let ( k ) denote the number of periods per year (e.g., ( k = 4 ) for quarterly data).</p>
<p><span class="math display">\[
\text{CareerSharpe}
=
\frac{k \, \mu_r}{\sqrt{k} \, \sigma_r}
\]</span></p>
<p>or equivalently,</p>
<p><span class="math display">\[
\text{CareerSharpe}
=
\frac{\mathbb{E}[r_t]}{\sqrt{\mathbb{V}[r_t]}}
\cdot
\sqrt{k}
\]</span></p>
<hr>
</section>
<section id="interpretation" class="level3">
<h3 class="anchored" data-anchor-id="interpretation">Interpretation</h3>
<p><span class="math display">\[
\text{CareerSharpe} &gt; 0
\;\Rightarrow\;
\text{growth dominates volatility (stable career)}
\]</span></p>
<p><span class="math display">\[
\text{CareerSharpe} = 0
\;\Rightarrow\;
\text{growth equals instability}
\]</span></p>
<p><span class="math display">\[
\text{CareerSharpe} &lt; 0
\;\Rightarrow\;
\text{volatility dominates growth (fragile career)}
\]</span></p>
<hr>
</section>
<section id="individual-level-extension" class="level3">
<h3 class="anchored" data-anchor-id="individual-level-extension">Individual-level extension</h3>
<p><span class="math display">\[
\text{CareerSharpe}_i
=
\frac{\mathbb{E}[r_{i,t}]}{\sqrt{\mathbb{V}[r_{i,t}]}}
\cdot
\sqrt{k}
\]</span></p>
<div id="1878624d-1362-4a0f-a7bc-8f5fec25eca3" class="cell" data-execution_count="25">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>EARNING_FRED_SERIES <span class="op">=</span> {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ------------------------------------------------------------------</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Median usual weekly nominal earnings</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Full-time wage &amp; salary workers, age 25+</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Quarterly</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ------------------------------------------------------------------</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"earn_lt_hs_q"</span>: <span class="st">"LEU0252920700Q"</span>,   <span class="co"># Less than HS diploma, 25+</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"earn_hs_q"</span>:    <span class="st">"LEU0252917300Q"</span>,   <span class="co"># HS graduates, no college, 25+</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"earn_some_q"</span>:  <span class="st">"LEU0254929400Q"</span>,   <span class="co"># Some college or associate degree, 25+</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"earn_ba_q"</span>:    <span class="st">"LEU0252919100Q"</span>,   <span class="co"># Bachelor's degree only, 25+</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"earn_adv_q"</span>:   <span class="st">"LEU0252919700Q"</span>,   <span class="co"># Advanced degree, 25+</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ------------------------------------------------------------------</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Unemployment rates</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Age 25+, monthly, seasonally adjusted</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ------------------------------------------------------------------</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"unemp_lt_hs_m"</span>: <span class="st">"LNS14027659"</span>,     <span class="co"># Less than HS, 25+</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"unemp_hs_m"</span>:    <span class="st">"LNS14027660"</span>,     <span class="co"># HS graduates, no college, 25+</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"unemp_some_m"</span>:  <span class="st">"LNS14027689"</span>,     <span class="co"># Some college or associate degree, 25+</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"unemp_ba_m"</span>:    <span class="st">"CGRA2024"</span>,        <span class="co"># Bachelor's degree, 25+</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"unemp_adv_m"</span>:   <span class="st">"ADVRA25"</span>,         <span class="co"># Advanced degree (Master's+), 25+</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ------------------------------------------------------------------</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Inflation</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ------------------------------------------------------------------</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"cpi_m"</span>: <span class="st">"CPIAUCSL"</span>,                <span class="co"># CPI-U, monthly, seasonally adjusted</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="1496d10e-a2ee-492b-81fc-0ae8b94a9e32" class="cell" data-execution_count="26">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas_datareader <span class="im">import</span> data <span class="im">as</span> pdr</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fetch_fred(series_id: <span class="bu">str</span>, start<span class="op">=</span><span class="st">"2000-01-01"</span>):</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> pdr.DataReader(series_id, <span class="st">"fred"</span>, start<span class="op">=</span>start)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    s.columns <span class="op">=</span> [series_id]</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> s</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> annualized_sharpe(log_returns: pd.Series, periods_per_year<span class="op">=</span><span class="dv">4</span>) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    lr <span class="op">=</span> log_returns.dropna()</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(lr) <span class="op">&lt;</span> <span class="dv">8</span>:</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> np.nan</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    mu <span class="op">=</span> lr.mean() <span class="op">*</span> periods_per_year</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    sig <span class="op">=</span> lr.std(ddof<span class="op">=</span><span class="dv">1</span>) <span class="op">*</span> np.sqrt(periods_per_year)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">float</span>(mu <span class="op">/</span> sig) <span class="cf">if</span> sig <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> np.nan</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> to_quarterly_period_mean(monthly: pd.Series) <span class="op">-&gt;</span> pd.Series:</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">    Convert a monthly DatetimeIndex series to quarterly series indexed by PeriodIndex('Q'),</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">    using mean within quarter.</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    q <span class="op">=</span> monthly.copy()</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    q.index <span class="op">=</span> q.index.to_period(<span class="st">"Q"</span>)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> q.groupby(level<span class="op">=</span><span class="dv">0</span>).mean()</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> to_quarterly_period_last(monthly: pd.Series) <span class="op">-&gt;</span> pd.Series:</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="co">    Sometimes you may prefer end-of-quarter value instead of mean.</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    q <span class="op">=</span> monthly.copy()</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    q.index <span class="op">=</span> q.index.to_period(<span class="st">"Q"</span>)</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> q.groupby(level<span class="op">=</span><span class="dv">0</span>).last()</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> to_quarterly_period_from_quarterly(quarterly: pd.Series) <span class="op">-&gt;</span> pd.Series:</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a><span class="co">    Convert quarterly DatetimeIndex (often quarter-start dates on FRED) to PeriodIndex('Q').</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>    q <span class="op">=</span> quarterly.copy()</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>    q.index <span class="op">=</span> q.index.to_period(<span class="st">"Q"</span>)</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> q</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> career_sharpe_for_group_period(</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>    earn_q: pd.Series,     <span class="co"># quarterly earnings (nominal weekly)</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>    unemp_m: pd.Series,    <span class="co"># monthly unemployment rate in %</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>    cpi_m: pd.Series,      <span class="co"># monthly CPI index</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>    use_cpi_mean<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>    use_unemp_mean<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- Convert to quarterly PeriodIndex('Q') ---</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>    earn_qp <span class="op">=</span> to_quarterly_period_from_quarterly(earn_q)</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>    unemp_qp <span class="op">=</span> to_quarterly_period_mean(unemp_m) <span class="cf">if</span> use_unemp_mean <span class="cf">else</span> to_quarterly_period_last(unemp_m)</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>    unemp_qp <span class="op">=</span> unemp_qp <span class="op">/</span> <span class="fl">100.0</span>  <span class="co"># % -&gt; fraction</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>    cpi_qp <span class="op">=</span> to_quarterly_period_mean(cpi_m) <span class="cf">if</span> use_cpi_mean <span class="cf">else</span> to_quarterly_period_last(cpi_m)</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- Align on common quarters ---</span></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>    idx <span class="op">=</span> earn_qp.dropna().index.intersection(unemp_qp.dropna().index).intersection(cpi_qp.dropna().index)</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>    earn_qp <span class="op">=</span> earn_qp.loc[idx]</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>    unemp_qp <span class="op">=</span> unemp_qp.loc[idx]</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>    cpi_qp <span class="op">=</span> cpi_qp.loc[idx]</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- Compute proxy expected real earnings ---</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>    real_weekly <span class="op">=</span> earn_qp <span class="op">/</span> (cpi_qp <span class="op">/</span> <span class="fl">100.0</span>)</span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>    expected_real_weekly <span class="op">=</span> real_weekly <span class="op">*</span> (<span class="fl">1.0</span> <span class="op">-</span> unemp_qp)</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Quarterly log returns</span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> np.log(expected_real_weekly).diff()</span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> pd.DataFrame({</span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a>        <span class="st">"earn_nominal_weekly"</span>: earn_qp,</span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>        <span class="st">"cpi"</span>: cpi_qp,</span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>        <span class="st">"unemp_rate"</span>: unemp_qp,</span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>        <span class="st">"real_weekly"</span>: real_weekly,</span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>        <span class="st">"expected_real_weekly"</span>: expected_real_weekly,</span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>        <span class="st">"log_return_qoq"</span>: r,</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>    out.attrs[<span class="st">"career_sharpe"</span>] <span class="op">=</span> annualized_sharpe(out[<span class="st">"log_return_qoq"</span>])</span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> out</span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run_all_fred_series_for_career_sharpe(FRED_SERIES, start<span class="op">=</span><span class="st">"2000-01-01"</span>):</span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>    earnings <span class="op">=</span> {</span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>        <span class="st">"lt_hs"</span>: fetch_fred(FRED_SERIES[<span class="st">"earn_lt_hs_q"</span>], start).iloc[:, <span class="dv">0</span>],</span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>        <span class="st">"hs"</span>:    fetch_fred(FRED_SERIES[<span class="st">"earn_hs_q"</span>], start).iloc[:, <span class="dv">0</span>],</span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>        <span class="st">"some"</span>:  fetch_fred(FRED_SERIES[<span class="st">"earn_some_q"</span>], start).iloc[:, <span class="dv">0</span>],</span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>        <span class="st">"ba"</span>:    fetch_fred(FRED_SERIES[<span class="st">"earn_ba_q"</span>], start).iloc[:, <span class="dv">0</span>],</span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>        <span class="st">"adv"</span>:   fetch_fred(FRED_SERIES[<span class="st">"earn_adv_q"</span>], start).iloc[:, <span class="dv">0</span>],</span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>    unemp <span class="op">=</span> {</span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>        <span class="st">"lt_hs"</span>: fetch_fred(FRED_SERIES[<span class="st">"unemp_lt_hs_m"</span>], start).iloc[:, <span class="dv">0</span>],</span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>        <span class="st">"hs"</span>:    fetch_fred(FRED_SERIES[<span class="st">"unemp_hs_m"</span>], start).iloc[:, <span class="dv">0</span>],</span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>        <span class="st">"some"</span>:  fetch_fred(FRED_SERIES[<span class="st">"unemp_some_m"</span>], start).iloc[:, <span class="dv">0</span>],</span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>        <span class="st">"ba"</span>:    fetch_fred(FRED_SERIES[<span class="st">"unemp_ba_m"</span>], start).iloc[:, <span class="dv">0</span>],</span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a>    cpi <span class="op">=</span> fetch_fred(FRED_SERIES[<span class="st">"cpi_m"</span>], start).iloc[:, <span class="dv">0</span>]</span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Advanced-degree unemployment fallback</span></span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a>        unemp[<span class="st">"adv"</span>] <span class="op">=</span> fetch_fred(FRED_SERIES[<span class="st">"unemp_adv_m"</span>], start).iloc[:, <span class="dv">0</span>]</span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span>:</span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a>        unemp[<span class="st">"adv"</span>] <span class="op">=</span> fetch_fred(<span class="st">"LNS14027662"</span>, start).iloc[:, <span class="dv">0</span>]</span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>    results <span class="op">=</span> {}</span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>    rows <span class="op">=</span> []</span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> k <span class="kw">in</span> [<span class="st">"lt_hs"</span>, <span class="st">"hs"</span>, <span class="st">"some"</span>, <span class="st">"ba"</span>, <span class="st">"adv"</span>]:</span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> career_sharpe_for_group_period(</span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>            earn_q<span class="op">=</span>earnings[k],</span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>            unemp_m<span class="op">=</span>unemp[k],</span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a>            cpi_m<span class="op">=</span>cpi,</span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>            use_cpi_mean<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a>            use_unemp_mean<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a>        results[k] <span class="op">=</span> df</span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a>        lr <span class="op">=</span> df[<span class="st">"log_return_qoq"</span>].dropna()</span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a>        rows.append({</span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a>            <span class="st">"education_group"</span>: k,</span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a>            <span class="st">"career_sharpe"</span>: df.attrs[<span class="st">"career_sharpe"</span>],</span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a>            <span class="st">"start_q"</span>: <span class="bu">str</span>(df.index.<span class="bu">min</span>()) <span class="cf">if</span> <span class="kw">not</span> df.empty <span class="cf">else</span> <span class="va">None</span>,</span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a>            <span class="st">"end_q"</span>: <span class="bu">str</span>(df.index.<span class="bu">max</span>()) <span class="cf">if</span> <span class="kw">not</span> df.empty <span class="cf">else</span> <span class="va">None</span>,</span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a>            <span class="st">"n_quarters"</span>: <span class="bu">int</span>(lr.shape[<span class="dv">0</span>]),</span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a>    sharpe_table <span class="op">=</span> pd.DataFrame(rows).sort_values(<span class="st">"career_sharpe"</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sharpe_table, results</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="162d0fec-1cf5-4060-836e-61b0c50f0e3a" class="cell" data-execution_count="27">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>sharpe_table, results <span class="op">=</span> run_all_fred_series_for_career_sharpe(EARNING_FRED_SERIES, start<span class="op">=</span>start_date_str)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sharpe_table.to_string(index<span class="op">=</span><span class="va">False</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>education_group  career_sharpe start_q  end_q  n_quarters
            adv       0.026205  2000Q1 2025Q3         102
          lt_hs       0.024898  2000Q1 2025Q3         102
             hs       0.017300  2000Q1 2025Q3         102
           some      -0.026485  2000Q1 2025Q3         102
             ba      -0.031516  2000Q1 2025Q3         102</code></pre>
</div>
</div>
<div id="f4fc6b2a-5371-4667-8413-7c1085982469" class="cell" data-execution_count="23">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>results[<span class="st">"ba"</span>].tail()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">earn_nominal_weekly</th>
<th data-quarto-table-cell-role="th">cpi</th>
<th data-quarto-table-cell-role="th">unemp_rate</th>
<th data-quarto-table-cell-role="th">real_weekly</th>
<th data-quarto-table-cell-role="th">expected_real_weekly</th>
<th data-quarto-table-cell-role="th">log_return_qoq</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">DATE</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2024Q3</th>
<td>1533</td>
<td>314.182667</td>
<td>0.082667</td>
<td>487.932710</td>
<td>447.596939</td>
<td>-0.030950</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2024Q4</th>
<td>1547</td>
<td>316.538667</td>
<td>0.056667</td>
<td>488.723863</td>
<td>461.029511</td>
<td>0.029569</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025Q1</th>
<td>1603</td>
<td>319.492000</td>
<td>0.064667</td>
<td>501.734003</td>
<td>469.288537</td>
<td>0.017756</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2025Q2</th>
<td>1559</td>
<td>320.800333</td>
<td>0.057667</td>
<td>485.972064</td>
<td>457.947675</td>
<td>-0.024463</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025Q3</th>
<td>1580</td>
<td>323.288000</td>
<td>0.091333</td>
<td>488.728317</td>
<td>444.091130</td>
<td>-0.030725</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="e87bed13-7670-4665-afaa-7a8b73427396" class="cell" data-execution_count="47">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>EDU_YEARS_MAP <span class="op">=</span> {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"lt_hs"</span>: <span class="dv">10</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"hs"</span>:    <span class="dv">12</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"some"</span>:  <span class="dv">14</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ba"</span>:    <span class="dv">16</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"adv"</span>:   <span class="dv">18</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rolling_career_sharpe_series(df, window<span class="op">=</span><span class="dv">20</span>, periods_per_year<span class="op">=</span><span class="dv">4</span>):</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">    Rolling Career Sharpe from a group's df (must contain log_return_qoq).</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">    Annualized mean / annualized std with quarterly periods.</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> df[<span class="st">"log_return_qoq"</span>]</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    mu <span class="op">=</span> r.rolling(window).mean() <span class="op">*</span> periods_per_year</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    sig <span class="op">=</span> r.rolling(window).std(ddof<span class="op">=</span><span class="dv">1</span>) <span class="op">*</span> np.sqrt(periods_per_year)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> mu <span class="op">/</span> sig</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="db58e6a1-c6a5-4f60-a559-92408e10b2d7" class="cell" data-execution_count="45">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_stacked_rolling_career_sharpe_semantic(results, window<span class="op">=</span><span class="dv">20</span>):</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Fixed semantic order (education ladder), with higher education closer to the zero line.</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">    Uses consistent colors for the same group above and below zero.</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- Fixed semantic order (higher ed near zero) ---</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    groups <span class="op">=</span> [<span class="st">"adv"</span>, <span class="st">"ba"</span>, <span class="st">"some"</span>, <span class="st">"hs"</span>, <span class="st">"lt_hs"</span>]  <span class="co"># fixed ladder order</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ---- Build aligned DataFrame of rolling Sharpe ----</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    sharpe_series <span class="op">=</span> []</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> k <span class="kw">in</span> groups:</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> results.get(k)</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> df <span class="kw">is</span> <span class="va">None</span> <span class="kw">or</span> df.empty:</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>        mu <span class="op">=</span> df[<span class="st">"log_return_qoq"</span>].rolling(window).mean() <span class="op">*</span> <span class="dv">4</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>        sig <span class="op">=</span> df[<span class="st">"log_return_qoq"</span>].rolling(window).std() <span class="op">*</span> np.sqrt(<span class="dv">4</span>)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        sharpe_series.append((mu <span class="op">/</span> sig).rename(k))</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    sharpe_df <span class="op">=</span> pd.concat(sharpe_series, axis<span class="op">=</span><span class="dv">1</span>).dropna(how<span class="op">=</span><span class="st">"all"</span>)</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    sharpe_df.index <span class="op">=</span> sharpe_df.index.to_timestamp()</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Ensure all groups exist &amp; order is preserved</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    groups_present <span class="op">=</span> [g <span class="cf">for</span> g <span class="kw">in</span> groups <span class="cf">if</span> g <span class="kw">in</span> sharpe_df.columns]</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    sharpe_df <span class="op">=</span> sharpe_df[groups_present]</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ---- Split into positive and negative parts ----</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>    pos <span class="op">=</span> sharpe_df.clip(lower<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    neg <span class="op">=</span> sharpe_df.clip(upper<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ---- Consistent colors per group ----</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    cmap <span class="op">=</span> plt.get_cmap(<span class="st">"tab10"</span>)</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>    color_map <span class="op">=</span> {g: cmap(i <span class="op">%</span> <span class="dv">10</span>) <span class="cf">for</span> i, g <span class="kw">in</span> <span class="bu">enumerate</span>(groups_present)}</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>    colors <span class="op">=</span> [color_map[g] <span class="cf">for</span> g <span class="kw">in</span> groups_present]</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ---- Plot ----</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">13</span>, <span class="dv">6</span>))</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Positive stack</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>    plt.stackplot(</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>        pos.index,</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>        [pos[g].values <span class="cf">for</span> g <span class="kw">in</span> groups_present],</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>        labels<span class="op">=</span>groups_present,</span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>        colors<span class="op">=</span>colors,</span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>        alpha<span class="op">=</span><span class="fl">1.0</span></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Negative stack (same order, same colors)</span></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>    plt.stackplot(</span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>        neg.index,</span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>        [neg[g].values <span class="cf">for</span> g <span class="kw">in</span> groups_present],</span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>        colors<span class="op">=</span>colors,</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>        alpha<span class="op">=</span><span class="fl">1.0</span></span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>    plt.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, lw<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f"Stacked Rolling Career Sharpe by Education Group (</span><span class="sc">{</span>window<span class="sc">}</span><span class="ss">Q window)"</span>)</span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">"Career Sharpe (risk-adjusted stability)"</span>)</span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">"Year"</span>)</span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>    plt.legend(loc<span class="op">=</span><span class="st">"upper left"</span>, title<span class="op">=</span><span class="st">"Education group"</span>, ncol<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>    plt.grid(alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage:</span></span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>plot_stacked_rolling_career_sharpe_semantic(results, window<span class="op">=</span><span class="dv">20</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-8-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="681b01a7-1195-4322-86e5-564f75f1dceb" class="cell" data-execution_count="43">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_sharpe_vs_edu_at_sample_ends(results, edu_years_map, window<span class="op">=</span><span class="dv">20</span>):</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Two-row plot (shared X axis: years of education):</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">      Row 1: Sharpe at earliest available date (first non-NaN rolling value per group)</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Row 2: Sharpe at latest available date (last rolling value per group)</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    rows_early <span class="op">=</span> []</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    rows_late <span class="op">=</span> []</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> group, df <span class="kw">in</span> results.items():</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> df <span class="kw">is</span> <span class="va">None</span> <span class="kw">or</span> df.empty <span class="kw">or</span> group <span class="kw">not</span> <span class="kw">in</span> edu_years_map:</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>        s <span class="op">=</span> rolling_career_sharpe_series(df, window<span class="op">=</span>window).dropna()</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> s.empty:</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>        years <span class="op">=</span> edu_years_map[group]</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Earliest defined rolling Sharpe (after window)</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>        early_date <span class="op">=</span> s.index[<span class="dv">0</span>]</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>        early_val  <span class="op">=</span> <span class="bu">float</span>(s.iloc[<span class="dv">0</span>])</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Latest rolling Sharpe (end of sample)</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>        late_date <span class="op">=</span> s.index[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>        late_val  <span class="op">=</span> <span class="bu">float</span>(s.iloc[<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>        rows_early.append({</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>            <span class="st">"group"</span>: group,</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>            <span class="st">"years_education"</span>: years,</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>            <span class="st">"career_sharpe"</span>: early_val,</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>            <span class="st">"date"</span>: early_date</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>        rows_late.append({</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>            <span class="st">"group"</span>: group,</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>            <span class="st">"years_education"</span>: years,</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>            <span class="st">"career_sharpe"</span>: late_val,</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>            <span class="st">"date"</span>: late_date</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>    df_early <span class="op">=</span> pd.DataFrame(rows_early).sort_values(<span class="st">"years_education"</span>)</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>    df_late  <span class="op">=</span> pd.DataFrame(rows_late).sort_values(<span class="st">"years_education"</span>)</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If you want the "early" and "late" dates to be common across groups,</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># you can display the range here:</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>    early_dates <span class="op">=</span> df_early[<span class="st">"date"</span>].tolist()</span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>    late_dates  <span class="op">=</span> df_late[<span class="st">"date"</span>].tolist()</span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>    fig, axes <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">2</span>, ncols<span class="op">=</span><span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="dv">8</span>), sharex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ---- Row 1: earliest ----</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">0</span>].plot(df_early[<span class="st">"years_education"</span>], df_early[<span class="st">"career_sharpe"</span>], marker<span class="op">=</span><span class="st">"o"</span>)</span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">0</span>].axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, lw<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">0</span>].set_title(</span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"Career Sharpe vs Years of Education (Earliest available rolling value, window=</span><span class="sc">{</span>window<span class="sc">}</span><span class="ss">Q)</span><span class="ch">\n</span><span class="ss">"</span></span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"Dates shown vary by group; earliest among them: </span><span class="sc">{</span><span class="bu">min</span>(early_dates)<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">0</span>].set_ylabel(<span class="st">"Career Sharpe"</span>)</span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">0</span>].grid(alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _, r <span class="kw">in</span> df_early.iterrows():</span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>        axes[<span class="dv">0</span>].annotate(r[<span class="st">"group"</span>], (r[<span class="st">"years_education"</span>], r[<span class="st">"career_sharpe"</span>]),</span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>                         textcoords<span class="op">=</span><span class="st">"offset points"</span>, xytext<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">6</span>), fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ---- Row 2: latest ----</span></span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">1</span>].plot(df_late[<span class="st">"years_education"</span>], df_late[<span class="st">"career_sharpe"</span>], marker<span class="op">=</span><span class="st">"o"</span>)</span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">1</span>].axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, lw<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">1</span>].set_title(</span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"Career Sharpe vs Years of Education (Latest rolling value, window=</span><span class="sc">{</span>window<span class="sc">}</span><span class="ss">Q)</span><span class="ch">\n</span><span class="ss">"</span></span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"Latest among them: </span><span class="sc">{</span><span class="bu">max</span>(late_dates)<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">1</span>].set_ylabel(<span class="st">"Career Sharpe"</span>)</span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">1</span>].set_xlabel(<span class="st">"Years of education"</span>)</span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">1</span>].grid(alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _, r <span class="kw">in</span> df_late.iterrows():</span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a>        axes[<span class="dv">1</span>].annotate(r[<span class="st">"group"</span>], (r[<span class="st">"years_education"</span>], r[<span class="st">"career_sharpe"</span>]),</span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a>                         textcoords<span class="op">=</span><span class="st">"offset points"</span>, xytext<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">6</span>), fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df_early, df_late</span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage:</span></span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a>df_early, df_late <span class="op">=</span> plot_sharpe_vs_edu_at_sample_ends(results, EDU_YEARS_MAP, window<span class="op">=</span><span class="dv">20</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-9-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="6a13205d-8aae-4d70-ab52-e140165247f7" class="cell" data-execution_count="59">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.colors <span class="im">as</span> mcolors</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas_datareader <span class="im">import</span> data <span class="im">as</span> pdr</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fetch_us_recessions(start<span class="op">=</span><span class="st">"1990-01-01"</span>):</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">    Fetch US recession indicator (USREC) from FRED.</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">    1 = recession, 0 = expansion.</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    rec <span class="op">=</span> pdr.DataReader(<span class="st">"USREC"</span>, <span class="st">"fred"</span>, start)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    rec.index <span class="op">=</span> pd.to_datetime(rec.index)</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> rec</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> recession_intervals(usrec: pd.DataFrame):</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co">    Convert monthly USREC series into a list of (start, end) timestamps.</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    rec <span class="op">=</span> usrec[<span class="st">"USREC"</span>]</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    intervals <span class="op">=</span> []</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    in_rec <span class="op">=</span> <span class="va">False</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> <span class="va">None</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> date, val <span class="kw">in</span> rec.items():</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> val <span class="op">==</span> <span class="dv">1</span> <span class="kw">and</span> <span class="kw">not</span> in_rec:</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>            start <span class="op">=</span> date</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>            in_rec <span class="op">=</span> <span class="va">True</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> val <span class="op">==</span> <span class="dv">0</span> <span class="kw">and</span> in_rec:</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>            intervals.append((start, date))</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>            in_rec <span class="op">=</span> <span class="va">False</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> in_rec:</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>        intervals.append((start, rec.index[<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> intervals</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_edu_sharpe_heatmap_with_recessions(</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>    results,</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>    edu_years_map,</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>    window<span class="op">=</span><span class="dv">20</span>,</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>    rec_start<span class="op">=</span><span class="st">"1990-01-01"</span></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ---- Build panel (same as before) ----</span></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>    panel <span class="op">=</span> build_edu_sharpe_panel(results, edu_years_map, window<span class="op">=</span>window)</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>    Z <span class="op">=</span> np.ma.masked_invalid(panel.T.values)</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>    years <span class="op">=</span> panel.columns.values</span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>    times <span class="op">=</span> panel.index.values</span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ---- Zero-centered normalization ----</span></span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>    vmax <span class="op">=</span> np.nanmax(np.<span class="bu">abs</span>(Z))</span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>    norm <span class="op">=</span> mcolors.TwoSlopeNorm(vmin<span class="op">=-</span>vmax, vcenter<span class="op">=</span><span class="fl">0.0</span>, vmax<span class="op">=</span>vmax)</span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ---- Fetch recessions ----</span></span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>    usrec <span class="op">=</span> fetch_us_recessions(start<span class="op">=</span>rec_start)</span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>    rec_intervals <span class="op">=</span> recession_intervals(usrec)</span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ---- Plot ----</span></span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">5</span>))</span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>    plt.imshow(</span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>        Z,</span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a>        aspect<span class="op">=</span><span class="st">"auto"</span>,</span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a>        origin<span class="op">=</span><span class="st">"lower"</span>,</span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a>        interpolation<span class="op">=</span><span class="st">"nearest"</span>,</span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a>        cmap<span class="op">=</span><span class="st">"RdYlGn"</span>,</span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a>        norm<span class="op">=</span>norm,</span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a>        extent<span class="op">=</span>[<span class="dv">0</span>, <span class="bu">len</span>(times) <span class="op">-</span> <span class="dv">1</span>, years.<span class="bu">min</span>(), years.<span class="bu">max</span>()]</span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a>    <span class="co"># X ticks (years)</span></span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a>    n_xticks <span class="op">=</span> <span class="bu">min</span>(<span class="dv">10</span>, <span class="bu">len</span>(times))</span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a>    xtick_pos <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="bu">len</span>(times) <span class="op">-</span> <span class="dv">1</span>, n_xticks).astype(<span class="bu">int</span>)</span>
<span id="cb10-76"><a href="#cb10-76" aria-hidden="true" tabindex="-1"></a>    xtick_lbl <span class="op">=</span> [pd.to_datetime(times[i]).strftime(<span class="st">"%Y"</span>) <span class="cf">for</span> i <span class="kw">in</span> xtick_pos]</span>
<span id="cb10-77"><a href="#cb10-77" aria-hidden="true" tabindex="-1"></a>    plt.xticks(xtick_pos, xtick_lbl)</span>
<span id="cb10-78"><a href="#cb10-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-79"><a href="#cb10-79" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Y ticks (education years)</span></span>
<span id="cb10-80"><a href="#cb10-80" aria-hidden="true" tabindex="-1"></a>    plt.yticks(years, [<span class="bu">str</span>(<span class="bu">int</span>(y)) <span class="cf">for</span> y <span class="kw">in</span> years])</span>
<span id="cb10-81"><a href="#cb10-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-82"><a href="#cb10-82" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ---- Overlay recession bands ----</span></span>
<span id="cb10-83"><a href="#cb10-83" aria-hidden="true" tabindex="-1"></a>    time_index <span class="op">=</span> pd.to_datetime(times)</span>
<span id="cb10-84"><a href="#cb10-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-85"><a href="#cb10-85" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> start, end <span class="kw">in</span> rec_intervals:</span>
<span id="cb10-86"><a href="#cb10-86" aria-hidden="true" tabindex="-1"></a>        <span class="co"># find indices overlapping the heatmap time range</span></span>
<span id="cb10-87"><a href="#cb10-87" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> end <span class="op">&lt;</span> time_index.<span class="bu">min</span>() <span class="kw">or</span> start <span class="op">&gt;</span> time_index.<span class="bu">max</span>():</span>
<span id="cb10-88"><a href="#cb10-88" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb10-89"><a href="#cb10-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-90"><a href="#cb10-90" aria-hidden="true" tabindex="-1"></a>        x0 <span class="op">=</span> np.searchsorted(time_index, start, side<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb10-91"><a href="#cb10-91" aria-hidden="true" tabindex="-1"></a>        x1 <span class="op">=</span> np.searchsorted(time_index, end, side<span class="op">=</span><span class="st">"right"</span>)</span>
<span id="cb10-92"><a href="#cb10-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-93"><a href="#cb10-93" aria-hidden="true" tabindex="-1"></a>        plt.axvspan(</span>
<span id="cb10-94"><a href="#cb10-94" aria-hidden="true" tabindex="-1"></a>            x0, x1,</span>
<span id="cb10-95"><a href="#cb10-95" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span><span class="st">"black"</span>,</span>
<span id="cb10-96"><a href="#cb10-96" aria-hidden="true" tabindex="-1"></a>            alpha<span class="op">=</span><span class="fl">0.3</span>,   <span class="co"># subtle but visible</span></span>
<span id="cb10-97"><a href="#cb10-97" aria-hidden="true" tabindex="-1"></a>            lw<span class="op">=</span><span class="dv">0</span></span>
<span id="cb10-98"><a href="#cb10-98" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb10-99"><a href="#cb10-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-100"><a href="#cb10-100" aria-hidden="true" tabindex="-1"></a>    cbar <span class="op">=</span> plt.colorbar()</span>
<span id="cb10-101"><a href="#cb10-101" aria-hidden="true" tabindex="-1"></a>    cbar.set_label(<span class="st">"Rolling Career Sharpe"</span>)</span>
<span id="cb10-102"><a href="#cb10-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-103"><a href="#cb10-103" aria-hidden="true" tabindex="-1"></a>    plt.title(</span>
<span id="cb10-104"><a href="#cb10-104" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"Education–Career Sharpe Surface with US Recessions</span><span class="ch">\n</span><span class="ss">"</span></span>
<span id="cb10-105"><a href="#cb10-105" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"Rolling window = </span><span class="sc">{</span>window<span class="sc">}</span><span class="ss"> quarters"</span></span>
<span id="cb10-106"><a href="#cb10-106" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-107"><a href="#cb10-107" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(<span class="st">"Year"</span>)</span>
<span id="cb10-108"><a href="#cb10-108" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">"Years of education"</span>)</span>
<span id="cb10-109"><a href="#cb10-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-110"><a href="#cb10-110" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb10-111"><a href="#cb10-111" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb10-112"><a href="#cb10-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-113"><a href="#cb10-113" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> panel</span>
<span id="cb10-114"><a href="#cb10-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-115"><a href="#cb10-115" aria-hidden="true" tabindex="-1"></a>plot_edu_sharpe_heatmap_with_recessions(</span>
<span id="cb10-116"><a href="#cb10-116" aria-hidden="true" tabindex="-1"></a>    results,</span>
<span id="cb10-117"><a href="#cb10-117" aria-hidden="true" tabindex="-1"></a>    EDU_YEARS_MAP,</span>
<span id="cb10-118"><a href="#cb10-118" aria-hidden="true" tabindex="-1"></a>    window<span class="op">=</span><span class="dv">20</span>,</span>
<span id="cb10-119"><a href="#cb10-119" aria-hidden="true" tabindex="-1"></a>    rec_start<span class="op">=</span><span class="st">"1990-01-01"</span></span>
<span id="cb10-120"><a href="#cb10-120" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display" data-execution_count="59">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">10</th>
<th data-quarto-table-cell-role="th">12</th>
<th data-quarto-table-cell-role="th">14</th>
<th data-quarto-table-cell-role="th">16</th>
<th data-quarto-table-cell-role="th">18</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">DATE</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2005-01-01</th>
<td>-0.217867</td>
<td>0.030670</td>
<td>-0.134112</td>
<td>-0.058386</td>
<td>0.177880</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2005-04-01</th>
<td>-0.176164</td>
<td>0.088045</td>
<td>-0.236736</td>
<td>0.051427</td>
<td>-0.072408</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2005-07-01</th>
<td>-0.007828</td>
<td>0.005134</td>
<td>-0.137005</td>
<td>-0.082290</td>
<td>-0.133007</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2005-10-01</th>
<td>-0.054053</td>
<td>0.026606</td>
<td>-0.236067</td>
<td>-0.012380</td>
<td>0.135676</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2006-01-01</th>
<td>0.011318</td>
<td>0.126577</td>
<td>-0.034653</td>
<td>-0.141063</td>
<td>0.101021</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2024-07-01</th>
<td>-0.122012</td>
<td>0.078718</td>
<td>-0.081831</td>
<td>-0.117491</td>
<td>-0.003857</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2024-10-01</th>
<td>0.044885</td>
<td>0.197410</td>
<td>0.045686</td>
<td>-0.050311</td>
<td>-0.087999</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025-01-01</th>
<td>-0.026605</td>
<td>0.008222</td>
<td>0.026629</td>
<td>0.015947</td>
<td>-0.048712</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2025-04-01</th>
<td>0.243602</td>
<td>0.465019</td>
<td>0.290055</td>
<td>0.326661</td>
<td>-0.021351</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2025-07-01</th>
<td>0.015073</td>
<td>0.303110</td>
<td>0.100364</td>
<td>-0.100123</td>
<td>-0.020048</td>
</tr>
</tbody>
</table>

<p>83 rows × 5 columns</p>
</div>
</div>
</div>
<section id="observation-from-the-chart" class="level4">
<h4 class="anchored" data-anchor-id="observation-from-the-chart">Observation from the chart</h4>
<p>Education =/= insurance anymore</p>
<p>Higher education:</p>
<ul>
<li>Raises mean income</li>
<li>Raises volatility more</li>
<li>Lowers Career Sharpe</li>
</ul>
<blockquote class="blockquote">
<p><strong>Across 2000–2025, risk-adjusted career outcomes in the US show no monotonic relationship with years of education; instead, education cohorts move together across macro regimes, with mid-to-upper education levels exhibiting the greatest downside during shocks and no group offering persistent career stability.</strong></p>
</blockquote>
</section>
</section>
<section id="social-status-mobility" class="level3">
<h3 class="anchored" data-anchor-id="social-status-mobility">Social Status &amp; Mobility</h3>
<section id="intergenerational-occupational-mobility-of-men-born-between-1950-and-1979" class="level4">
<h4 class="anchored" data-anchor-id="intergenerational-occupational-mobility-of-men-born-between-1950-and-1979">Intergenerational Occupational Mobility of Men Born between 1950 and 1979</h4>
<p>Ref - https://sci-hub.se/10.1353/foc.2006.0012</p>
<div id="42249dbe-ce3a-4b7e-adb4-9bc3b7d902bf" class="cell" data-execution_count="60">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Data from the table</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Upper professional"</span>: [<span class="dv">42</span>, <span class="dv">24</span>, <span class="dv">7</span>, <span class="dv">12</span>, <span class="dv">0</span>, <span class="dv">15</span>],</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Lower professional and clerical"</span>: [<span class="dv">29</span>, <span class="dv">27</span>, <span class="dv">7</span>, <span class="dv">17</span>, <span class="dv">0</span>, <span class="dv">20</span>],</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Self-employed"</span>: [<span class="dv">29</span>, <span class="dv">18</span>, <span class="dv">16</span>, <span class="dv">19</span>, <span class="dv">0</span>, <span class="dv">18</span>],</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Technical and skilled"</span>: [<span class="dv">17</span>, <span class="dv">19</span>, <span class="dv">6</span>, <span class="dv">30</span>, <span class="dv">1</span>, <span class="dv">26</span>],</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Farm sector"</span>: [<span class="dv">14</span>, <span class="dv">11</span>, <span class="dv">8</span>, <span class="dv">17</span>, <span class="dv">13</span>, <span class="dv">37</span>],</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Unskilled and service"</span>: [<span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">6</span>, <span class="dv">22</span>, <span class="dv">1</span>, <span class="dv">38</span>]</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>index_labels <span class="op">=</span> [<span class="st">"Upper professional"</span>, <span class="st">"Lower professional and clerical"</span>, <span class="st">"Self-employed"</span>, </span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Technical and skilled"</span>, <span class="st">"Farm sector"</span>, <span class="st">"Unskilled and service"</span>]</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data, index<span class="op">=</span>index_labels)</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a heatmap</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>sns.heatmap(df, annot<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">"flare"</span>, fmt<span class="op">=</span><span class="st">"d"</span>, linewidths<span class="op">=</span><span class="fl">.5</span>)</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Add title and labels</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Intergenerational Occupational Mobility of Men Born between 1950 and 1979 (Source: General Social Surveys, 1988–2004)"</span>)</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Destination: Son's Occupation"</span>)</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Origin: Father's Occupation"</span>)</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the heatmap</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Reference</strong>: H. Elizabeth Peters, “Patterns of Intergenerational Mobility in Income and Earnings,” Review of Economics and Statistics, 74(3), 1992, p.&nbsp;460. ​ - https://sci-hub.se/10.1353/foc.2006.0012</p>
<p><strong>Summary</strong></p>
<ul>
<li><p>High Mobility for Upper Professional Class: Sons whose fathers were in upper professional occupations have the highest likelihood (42%) of remaining in the upper professional category themselves. This indicates a strong intergenerational persistence of high-status occupations.</p></li>
<li><p>Limited Upward Mobility for Lower Occupations: For sons of fathers in the unskilled and service sector, there is a significant tendency to remain in lower-status occupations. Only 16% of these sons move into upper professional occupations, and 38% remain in unskilled and service jobs, indicating limited upward mobility.</p></li>
<li><p>Self-Employment and Technical Occupations: Sons of self-employed fathers show some diversity in outcomes, with 16% remaining self-employed and 29% moving into upper professional occupations.</p></li>
<li><p>Technical and skilled occupations see a 30% persistence rate, but many also move into other sectors, such as upper professional (17%) and unskilled and service jobs (26%).</p></li>
<li><p>Farm Sector Shows Unique Patterns: Sons of fathers in the farm sector show a high rate of persistence within that sector (13%), but many also move into unskilled and service jobs (37%).</p></li>
</ul>
<p>Overall Summary: The heatmap highlights a strong intergenerational persistence in occupational status, particularly for those at the upper and lower ends of the occupational hierarchy. Sons of fathers in higher-status occupations (upper professional) are more likely to remain in those occupations, while those from lower-status or manual labor occupations, such as unskilled and service or farm sectors, face more significant challenges in achieving upward mobility.</p>
<p>This data underscores the limited mobility for individuals from non-elite or lower occupational backgrounds, reinforcing the idea that economic and social barriers have a substantial impact on career outcomes across generations.</p>
<div id="04792a16-81be-4bb6-ab5b-c2329fca34cb" class="cell" data-execution_count="61">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data from the table</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"First"</span>: [<span class="dv">42</span>, <span class="dv">26</span>, <span class="dv">18</span>, <span class="dv">15</span>],</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Second"</span>: [<span class="dv">28</span>, <span class="dv">29</span>, <span class="dv">24</span>, <span class="dv">18</span>],</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Third"</span>: [<span class="dv">19</span>, <span class="dv">27</span>, <span class="dv">29</span>, <span class="dv">25</span>],</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Fourth"</span>: [<span class="dv">12</span>, <span class="dv">19</span>, <span class="dv">29</span>, <span class="dv">40</span>],</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating DataFrame</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data, index<span class="op">=</span>[<span class="st">"First"</span>, <span class="st">"Second"</span>, <span class="st">"Third"</span>, <span class="st">"Fourth"</span>])</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating the heatmap</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>sns.heatmap(df, annot<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">"YlGnBu"</span>, fmt<span class="op">=</span><span class="st">"d"</span>, cbar<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding titles and labels</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Intergenerational Income Mobility: Probability of Son's Quartile Given Parent's Quartile"</span>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Son's Income Quartile"</span>)</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Parent's Income Quartile"</span>)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying the heatmap</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Income Mobility is Limited: The data shows that there is significant persistence in income status across generations, especially at the top and bottom of the income distribution. Intergenerational Mobility: While there is some mobility between quartiles, particularly in the middle, those at the extremes of the income distribution are more likely to stay there.</p>
<p><strong>Economic Mobility Decline</strong>: Studies such as those by Raj Chetty and others have shown a clear decline in intergenerational economic mobility since the 1970s. The likelihood of children earning more than their parents has decreased, particularly for those from lower-income families.</p>
<p><strong>Increasing Role of Education and Wealth</strong>: The role of education, especially from elite institutions, in securing higher incomes has become more pronounced. Wealth inequality has further exacerbated income inequality, making it harder for those from lower-income families to move up the economic ladder.</p>
</section>
<section id="chetty-paper-2014-where-is-the-land-of-opportunity-the-geography-of-intergenerational-mobility-in-the-united-states" class="level4">
<h4 class="anchored" data-anchor-id="chetty-paper-2014-where-is-the-land-of-opportunity-the-geography-of-intergenerational-mobility-in-the-united-states">Chetty Paper 2014: <strong>Where Is the Land of Opportunity? The Geography of Intergenerational Mobility in the United States</strong></h4>
<p>https://jenni.uchicago.edu/econ341/readings/Chetty_Hendren_Kline_etal_2014_QJE_v129_n4.pdf</p>
<p>Intergenerational income mobility aims to capture how strongly a child’s economic position depends on that of their parents. A modern and robust way to measure this is the <strong>Rank–Rank Intergenerational Elasticity (IGE)</strong>, which avoids issues of scale, inflation, and tail instability inherent in log-income regressions.</p>
<p>The core idea is to express both parent and child incomes as <strong>ranks in their respective national income distributions</strong>, normalized to the unit interval. Let the parent’s income rank be denoted by ( <span class="math inline">\(R^{\text{parent}}_i \in [0,1]\)</span> ), and the child’s income rank by ( <span class="math inline">\(R^{\text{child}}_i \in [0,1]\)</span>). The fundamental rank–rank regression is then written as:</p>
<p><span class="math display">\[
R^{\text{child}}_i = \alpha + \rho \, R^{\text{parent}}_i + \varepsilon_i
\]</span></p>
<p>Here, the coefficient ( <span class="math inline">\(\rho\)</span> ) is the <strong>rank–rank IGE</strong>. It measures the expected change in a child’s percentile rank associated with a one-percentile increase in parental rank. Equivalently, it can be interpreted as a slope:</p>
<p><span class="math display">\[
\rho = \frac{\partial R^{\text{child}}}{\partial R^{\text{parent}}}
\]</span></p>
<p>From a statistical standpoint, ( ) is estimated using ordinary least squares and can be expressed in covariance form as:</p>
<p><span class="math display">\[
\rho = \frac{\operatorname{Cov}\left(R^{\text{parent}}, R^{\text{child}}\right)}
{\operatorname{Var}\left(R^{\text{parent}}\right)}
\]</span></p>
<p>However IGE Rank-Rank Slope can be misleading (stable around 0.32 even though inequality keeps rising) at a national level (US or other countries) for variety of reasons -</p>
<table class="caption-top table">
<colgroup>
<col style="width: 30%">
<col style="width: 69%">
</colgroup>
<thead>
<tr class="header">
<th>Problem</th>
<th>Why It Matters</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>1. Zero-sum by construction</strong></td>
<td>Income ranks must sum to the same total. If one child rises in rank, another must fall. As a result, the national average is mechanically centered (around 50), even if overall outcomes deteriorate.</td>
</tr>
<tr class="even">
<td><strong>2. Hides local heterogeneity</strong></td>
<td>Aggregation masks large geographic differences. For example, Charlotte (β = 0.40) and San Jose (β = 0.24) average to a seemingly “normal” β = 0.32, but this average describes no actual individual’s experience.</td>
</tr>
<tr class="odd">
<td><strong>3. Misses absolute collapse</strong></td>
<td>Absolute mobility collapsed even while rank persistence stayed flat: in 1940, ~92% of children earned more than their parents, versus ~50% for 1980 cohorts—yet the rank–rank IGE remained around 0.34 throughout.</td>
</tr>
</tbody>
</table>
</section>
<section id="need-absolute-income-mobility" class="level4">
<h4 class="anchored" data-anchor-id="need-absolute-income-mobility">Need absolute income mobility</h4>
<p><strong>Raj Chetty et al.,The fading American dream: Trends in absolute income mobility since 1940.</strong></p>
<p>Science 356,398-406(2017).DOI:10.1126/science.aal4617</p>
<p>https://www.science.org/doi/10.1126/science.aal4617#:~:text=Using%20this%20methodology%2C%20we%20found,rates%20observed%20for%20recent%20cohorts.</p>
<div id="7926cc95-5756-43a2-ad96-dc751106219d" class="cell" data-execution_count="85">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># INFLATION DATA: Official CPI vs ShadowStats</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_inflation_series():</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">    Build inflation time series: Official CPI vs ShadowStats (chart-aligned).</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">    IMPORTANT:</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co">    - ShadowStats does not publish a clean public time series (as far as typical public endpoints go).</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co">    - So here we use a chart-aligned annual approximation (1980–2023) that matches the</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co">      visual series in the provided ShadowStats image (1980-based alternate CPI).</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">    - For 1970–1979 we default to official CPI (since the chart starts at ~1980).</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    years <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1970</span>, <span class="dv">2024</span>))</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># -------------------------------------------------------------------------</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Official CPI (annual, your existing dict)</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># -------------------------------------------------------------------------</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    official_rates <span class="op">=</span> {</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1970</span>: <span class="fl">0.059</span>, <span class="dv">1971</span>: <span class="fl">0.043</span>, <span class="dv">1972</span>: <span class="fl">0.033</span>, <span class="dv">1973</span>: <span class="fl">0.062</span>, <span class="dv">1974</span>: <span class="fl">0.110</span>,</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1975</span>: <span class="fl">0.091</span>, <span class="dv">1976</span>: <span class="fl">0.058</span>, <span class="dv">1977</span>: <span class="fl">0.065</span>, <span class="dv">1978</span>: <span class="fl">0.076</span>, <span class="dv">1979</span>: <span class="fl">0.113</span>,</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1980</span>: <span class="fl">0.135</span>, <span class="dv">1981</span>: <span class="fl">0.103</span>, <span class="dv">1982</span>: <span class="fl">0.062</span>, <span class="dv">1983</span>: <span class="fl">0.032</span>, <span class="dv">1984</span>: <span class="fl">0.043</span>,</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1985</span>: <span class="fl">0.036</span>, <span class="dv">1986</span>: <span class="fl">0.019</span>, <span class="dv">1987</span>: <span class="fl">0.036</span>, <span class="dv">1988</span>: <span class="fl">0.041</span>, <span class="dv">1989</span>: <span class="fl">0.048</span>,</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1990</span>: <span class="fl">0.054</span>, <span class="dv">1991</span>: <span class="fl">0.042</span>, <span class="dv">1992</span>: <span class="fl">0.030</span>, <span class="dv">1993</span>: <span class="fl">0.030</span>, <span class="dv">1994</span>: <span class="fl">0.026</span>,</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1995</span>: <span class="fl">0.028</span>, <span class="dv">1996</span>: <span class="fl">0.029</span>, <span class="dv">1997</span>: <span class="fl">0.023</span>, <span class="dv">1998</span>: <span class="fl">0.016</span>, <span class="dv">1999</span>: <span class="fl">0.022</span>,</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2000</span>: <span class="fl">0.034</span>, <span class="dv">2001</span>: <span class="fl">0.028</span>, <span class="dv">2002</span>: <span class="fl">0.016</span>, <span class="dv">2003</span>: <span class="fl">0.023</span>, <span class="dv">2004</span>: <span class="fl">0.027</span>,</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2005</span>: <span class="fl">0.034</span>, <span class="dv">2006</span>: <span class="fl">0.032</span>, <span class="dv">2007</span>: <span class="fl">0.029</span>, <span class="dv">2008</span>: <span class="fl">0.038</span>, <span class="dv">2009</span>: <span class="op">-</span><span class="fl">0.004</span>,</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2010</span>: <span class="fl">0.016</span>, <span class="dv">2011</span>: <span class="fl">0.032</span>, <span class="dv">2012</span>: <span class="fl">0.021</span>, <span class="dv">2013</span>: <span class="fl">0.015</span>, <span class="dv">2014</span>: <span class="fl">0.016</span>,</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2015</span>: <span class="fl">0.001</span>, <span class="dv">2016</span>: <span class="fl">0.013</span>, <span class="dv">2017</span>: <span class="fl">0.021</span>, <span class="dv">2018</span>: <span class="fl">0.024</span>, <span class="dv">2019</span>: <span class="fl">0.018</span>,</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2020</span>: <span class="fl">0.012</span>, <span class="dv">2021</span>: <span class="fl">0.047</span>, <span class="dv">2022</span>: <span class="fl">0.080</span>, <span class="dv">2023</span>: <span class="fl">0.041</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># -------------------------------------------------------------------------</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ShadowStats (chart-aligned annual approximation, 1980–2023)</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># These values are digitized/approximated from the supplied ShadowStats plot:</span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># "SGS Alternate CPI, 1980-Based" (YoY) through May 2023.</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Units are decimals (e.g., 0.12 = 12% YoY).</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># -------------------------------------------------------------------------</span></span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>    shadowstats_rates_1980_2023 <span class="op">=</span> {</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1980</span>: <span class="fl">0.1384</span>, <span class="dv">1981</span>: <span class="fl">0.1077</span>, <span class="dv">1982</span>: <span class="fl">0.0673</span>, <span class="dv">1983</span>: <span class="fl">0.0396</span>, <span class="dv">1984</span>: <span class="fl">0.0534</span>,</span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1985</span>: <span class="fl">0.0486</span>, <span class="dv">1986</span>: <span class="fl">0.0500</span>, <span class="dv">1987</span>: <span class="fl">0.0596</span>, <span class="dv">1988</span>: <span class="fl">0.0686</span>, <span class="dv">1989</span>: <span class="fl">0.0712</span>,</span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1990</span>: <span class="fl">0.0617</span>, <span class="dv">1991</span>: <span class="fl">0.0586</span>, <span class="dv">1992</span>: <span class="fl">0.0551</span>, <span class="dv">1993</span>: <span class="fl">0.0568</span>, <span class="dv">1994</span>: <span class="fl">0.0587</span>,</span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1995</span>: <span class="fl">0.0595</span>, <span class="dv">1996</span>: <span class="fl">0.0624</span>, <span class="dv">1997</span>: <span class="fl">0.0664</span>, <span class="dv">1998</span>: <span class="fl">0.0727</span>, <span class="dv">1999</span>: <span class="fl">0.0787</span>,</span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2000</span>: <span class="fl">0.0845</span>, <span class="dv">2001</span>: <span class="fl">0.0900</span>, <span class="dv">2002</span>: <span class="fl">0.0966</span>, <span class="dv">2003</span>: <span class="fl">0.1018</span>, <span class="dv">2004</span>: <span class="fl">0.1012</span>,</span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2005</span>: <span class="fl">0.1014</span>, <span class="dv">2006</span>: <span class="fl">0.1050</span>, <span class="dv">2007</span>: <span class="fl">0.1116</span>, <span class="dv">2008</span>: <span class="fl">0.1186</span>, <span class="dv">2009</span>: <span class="fl">0.0656</span>,</span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2010</span>: <span class="fl">0.0907</span>, <span class="dv">2011</span>: <span class="fl">0.0974</span>, <span class="dv">2012</span>: <span class="fl">0.1008</span>, <span class="dv">2013</span>: <span class="fl">0.0985</span>, <span class="dv">2014</span>: <span class="fl">0.0893</span>,</span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2015</span>: <span class="fl">0.0943</span>, <span class="dv">2016</span>: <span class="fl">0.0969</span>, <span class="dv">2017</span>: <span class="fl">0.0989</span>, <span class="dv">2018</span>: <span class="fl">0.1020</span>, <span class="dv">2019</span>: <span class="fl">0.0966</span>,</span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2020</span>: <span class="fl">0.0910</span>, <span class="dv">2021</span>: <span class="fl">0.1369</span>, <span class="dv">2022</span>: <span class="fl">0.1629</span>, <span class="dv">2023</span>: <span class="fl">0.1402</span></span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Build ShadowStats series for full range 1970–2023</span></span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a>    shadowstats_rates <span class="op">=</span> {}</span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> y <span class="kw">in</span> years:</span>
<span id="cb13-56"><a href="#cb13-56" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> y <span class="op">&lt;</span> <span class="dv">1980</span>:</span>
<span id="cb13-57"><a href="#cb13-57" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Chart doesn't cover these years; use official CPI as a conservative placeholder</span></span>
<span id="cb13-58"><a href="#cb13-58" aria-hidden="true" tabindex="-1"></a>            shadowstats_rates[y] <span class="op">=</span> official_rates[y]</span>
<span id="cb13-59"><a href="#cb13-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> y <span class="kw">in</span> shadowstats_rates_1980_2023:</span>
<span id="cb13-60"><a href="#cb13-60" aria-hidden="true" tabindex="-1"></a>            shadowstats_rates[y] <span class="op">=</span> shadowstats_rates_1980_2023[y]</span>
<span id="cb13-61"><a href="#cb13-61" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb13-62"><a href="#cb13-62" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Fallback (should not happen with the above dict)</span></span>
<span id="cb13-63"><a href="#cb13-63" aria-hidden="true" tabindex="-1"></a>            shadowstats_rates[y] <span class="op">=</span> <span class="fl">0.12</span></span>
<span id="cb13-64"><a href="#cb13-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-65"><a href="#cb13-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># -------------------------------------------------------------------------</span></span>
<span id="cb13-66"><a href="#cb13-66" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Build cumulative indices (1970 = 1.0)</span></span>
<span id="cb13-67"><a href="#cb13-67" aria-hidden="true" tabindex="-1"></a>    <span class="co"># -------------------------------------------------------------------------</span></span>
<span id="cb13-68"><a href="#cb13-68" aria-hidden="true" tabindex="-1"></a>    official_index <span class="op">=</span> {<span class="dv">1970</span>: <span class="fl">1.0</span>}</span>
<span id="cb13-69"><a href="#cb13-69" aria-hidden="true" tabindex="-1"></a>    shadow_index <span class="op">=</span> {<span class="dv">1970</span>: <span class="fl">1.0</span>}</span>
<span id="cb13-70"><a href="#cb13-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-71"><a href="#cb13-71" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1971</span>, <span class="dv">2024</span>):</span>
<span id="cb13-72"><a href="#cb13-72" aria-hidden="true" tabindex="-1"></a>        official_index[year] <span class="op">=</span> official_index[year <span class="op">-</span> <span class="dv">1</span>] <span class="op">*</span> (<span class="dv">1</span> <span class="op">+</span> official_rates[year])</span>
<span id="cb13-73"><a href="#cb13-73" aria-hidden="true" tabindex="-1"></a>        shadow_index[year] <span class="op">=</span> shadow_index[year <span class="op">-</span> <span class="dv">1</span>] <span class="op">*</span> (<span class="dv">1</span> <span class="op">+</span> shadowstats_rates[year])</span>
<span id="cb13-74"><a href="#cb13-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-75"><a href="#cb13-75" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb13-76"><a href="#cb13-76" aria-hidden="true" tabindex="-1"></a>        <span class="st">"year"</span>: years,</span>
<span id="cb13-77"><a href="#cb13-77" aria-hidden="true" tabindex="-1"></a>        <span class="st">"official_cpi_rate"</span>: [official_rates[y] <span class="cf">for</span> y <span class="kw">in</span> years],</span>
<span id="cb13-78"><a href="#cb13-78" aria-hidden="true" tabindex="-1"></a>        <span class="st">"shadowstats_rate"</span>: [shadowstats_rates[y] <span class="cf">for</span> y <span class="kw">in</span> years],</span>
<span id="cb13-79"><a href="#cb13-79" aria-hidden="true" tabindex="-1"></a>        <span class="st">"official_cpi_index"</span>: [official_index[y] <span class="cf">for</span> y <span class="kw">in</span> years],</span>
<span id="cb13-80"><a href="#cb13-80" aria-hidden="true" tabindex="-1"></a>        <span class="st">"shadowstats_index"</span>: [shadow_index[y] <span class="cf">for</span> y <span class="kw">in</span> years],</span>
<span id="cb13-81"><a href="#cb13-81" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb13-82"><a href="#cb13-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-83"><a href="#cb13-83" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"shadow_vs_official_ratio"</span>] <span class="op">=</span> df[<span class="st">"shadowstats_index"</span>] <span class="op">/</span> df[<span class="st">"official_cpi_index"</span>]</span>
<span id="cb13-84"><a href="#cb13-84" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb13-85"><a href="#cb13-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-86"><a href="#cb13-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-87"><a href="#cb13-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-88"><a href="#cb13-88" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb13-89"><a href="#cb13-89" aria-hidden="true" tabindex="-1"></a><span class="co"># ABSOLUTE MOBILITY DATA from Chetty et al.</span></span>
<span id="cb13-90"><a href="#cb13-90" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb13-91"><a href="#cb13-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-92"><a href="#cb13-92" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_chetty_absolute_mobility():</span>
<span id="cb13-93"><a href="#cb13-93" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb13-94"><a href="#cb13-94" aria-hidden="true" tabindex="-1"></a><span class="co">    Build absolute mobility series from Chetty et al. (2017) "Fading American Dream"</span></span>
<span id="cb13-95"><a href="#cb13-95" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb13-96"><a href="#cb13-96" aria-hidden="true" tabindex="-1"></a><span class="co">    Definition: % of children earning more than their parents at age 30</span></span>
<span id="cb13-97"><a href="#cb13-97" aria-hidden="true" tabindex="-1"></a><span class="co">    (in constant dollars using official CPI)</span></span>
<span id="cb13-98"><a href="#cb13-98" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb13-99"><a href="#cb13-99" aria-hidden="true" tabindex="-1"></a><span class="co">    Data from Table 1 of the paper + extensions.</span></span>
<span id="cb13-100"><a href="#cb13-100" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb13-101"><a href="#cb13-101" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-102"><a href="#cb13-102" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Published data from Chetty et al. (2017)</span></span>
<span id="cb13-103"><a href="#cb13-103" aria-hidden="true" tabindex="-1"></a>    mobility <span class="op">=</span> pd.DataFrame({</span>
<span id="cb13-104"><a href="#cb13-104" aria-hidden="true" tabindex="-1"></a>        <span class="st">'birth_cohort'</span>: [<span class="dv">1940</span>, <span class="dv">1945</span>, <span class="dv">1950</span>, <span class="dv">1955</span>, <span class="dv">1960</span>, <span class="dv">1965</span>, <span class="dv">1970</span>, <span class="dv">1975</span>, <span class="dv">1980</span>, <span class="dv">1985</span>, <span class="dv">1990</span>, <span class="dv">1993</span>],</span>
<span id="cb13-105"><a href="#cb13-105" aria-hidden="true" tabindex="-1"></a>        <span class="st">'child_income_year'</span>: [<span class="dv">1970</span>, <span class="dv">1975</span>, <span class="dv">1980</span>, <span class="dv">1985</span>, <span class="dv">1990</span>, <span class="dv">1995</span>, <span class="dv">2000</span>, <span class="dv">2005</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2020</span>, <span class="dv">2023</span>],</span>
<span id="cb13-106"><a href="#cb13-106" aria-hidden="true" tabindex="-1"></a>        <span class="st">'parent_income_year'</span>: [<span class="dv">1940</span>, <span class="dv">1945</span>, <span class="dv">1950</span>, <span class="dv">1955</span>, <span class="dv">1960</span>, <span class="dv">1965</span>, <span class="dv">1970</span>, <span class="dv">1975</span>, <span class="dv">1980</span>, <span class="dv">1985</span>, <span class="dv">1990</span>, <span class="dv">1993</span>],</span>
<span id="cb13-107"><a href="#cb13-107" aria-hidden="true" tabindex="-1"></a>        <span class="st">'absolute_mobility_official'</span>: [</span>
<span id="cb13-108"><a href="#cb13-108" aria-hidden="true" tabindex="-1"></a>            <span class="fl">0.92</span>,  <span class="co"># 1940 cohort</span></span>
<span id="cb13-109"><a href="#cb13-109" aria-hidden="true" tabindex="-1"></a>            <span class="fl">0.88</span>,  <span class="co"># 1945 cohort  </span></span>
<span id="cb13-110"><a href="#cb13-110" aria-hidden="true" tabindex="-1"></a>            <span class="fl">0.79</span>,  <span class="co"># 1950 cohort</span></span>
<span id="cb13-111"><a href="#cb13-111" aria-hidden="true" tabindex="-1"></a>            <span class="fl">0.70</span>,  <span class="co"># 1955 cohort</span></span>
<span id="cb13-112"><a href="#cb13-112" aria-hidden="true" tabindex="-1"></a>            <span class="fl">0.62</span>,  <span class="co"># 1960 cohort</span></span>
<span id="cb13-113"><a href="#cb13-113" aria-hidden="true" tabindex="-1"></a>            <span class="fl">0.56</span>,  <span class="co"># 1965 cohort</span></span>
<span id="cb13-114"><a href="#cb13-114" aria-hidden="true" tabindex="-1"></a>            <span class="fl">0.52</span>,  <span class="co"># 1970 cohort</span></span>
<span id="cb13-115"><a href="#cb13-115" aria-hidden="true" tabindex="-1"></a>            <span class="fl">0.50</span>,  <span class="co"># 1975 cohort</span></span>
<span id="cb13-116"><a href="#cb13-116" aria-hidden="true" tabindex="-1"></a>            <span class="fl">0.50</span>,  <span class="co"># 1980 cohort (from paper)</span></span>
<span id="cb13-117"><a href="#cb13-117" aria-hidden="true" tabindex="-1"></a>            <span class="fl">0.48</span>,  <span class="co"># 1985 cohort (extrapolated)</span></span>
<span id="cb13-118"><a href="#cb13-118" aria-hidden="true" tabindex="-1"></a>            <span class="fl">0.46</span>,  <span class="co"># 1990 cohort (extrapolated)</span></span>
<span id="cb13-119"><a href="#cb13-119" aria-hidden="true" tabindex="-1"></a>            <span class="fl">0.45</span>,  <span class="co"># 1993 cohort (extrapolated to 2023)</span></span>
<span id="cb13-120"><a href="#cb13-120" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb13-121"><a href="#cb13-121" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb13-122"><a href="#cb13-122" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-123"><a href="#cb13-123" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> mobility</span>
<span id="cb13-124"><a href="#cb13-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-125"><a href="#cb13-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-126"><a href="#cb13-126" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb13-127"><a href="#cb13-127" aria-hidden="true" tabindex="-1"></a><span class="co"># SHADOWSTATS ADJUSTMENT</span></span>
<span id="cb13-128"><a href="#cb13-128" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb13-129"><a href="#cb13-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-130"><a href="#cb13-130" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> adjust_mobility_for_shadowstats(mobility_df, inflation_df):</span>
<span id="cb13-131"><a href="#cb13-131" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb13-132"><a href="#cb13-132" aria-hidden="true" tabindex="-1"></a><span class="co">    Adjust absolute mobility for ShadowStats inflation.</span></span>
<span id="cb13-133"><a href="#cb13-133" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb13-134"><a href="#cb13-134" aria-hidden="true" tabindex="-1"></a><span class="co">    Logic:</span></span>
<span id="cb13-135"><a href="#cb13-135" aria-hidden="true" tabindex="-1"></a><span class="co">    ------</span></span>
<span id="cb13-136"><a href="#cb13-136" aria-hidden="true" tabindex="-1"></a><span class="co">    If TRUE inflation &gt; official CPI, then:</span></span>
<span id="cb13-137"><a href="#cb13-137" aria-hidden="true" tabindex="-1"></a><span class="co">    1. Parent's purchasing power was HIGHER than official stats suggest</span></span>
<span id="cb13-138"><a href="#cb13-138" aria-hidden="true" tabindex="-1"></a><span class="co">    2. The "real" bar to beat parents is HIGHER</span></span>
<span id="cb13-139"><a href="#cb13-139" aria-hidden="true" tabindex="-1"></a><span class="co">    3. Fewer children truly beat their parents</span></span>
<span id="cb13-140"><a href="#cb13-140" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb13-141"><a href="#cb13-141" aria-hidden="true" tabindex="-1"></a><span class="co">    Method:</span></span>
<span id="cb13-142"><a href="#cb13-142" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb13-143"><a href="#cb13-143" aria-hidden="true" tabindex="-1"></a><span class="co">    For each cohort, compute the cumulative inflation gap between</span></span>
<span id="cb13-144"><a href="#cb13-144" aria-hidden="true" tabindex="-1"></a><span class="co">    parent's income year and child's income year under both measures.</span></span>
<span id="cb13-145"><a href="#cb13-145" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb13-146"><a href="#cb13-146" aria-hidden="true" tabindex="-1"></a><span class="co">    If ShadowStats shows 3x the price increase vs official CPI,</span></span>
<span id="cb13-147"><a href="#cb13-147" aria-hidden="true" tabindex="-1"></a><span class="co">    then roughly 1/3 as many children truly beat their parents</span></span>
<span id="cb13-148"><a href="#cb13-148" aria-hidden="true" tabindex="-1"></a><span class="co">    (assuming nominal income grew at similar rates).</span></span>
<span id="cb13-149"><a href="#cb13-149" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb13-150"><a href="#cb13-150" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-151"><a href="#cb13-151" aria-hidden="true" tabindex="-1"></a>    adjusted <span class="op">=</span> []</span>
<span id="cb13-152"><a href="#cb13-152" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-153"><a href="#cb13-153" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _, row <span class="kw">in</span> mobility_df.iterrows():</span>
<span id="cb13-154"><a href="#cb13-154" aria-hidden="true" tabindex="-1"></a>        cohort <span class="op">=</span> row[<span class="st">'birth_cohort'</span>]</span>
<span id="cb13-155"><a href="#cb13-155" aria-hidden="true" tabindex="-1"></a>        parent_year <span class="op">=</span> <span class="bu">int</span>(row[<span class="st">'parent_income_year'</span>])</span>
<span id="cb13-156"><a href="#cb13-156" aria-hidden="true" tabindex="-1"></a>        child_year <span class="op">=</span> <span class="bu">int</span>(row[<span class="st">'child_income_year'</span>])</span>
<span id="cb13-157"><a href="#cb13-157" aria-hidden="true" tabindex="-1"></a>        official_mobility <span class="op">=</span> row[<span class="st">'absolute_mobility_official'</span>]</span>
<span id="cb13-158"><a href="#cb13-158" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-159"><a href="#cb13-159" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Get inflation indices</span></span>
<span id="cb13-160"><a href="#cb13-160" aria-hidden="true" tabindex="-1"></a>        parent_official <span class="op">=</span> inflation_df[inflation_df[<span class="st">'year'</span>] <span class="op">==</span> parent_year][<span class="st">'official_cpi_index'</span>].values</span>
<span id="cb13-161"><a href="#cb13-161" aria-hidden="true" tabindex="-1"></a>        child_official <span class="op">=</span> inflation_df[inflation_df[<span class="st">'year'</span>] <span class="op">==</span> child_year][<span class="st">'official_cpi_index'</span>].values</span>
<span id="cb13-162"><a href="#cb13-162" aria-hidden="true" tabindex="-1"></a>        parent_shadow <span class="op">=</span> inflation_df[inflation_df[<span class="st">'year'</span>] <span class="op">==</span> parent_year][<span class="st">'shadowstats_index'</span>].values</span>
<span id="cb13-163"><a href="#cb13-163" aria-hidden="true" tabindex="-1"></a>        child_shadow <span class="op">=</span> inflation_df[inflation_df[<span class="st">'year'</span>] <span class="op">==</span> child_year][<span class="st">'shadowstats_index'</span>].values</span>
<span id="cb13-164"><a href="#cb13-164" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-165"><a href="#cb13-165" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(parent_official) <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> <span class="bu">len</span>(child_official) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb13-166"><a href="#cb13-166" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Inflation from parent year to child year</span></span>
<span id="cb13-167"><a href="#cb13-167" aria-hidden="true" tabindex="-1"></a>            official_inflation <span class="op">=</span> child_official[<span class="dv">0</span>] <span class="op">/</span> parent_official[<span class="dv">0</span>]</span>
<span id="cb13-168"><a href="#cb13-168" aria-hidden="true" tabindex="-1"></a>            shadow_inflation <span class="op">=</span> child_shadow[<span class="dv">0</span>] <span class="op">/</span> parent_shadow[<span class="dv">0</span>]</span>
<span id="cb13-169"><a href="#cb13-169" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb13-170"><a href="#cb13-170" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Gap ratio: how much higher is ShadowStats inflation</span></span>
<span id="cb13-171"><a href="#cb13-171" aria-hidden="true" tabindex="-1"></a>            inflation_gap <span class="op">=</span> shadow_inflation <span class="op">/</span> official_inflation</span>
<span id="cb13-172"><a href="#cb13-172" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb13-173"><a href="#cb13-173" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Adjustment: if prices rose 2x more under ShadowStats,</span></span>
<span id="cb13-174"><a href="#cb13-174" aria-hidden="true" tabindex="-1"></a>            <span class="co"># nominal wages would need to be 2x higher to maintain same</span></span>
<span id="cb13-175"><a href="#cb13-175" aria-hidden="true" tabindex="-1"></a>            <span class="co"># purchasing power. Assuming wage growth was similar under both,</span></span>
<span id="cb13-176"><a href="#cb13-176" aria-hidden="true" tabindex="-1"></a>            <span class="co"># true mobility is roughly 1/sqrt(gap) of official estimate.</span></span>
<span id="cb13-177"><a href="#cb13-177" aria-hidden="true" tabindex="-1"></a>            <span class="co"># (sqrt because the distribution matters, not just the mean)</span></span>
<span id="cb13-178"><a href="#cb13-178" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb13-179"><a href="#cb13-179" aria-hidden="true" tabindex="-1"></a>            adjustment_factor <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> np.sqrt(inflation_gap)</span>
<span id="cb13-180"><a href="#cb13-180" aria-hidden="true" tabindex="-1"></a>            adjusted_mobility <span class="op">=</span> official_mobility <span class="op">*</span> adjustment_factor</span>
<span id="cb13-181"><a href="#cb13-181" aria-hidden="true" tabindex="-1"></a>            adjusted_mobility <span class="op">=</span> np.clip(adjusted_mobility, <span class="fl">0.05</span>, <span class="fl">0.95</span>)</span>
<span id="cb13-182"><a href="#cb13-182" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb13-183"><a href="#cb13-183" aria-hidden="true" tabindex="-1"></a>            inflation_gap <span class="op">=</span> np.nan</span>
<span id="cb13-184"><a href="#cb13-184" aria-hidden="true" tabindex="-1"></a>            adjusted_mobility <span class="op">=</span> official_mobility <span class="op">*</span> <span class="fl">0.63</span>  <span class="co"># Default: ~1/sqrt(2.5)</span></span>
<span id="cb13-185"><a href="#cb13-185" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-186"><a href="#cb13-186" aria-hidden="true" tabindex="-1"></a>        adjusted.append({</span>
<span id="cb13-187"><a href="#cb13-187" aria-hidden="true" tabindex="-1"></a>            <span class="st">'birth_cohort'</span>: cohort,</span>
<span id="cb13-188"><a href="#cb13-188" aria-hidden="true" tabindex="-1"></a>            <span class="st">'child_income_year'</span>: child_year,</span>
<span id="cb13-189"><a href="#cb13-189" aria-hidden="true" tabindex="-1"></a>            <span class="st">'parent_income_year'</span>: parent_year,</span>
<span id="cb13-190"><a href="#cb13-190" aria-hidden="true" tabindex="-1"></a>            <span class="st">'official_mobility'</span>: official_mobility,</span>
<span id="cb13-191"><a href="#cb13-191" aria-hidden="true" tabindex="-1"></a>            <span class="st">'shadowstats_mobility'</span>: adjusted_mobility,</span>
<span id="cb13-192"><a href="#cb13-192" aria-hidden="true" tabindex="-1"></a>            <span class="st">'inflation_gap_ratio'</span>: inflation_gap,</span>
<span id="cb13-193"><a href="#cb13-193" aria-hidden="true" tabindex="-1"></a>            <span class="st">'mobility_gap_pp'</span>: (official_mobility <span class="op">-</span> adjusted_mobility) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb13-194"><a href="#cb13-194" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb13-195"><a href="#cb13-195" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-196"><a href="#cb13-196" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(adjusted)</span>
<span id="cb13-197"><a href="#cb13-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-198"><a href="#cb13-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-199"><a href="#cb13-199" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb13-200"><a href="#cb13-200" aria-hidden="true" tabindex="-1"></a><span class="co"># VISUALIZATION</span></span>
<span id="cb13-201"><a href="#cb13-201" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb13-202"><a href="#cb13-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-203"><a href="#cb13-203" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb13-204"><a href="#cb13-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-205"><a href="#cb13-205" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> visualize_results(mobility_df):</span>
<span id="cb13-206"><a href="#cb13-206" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Create visualization: Absolute mobility (Official CPI vs ShadowStats)."""</span></span>
<span id="cb13-207"><a href="#cb13-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-208"><a href="#cb13-208" aria-hidden="true" tabindex="-1"></a>    fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb13-209"><a href="#cb13-209" aria-hidden="true" tabindex="-1"></a>    fig.suptitle(</span>
<span id="cb13-210"><a href="#cb13-210" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Absolute Mobility: Official CPI vs ShadowStats"</span>,</span>
<span id="cb13-211"><a href="#cb13-211" aria-hidden="true" tabindex="-1"></a>        fontsize<span class="op">=</span><span class="dv">14</span>,</span>
<span id="cb13-212"><a href="#cb13-212" aria-hidden="true" tabindex="-1"></a>        fontweight<span class="op">=</span><span class="st">"bold"</span>,</span>
<span id="cb13-213"><a href="#cb13-213" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="fl">0.98</span>,</span>
<span id="cb13-214"><a href="#cb13-214" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-215"><a href="#cb13-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-216"><a href="#cb13-216" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> mobility_df[<span class="st">"birth_cohort"</span>]</span>
<span id="cb13-217"><a href="#cb13-217" aria-hidden="true" tabindex="-1"></a>    y_off <span class="op">=</span> mobility_df[<span class="st">"official_mobility"</span>] <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb13-218"><a href="#cb13-218" aria-hidden="true" tabindex="-1"></a>    y_shd <span class="op">=</span> mobility_df[<span class="st">"shadowstats_mobility"</span>] <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb13-219"><a href="#cb13-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-220"><a href="#cb13-220" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Lines</span></span>
<span id="cb13-221"><a href="#cb13-221" aria-hidden="true" tabindex="-1"></a>    ax.plot(</span>
<span id="cb13-222"><a href="#cb13-222" aria-hidden="true" tabindex="-1"></a>        x, y_off,</span>
<span id="cb13-223"><a href="#cb13-223" aria-hidden="true" tabindex="-1"></a>        <span class="st">"b-o"</span>,</span>
<span id="cb13-224"><a href="#cb13-224" aria-hidden="true" tabindex="-1"></a>        linewidth<span class="op">=</span><span class="fl">2.5</span>,</span>
<span id="cb13-225"><a href="#cb13-225" aria-hidden="true" tabindex="-1"></a>        markersize<span class="op">=</span><span class="dv">8</span>,</span>
<span id="cb13-226"><a href="#cb13-226" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span><span class="st">"Official CPI"</span>,</span>
<span id="cb13-227"><a href="#cb13-227" aria-hidden="true" tabindex="-1"></a>        zorder<span class="op">=</span><span class="dv">3</span>,</span>
<span id="cb13-228"><a href="#cb13-228" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-229"><a href="#cb13-229" aria-hidden="true" tabindex="-1"></a>    ax.plot(</span>
<span id="cb13-230"><a href="#cb13-230" aria-hidden="true" tabindex="-1"></a>        x, y_shd,</span>
<span id="cb13-231"><a href="#cb13-231" aria-hidden="true" tabindex="-1"></a>        <span class="st">"r-s"</span>,</span>
<span id="cb13-232"><a href="#cb13-232" aria-hidden="true" tabindex="-1"></a>        linewidth<span class="op">=</span><span class="fl">2.5</span>,</span>
<span id="cb13-233"><a href="#cb13-233" aria-hidden="true" tabindex="-1"></a>        markersize<span class="op">=</span><span class="dv">8</span>,</span>
<span id="cb13-234"><a href="#cb13-234" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span><span class="st">"ShadowStats Adjusted"</span>,</span>
<span id="cb13-235"><a href="#cb13-235" aria-hidden="true" tabindex="-1"></a>        zorder<span class="op">=</span><span class="dv">3</span>,</span>
<span id="cb13-236"><a href="#cb13-236" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-237"><a href="#cb13-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-238"><a href="#cb13-238" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Shaded gap</span></span>
<span id="cb13-239"><a href="#cb13-239" aria-hidden="true" tabindex="-1"></a>    ax.fill_between(</span>
<span id="cb13-240"><a href="#cb13-240" aria-hidden="true" tabindex="-1"></a>        x,</span>
<span id="cb13-241"><a href="#cb13-241" aria-hidden="true" tabindex="-1"></a>        y_off,</span>
<span id="cb13-242"><a href="#cb13-242" aria-hidden="true" tabindex="-1"></a>        y_shd,</span>
<span id="cb13-243"><a href="#cb13-243" aria-hidden="true" tabindex="-1"></a>        alpha<span class="op">=</span><span class="fl">0.30</span>,</span>
<span id="cb13-244"><a href="#cb13-244" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span><span class="st">"red"</span>,</span>
<span id="cb13-245"><a href="#cb13-245" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span><span class="st">"Hidden decline"</span>,</span>
<span id="cb13-246"><a href="#cb13-246" aria-hidden="true" tabindex="-1"></a>        zorder<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb13-247"><a href="#cb13-247" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-248"><a href="#cb13-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-249"><a href="#cb13-249" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Reference line</span></span>
<span id="cb13-250"><a href="#cb13-250" aria-hidden="true" tabindex="-1"></a>    ax.axhline(<span class="dv">50</span>, color<span class="op">=</span><span class="st">"gray"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="fl">1.5</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb13-251"><a href="#cb13-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-252"><a href="#cb13-252" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Labels, styling</span></span>
<span id="cb13-253"><a href="#cb13-253" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Birth Cohort"</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb13-254"><a href="#cb13-254" aria-hidden="true" tabindex="-1"></a>    ax.set_ylabel(<span class="st">"</span><span class="sc">% E</span><span class="st">arning More Than Parents"</span>, fontsize<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb13-255"><a href="#cb13-255" aria-hidden="true" tabindex="-1"></a>    ax.set_title(<span class="st">"Absolute Mobility Over Time"</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>)</span>
<span id="cb13-256"><a href="#cb13-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-257"><a href="#cb13-257" aria-hidden="true" tabindex="-1"></a>    ax.set_ylim(<span class="dv">0</span>, <span class="dv">100</span>)</span>
<span id="cb13-258"><a href="#cb13-258" aria-hidden="true" tabindex="-1"></a>    ax.set_xlim(<span class="dv">1938</span>, <span class="dv">1995</span>)</span>
<span id="cb13-259"><a href="#cb13-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-260"><a href="#cb13-260" aria-hidden="true" tabindex="-1"></a>    ax.legend(loc<span class="op">=</span><span class="st">"upper right"</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb13-261"><a href="#cb13-261" aria-hidden="true" tabindex="-1"></a>    ax.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb13-262"><a href="#cb13-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-263"><a href="#cb13-263" aria-hidden="true" tabindex="-1"></a>    fig.tight_layout(rect<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.95</span>])</span>
<span id="cb13-264"><a href="#cb13-264" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb13-265"><a href="#cb13-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-266"><a href="#cb13-266" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fig, ax</span>
<span id="cb13-267"><a href="#cb13-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-268"><a href="#cb13-268" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb13-269"><a href="#cb13-269" aria-hidden="true" tabindex="-1"></a><span class="co"># MAIN</span></span>
<span id="cb13-270"><a href="#cb13-270" aria-hidden="true" tabindex="-1"></a><span class="co"># =============================================================================</span></span>
<span id="cb13-271"><a href="#cb13-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-272"><a href="#cb13-272" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">70</span>)</span>
<span id="cb13-273"><a href="#cb13-273" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"ABSOLUTE MOBILITY: Official CPI vs ShadowStats Inflation"</span>)</span>
<span id="cb13-274"><a href="#cb13-274" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">70</span>)</span>
<span id="cb13-275"><a href="#cb13-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-276"><a href="#cb13-276" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Build inflation series</span></span>
<span id="cb13-277"><a href="#cb13-277" aria-hidden="true" tabindex="-1"></a>inflation_df <span class="op">=</span> build_inflation_series()</span>
<span id="cb13-278"><a href="#cb13-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-279"><a href="#cb13-279" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Build Chetty mobility data</span></span>
<span id="cb13-280"><a href="#cb13-280" aria-hidden="true" tabindex="-1"></a>mobility_df <span class="op">=</span> build_chetty_absolute_mobility()</span>
<span id="cb13-281"><a href="#cb13-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-282"><a href="#cb13-282" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Adjust for ShadowStats</span></span>
<span id="cb13-283"><a href="#cb13-283" aria-hidden="true" tabindex="-1"></a>adjusted_df <span class="op">=</span> adjust_mobility_for_shadowstats(mobility_df, inflation_df)</span>
<span id="cb13-284"><a href="#cb13-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-285"><a href="#cb13-285" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Visualize</span></span>
<span id="cb13-286"><a href="#cb13-286" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> visualize_results(adjusted_df)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>======================================================================
ABSOLUTE MOBILITY: Official CPI vs ShadowStats Inflation
======================================================================</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-13-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Chetty et. al.&nbsp;(2017)</strong> has considered counterfactual analysis to understand reasons behind collapse of income mobility:</p>
<blockquote class="blockquote">
<p>“Why have rates of absolute income mobility fallen so sharply over the last half century, and what policies can restore absolute mobility to earlier levels? We used simulations to evaluate the effects of two key trends over the past half century: declining rates of GDP growth and greater inequality in the distribution of GDP (17, 35).”</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/2d8074ae-dad1-4862-94d1-421d06046d1f-1-ccd067f7-61dd-4613-9474-4b79d0ce65d9.png" class="img-fluid figure-img"></p>
<figcaption>image.png</figcaption>
</figure>
</div>
</section>
</section>
<section id="its-inflation" class="level3">
<h3 class="anchored" data-anchor-id="its-inflation">It’s Inflation !</h3>
</section>
</section>
<section id="reducing-compensation-given-a-productivity-level-1" class="level2">
<h2 class="anchored" data-anchor-id="reducing-compensation-given-a-productivity-level-1">2. Reducing Compensation Given a Productivity Level</h2>
<ul>
<li><p>M0/1/2 Inflation and Real Wages: The increase in M2 money supply has contributed to inflation, which in turn has eroded the purchasing power of wages. While nominal wages might rise, real wages—adjusted for inflation—have stagnated or even declined for many workers, particularly those in jobs traditionally associated with higher education.</p></li>
<li><p>Data Evidence: Studies such as those from the Federal Reserve Bank of St.&nbsp;Louis have shown that while M2 has increased significantly, the growth in real wages has not kept pace, particularly after the 2008 financial crisis​ (St.&nbsp;Louis Fed).</p></li>
</ul>
<p>Example: The Economic Policy Institute found that between 1979 and 2020, the median worker’s wages grew by only 15.1% when adjusted for inflation, while productivity increased by 61.8%. This decoupling suggests that higher education does not necessarily lead to proportionate income growth in an inflationary environment.</p>
<p><strong>Download Productivity data</strong></p>
<div id="bcfb620a-3e53-4f22-847d-c340904aa932" class="cell" data-execution_count="86">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>headers <span class="op">=</span> {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"User-Agent"</span>: <span class="st">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36"</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>productivity_url <span class="op">=</span> <span class="st">"https://download.bls.gov/pub/time.series/pr/pr.data.1.AllData"</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> requests.get(productivity_url, headers<span class="op">=</span>headers).text</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>productivity_data <span class="op">=</span> pd.read_csv(StringIO(data), sep<span class="op">=</span><span class="st">"</span><span class="ch">\t</span><span class="st">"</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>productivity_data.columns <span class="op">=</span> [<span class="st">'series_id'</span>, <span class="st">'year'</span>, <span class="st">'period'</span>, <span class="st">'value'</span>,<span class="st">'footnote_codes'</span>]</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>productivity_data[<span class="st">'series_id'</span>] <span class="op">=</span> productivity_data[<span class="st">'series_id'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>productivity_data[<span class="st">'period'</span>] <span class="op">=</span> productivity_data[<span class="st">'period'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">#productivity_data.info()</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Process the productivity data</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering for relevant data (example uses a hypothetical series code PRS85006093 for nonfarm business productivity)</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>productivity_data <span class="op">=</span> productivity_data[(productivity_data[<span class="st">'series_id'</span>] <span class="op">==</span> <span class="st">'PRS85006093'</span>) <span class="op">&amp;</span> (productivity_data[<span class="st">'year'</span>] <span class="op">&gt;=</span> start_date.year)]</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>productivity_data <span class="op">=</span> productivity_data[[<span class="st">'year'</span>, <span class="st">'value'</span>]].rename(columns<span class="op">=</span>{<span class="st">'value'</span>: <span class="st">'Productivity_Index'</span>})</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>productivity_data.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="86">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">Productivity_Index</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">45473</th>
<td>1979</td>
<td>49.615</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">45474</th>
<td>1979</td>
<td>49.523</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">45475</th>
<td>1979</td>
<td>49.463</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">45476</th>
<td>1979</td>
<td>49.405</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">45477</th>
<td>1979</td>
<td>49.360</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><strong>Download Median Wage Data</strong></p>
<div id="28b8e95d-242b-41e8-a29e-710c60da0f58" class="cell" data-execution_count="87">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas_datareader <span class="im">as</span> pdr</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># LEU0252881600Q: Median usual weekly real earnings: Wage and salary workers: 16 years and over</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>wage_data <span class="op">=</span> pdr.get_data_fred(<span class="st">'LEU0252881600Q'</span>, start<span class="op">=</span>datetime(<span class="dv">1979</span>, <span class="dv">1</span>, <span class="dv">1</span>), end<span class="op">=</span>datetime(<span class="dv">2020</span>, <span class="dv">12</span>, <span class="dv">31</span>))</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview the data</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>wage_data <span class="op">=</span> wage_data.groupby(wage_data.index.year)[<span class="st">"LEU0252881600Q"</span>].median()</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>wage_data <span class="op">=</span> wage_data.reset_index()</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Process the wage data</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming the data is already in the right format</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>wage_data <span class="op">=</span> wage_data[wage_data[<span class="st">'DATE'</span>] <span class="op">&gt;=</span> <span class="dv">1979</span>]</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>wage_data <span class="op">=</span> wage_data[[<span class="st">'DATE'</span>, <span class="st">'LEU0252881600Q'</span>]].rename(columns<span class="op">=</span>{<span class="st">'DATE'</span>:<span class="st">'year'</span>, <span class="st">'LEU0252881600Q'</span>: <span class="st">'Weekly_Median_Wage'</span>})</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>wage_data.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="87">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">Weekly_Median_Wage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1979</td>
<td>331.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1980</td>
<td>316.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1981</td>
<td>312.5</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1982</td>
<td>314.5</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1983</td>
<td>314.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="53c29a51-ec91-4131-b332-b08ea5023cf1" class="cell" data-execution_count="88">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Merge the datasets on the year</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> pd.merge(productivity_data, wage_data, left_on<span class="op">=</span><span class="st">'year'</span>, right_on<span class="op">=</span><span class="st">'year'</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>merged_data.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="88">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">Productivity_Index</th>
<th data-quarto-table-cell-role="th">Weekly_Median_Wage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1979</td>
<td>49.615</td>
<td>331.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1979</td>
<td>49.523</td>
<td>331.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1979</td>
<td>49.463</td>
<td>331.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1979</td>
<td>49.405</td>
<td>331.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1979</td>
<td>49.360</td>
<td>331.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="ad4ce1e1-d784-4301-8ad0-1c97df7b32aa" class="cell" data-execution_count="89">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Calculate cumulative growth</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>base_productivity <span class="op">=</span> merged_data[<span class="st">'Productivity_Index'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>base_wage <span class="op">=</span> merged_data[<span class="st">'Weekly_Median_Wage'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>merged_data[<span class="st">'Productivity_Growth'</span>] <span class="op">=</span> ((merged_data[<span class="st">'Productivity_Index'</span>] <span class="op">-</span> base_productivity) <span class="op">/</span> base_productivity) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>merged_data[<span class="st">'Weekly_Median_Wage_Growth'</span>] <span class="op">=</span> ((merged_data[<span class="st">'Weekly_Median_Wage'</span>] <span class="op">-</span> base_wage) <span class="op">/</span> base_wage) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Plot the data</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>plt.plot(merged_data[<span class="st">'year'</span>], merged_data[<span class="st">'Productivity_Growth'</span>], label<span class="op">=</span><span class="st">'Productivity Growth'</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>plt.plot(merged_data[<span class="st">'year'</span>], merged_data[<span class="st">'Weekly_Median_Wage_Growth'</span>], label<span class="op">=</span><span class="st">'Weekly Median Wage Growth'</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Productivity Growth vs. Weekly Median Wage Growth (1979-2020)'</span>)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Cumulative Growth (%)'</span>)</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the final growth rates</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Productivity Growth (1979-2020): </span><span class="sc">{</span>merged_data[<span class="st">'Productivity_Growth'</span>]<span class="sc">.</span>iloc[<span class="op">-</span><span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">%"</span>)</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Weekly Median Wage Growth (1979-2020): </span><span class="sc">{</span>merged_data[<span class="st">'Weekly_Median_Wage_Growth'</span>]<span class="sc">.</span>iloc[<span class="op">-</span><span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">%"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-17-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Productivity Growth (1979-2020): 120.07%
Weekly Median Wage Growth (1979-2020): 14.95%</code></pre>
</div>
</div>
<section id="impact-of-m2-inflation-rising-costs-of-living-and-education" class="level4">
<h4 class="anchored" data-anchor-id="impact-of-m2-inflation-rising-costs-of-living-and-education">Impact of M2 Inflation: Rising Costs of Living and Education</h4>
<ul>
<li><p>Education Costs: The cost of education has risen significantly, outpacing inflation and wage growth. As M2 inflation contributes to the overall increase in the cost of living, students graduate with higher levels of debt, which diminishes the net financial returns of their education.</p></li>
<li><p>Case Study: According to the College Board, the average cost of tuition and fees at private four-year institutions in the U.S. has more than doubled since 2000, while wages have not kept pace with these increases​</p></li>
</ul>
<p>Data Source: https://research.collegeboard.org/media/xlsx/trends-college-pricing-excel-data-2023.xlsx</p>
<div id="891a8fe3-8648-4806-805b-e15524cc88e3" class="cell" data-execution_count="90">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>tution_data <span class="op">=</span> pd.read_csv(<span class="st">"data/tuition_private_4yr_current_dollars_final_cleaned.csv"</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>tution_data.columns <span class="op">=</span> [<span class="st">'year'</span>, <span class="st">'Private_Nonprofit_Four_Year'</span>]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>tution_data.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="90">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">Private_Nonprofit_Four_Year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1971</td>
<td>1830.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1972</td>
<td>1950.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1973</td>
<td>2050.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1974</td>
<td>2130.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1975</td>
<td>2290.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="467cad34-966b-4691-b56c-badfdb7455b6" class="cell" data-execution_count="91">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Merge the datasets on the year</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> pd.merge(tution_data, wage_data, left_on<span class="op">=</span><span class="st">'year'</span>, right_on<span class="op">=</span><span class="st">'year'</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>merged_data.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="91">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">Private_Nonprofit_Four_Year</th>
<th data-quarto-table-cell-role="th">Weekly_Median_Wage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1979</td>
<td>3230.0</td>
<td>331.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1980</td>
<td>3620.0</td>
<td>316.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1981</td>
<td>4110.0</td>
<td>312.5</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1982</td>
<td>4640.0</td>
<td>314.5</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1983</td>
<td>5090.0</td>
<td>314.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="24e6baa6-fe68-4645-a3c3-393078625593" class="cell" data-execution_count="92">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Calculate cumulative growth</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>base_tution <span class="op">=</span> merged_data[<span class="st">'Private_Nonprofit_Four_Year'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>base_wage <span class="op">=</span> merged_data[<span class="st">'Weekly_Median_Wage'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>merged_data[<span class="st">'Tution_Growth'</span>] <span class="op">=</span> ((merged_data[<span class="st">'Private_Nonprofit_Four_Year'</span>] <span class="op">-</span> base_tution) <span class="op">/</span> base_tution) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>merged_data[<span class="st">'Weekly_Median_Wage_Growth'</span>] <span class="op">=</span> ((merged_data[<span class="st">'Weekly_Median_Wage'</span>] <span class="op">-</span> base_wage) <span class="op">/</span> base_wage) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Plot the data</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>plt.plot(merged_data[<span class="st">'year'</span>], merged_data[<span class="st">'Tution_Growth'</span>], label<span class="op">=</span><span class="st">'Tution Growth (Private Nonprofit Four Year)'</span>)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>plt.plot(merged_data[<span class="st">'year'</span>], merged_data[<span class="st">'Weekly_Median_Wage_Growth'</span>], label<span class="op">=</span><span class="st">'Weekly Median Wage Growth'</span>)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Tution Growth (Private Nonprofit Four Year) vs. Weekly Median Wage Growth (1979-2020)'</span>)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Cumulative Growth (%)'</span>)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the final growth rates</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Tution Growth (Private Nonprofit Four Year) (1979-): </span><span class="sc">{</span>merged_data[<span class="st">'Tution_Growth'</span>]<span class="sc">.</span>iloc[<span class="op">-</span><span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">%"</span>)</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Weekly Median Wage Growth (1979-): </span><span class="sc">{</span>merged_data[<span class="st">'Weekly_Median_Wage_Growth'</span>]<span class="sc">.</span>iloc[<span class="op">-</span><span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">%"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-20-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Tution Growth (Private Nonprofit Four Year) (1979-): 1053.87%
Weekly Median Wage Growth (1979-): 14.95%</code></pre>
</div>
</div>
<p>Now let’s explore how Tution Growth and M2 Inflation are related.</p>
</section>
<section id="tution-growth-and-m2-inflation" class="level4">
<h4 class="anchored" data-anchor-id="tution-growth-and-m2-inflation">Tution Growth and M2 Inflation</h4>
<div id="d5e8efab-5b2b-4803-9b0e-2e6b47c25125" class="cell" data-execution_count="93">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch M2 Money Stock data</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>m2_supply <span class="op">=</span> web.DataReader(<span class="st">'M2SL'</span>, <span class="st">'fred'</span>, start_date, end_date)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>m2_supply <span class="op">=</span> m2_supply.groupby(m2_supply.index.year)[<span class="st">"M2SL"</span>].mean()</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>m2_supply.dropna()</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>m2_supply <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>{</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'year'</span>: m2_supply.index,</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'m2sl'</span>: m2_supply.values</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>m2_supply.reset_index()</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>m2_supply.head(<span class="dv">5</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="93">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">m2sl</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1979</td>
<td>1425.666667</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1980</td>
<td>1540.183333</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1981</td>
<td>1679.291667</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1982</td>
<td>1830.925000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1983</td>
<td>2054.466667</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="77eb0f21-d88d-4807-86b6-6ddcf8b800f1" class="cell" data-execution_count="95">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>tution_m2sl_merged_data <span class="op">=</span> pd.merge(tution_data, m2_supply, left_on<span class="op">=</span><span class="st">'year'</span>, right_on<span class="op">=</span><span class="st">'year'</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>tution_m2sl_merged_data.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="95">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">Private_Nonprofit_Four_Year</th>
<th data-quarto-table-cell-role="th">m2sl</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1979</td>
<td>3230.0</td>
<td>1425.666667</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1980</td>
<td>3620.0</td>
<td>1540.183333</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1981</td>
<td>4110.0</td>
<td>1679.291667</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1982</td>
<td>4640.0</td>
<td>1830.925000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1983</td>
<td>5090.0</td>
<td>2054.466667</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="5dbd3432-e130-47d0-8318-534a2d994181" class="cell" data-execution_count="96">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform Granger Causality Test</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>granger_test <span class="op">=</span> grangercausalitytests(tution_m2sl_merged_data[[<span class="st">'Private_Nonprofit_Four_Year'</span>, <span class="st">'m2sl'</span>]], </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>                                     maxlag<span class="op">=</span><span class="dv">12</span>, </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>                                     verbose<span class="op">=</span><span class="va">True</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Granger Causality
number of lags (no zero) 1
ssr based F test:         F=0.0591  , p=0.8092  , df_denom=41, df_num=1
ssr based chi2 test:   chi2=0.0634  , p=0.8012  , df=1
likelihood ratio test: chi2=0.0634  , p=0.8013  , df=1
parameter F test:         F=0.0591  , p=0.8092  , df_denom=41, df_num=1

Granger Causality
number of lags (no zero) 2
ssr based F test:         F=0.2816  , p=0.7561  , df_denom=38, df_num=2
ssr based chi2 test:   chi2=0.6373  , p=0.7271  , df=2
likelihood ratio test: chi2=0.6327  , p=0.7288  , df=2
parameter F test:         F=0.2816  , p=0.7561  , df_denom=38, df_num=2

Granger Causality
number of lags (no zero) 3
ssr based F test:         F=11.8657 , p=0.0000  , df_denom=35, df_num=3
ssr based chi2 test:   chi2=42.7165 , p=0.0000  , df=3
likelihood ratio test: chi2=29.4689 , p=0.0000  , df=3
parameter F test:         F=11.8657 , p=0.0000  , df_denom=35, df_num=3

Granger Causality
number of lags (no zero) 4
ssr based F test:         F=8.6750  , p=0.0001  , df_denom=32, df_num=4
ssr based chi2 test:   chi2=44.4595 , p=0.0000  , df=4
likelihood ratio test: chi2=30.1133 , p=0.0000  , df=4
parameter F test:         F=8.6750  , p=0.0001  , df_denom=32, df_num=4

Granger Causality
number of lags (no zero) 5
ssr based F test:         F=6.3667  , p=0.0004  , df_denom=29, df_num=5
ssr based chi2 test:   chi2=43.9086 , p=0.0000  , df=5
likelihood ratio test: chi2=29.6339 , p=0.0000  , df=5
parameter F test:         F=6.3667  , p=0.0004  , df_denom=29, df_num=5

Granger Causality
number of lags (no zero) 6
ssr based F test:         F=6.0540  , p=0.0005  , df_denom=26, df_num=6
ssr based chi2 test:   chi2=54.4860 , p=0.0000  , df=6
likelihood ratio test: chi2=34.0958 , p=0.0000  , df=6
parameter F test:         F=6.0540  , p=0.0005  , df_denom=26, df_num=6

Granger Causality
number of lags (no zero) 7
ssr based F test:         F=5.2112  , p=0.0012  , df_denom=23, df_num=7
ssr based chi2 test:   chi2=60.2682 , p=0.0000  , df=7
likelihood ratio test: chi2=36.1043 , p=0.0000  , df=7
parameter F test:         F=5.2112  , p=0.0012  , df_denom=23, df_num=7

Granger Causality
number of lags (no zero) 8
ssr based F test:         F=4.1960  , p=0.0044  , df_denom=20, df_num=8
ssr based chi2 test:   chi2=62.1003 , p=0.0000  , df=8
likelihood ratio test: chi2=36.4529 , p=0.0000  , df=8
parameter F test:         F=4.1960  , p=0.0044  , df_denom=20, df_num=8

Granger Causality
number of lags (no zero) 9
ssr based F test:         F=4.0155  , p=0.0066  , df_denom=17, df_num=9
ssr based chi2 test:   chi2=76.5310 , p=0.0000  , df=9
likelihood ratio test: chi2=41.0296 , p=0.0000  , df=9
parameter F test:         F=4.0155  , p=0.0066  , df_denom=17, df_num=9

Granger Causality
number of lags (no zero) 10
ssr based F test:         F=3.1079  , p=0.0262  , df_denom=14, df_num=10
ssr based chi2 test:   chi2=77.6984 , p=0.0000  , df=10
likelihood ratio test: chi2=40.9278 , p=0.0000  , df=10
parameter F test:         F=3.1079  , p=0.0262  , df_denom=14, df_num=10

Granger Causality
number of lags (no zero) 11
ssr based F test:         F=4.4091  , p=0.0105  , df_denom=11, df_num=11
ssr based chi2 test:   chi2=149.9104, p=0.0000  , df=11
likelihood ratio test: chi2=57.3950 , p=0.0000  , df=11
parameter F test:         F=4.4091  , p=0.0105  , df_denom=11, df_num=11

Granger Causality
number of lags (no zero) 12
ssr based F test:         F=13.2302 , p=0.0005  , df_denom=8, df_num=12
ssr based chi2 test:   chi2=654.8936, p=0.0000  , df=12
likelihood ratio test: chi2=100.2252, p=0.0000  , df=12
parameter F test:         F=13.2302 , p=0.0005  , df_denom=8, df_num=12</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/dbose/anaconda3/envs/py-data/lib/python3.8/site-packages/statsmodels/tsa/stattools.py:1545: FutureWarning: verbose is deprecated since functions should not print results
  warnings.warn(</code></pre>
</div>
</div>
<p>The Granger causality tests <strong>provide strong evidence that changes in the M2 money supply (M2SL) do indeed cause changes in the cost of tuition at Private Nonprofit Four-Year institutions</strong>, particularly when considering lags 3 through 12. The most significant causal effects are observed around lags 3-6, with some weakening around lags 7-10, and a resurgence at higher lags (lag 12). This analysis suggests that M2SL is a significant predictor of tuition costs over various lag periods, implying that changes in the money supply could have a delayed impact on educational costs.</p>
<p><strong>Student Debt</strong>:</p>
<p>Federal Reserve data shows that student debt in the U.S. has skyrocketed, surpassing $1.7 trillion in 2021. This growing debt burden makes it harder for graduates to achieve financial stability, let alone upward mobility.</p>
</section>
<section id="impact-of-technological-disruption-automation-and-job-displacement" class="level3">
<h3 class="anchored" data-anchor-id="impact-of-technological-disruption-automation-and-job-displacement">Impact of Technological Disruption: Automation and Job Displacement:</h3>
<ul>
<li><p>Tech Disruption: Technological advancements, particularly in automation and AI, have disrupted industries that traditionally offered stable employment to highly educated individuals. Jobs in fields like accounting (A), legal services (L), and even medicine (M) (LAM in acronym) are increasingly being automated, reducing the demand for highly educated workers in these areas.</p></li>
<li><p>Research Findings: A 2020 report by the World Economic Forum predicts that by 2025, automation will displace about 85 million jobs globally, many of which are held by individuals with higher education. This disruption challenges the stability that higher education once promised​ (World Bank).</p></li>
<li><p><strong>Global Displacement Estimates</strong>: 400 to 800 million individuals globally could be displaced by automation and need to find new jobs by 2030. This estimate reflects the potential impact under various scenarios of automation adoption.</p></li>
<li><p><strong>Occupation Shifts</strong>: 75 to 375 million workers may need to switch occupational categories and learn new skills to remain employed, depending on the speed of automation adoption. This transition represents 3% to 14% of the global workforce.</p></li>
<li><p>300 to 365 million new jobs could be created globally by 2030 from rising incomes and consumption, especially in emerging economies. This implies 100-435 million jobs get destroyed. This wave of automation, at least, is not a net job creator without even quantifying stress-level or level of satisfaction from those that will exist by 2030.</p></li>
</ul>
<p><img src="images/occupational_shift.png" width="650" height="650"></p>
<p>Example: The rise of AI tools like GPT (Generative Pre-trained Transformer) has started to replace certain tasks performed by professionals in law and finance, sectors that were once considered safe for those with advanced degrees.</p>
<p><strong>Displaced workers are often forced into lower-paying jobs or must invest in learning new technologies (SaaS tools, AI/ML etc.) to remain employable, perpetuating a cycle of continual upskilling without significant wage growth.</strong></p>
<p>Sources - JOBS LOST, JOBS GAINED: WORKFORCE TRANSITIONS IN A TIME OF AUTOMATION https://www.mckinsey.com/~/media/mckinsey/industries/public%20and%20social%20sector/our%20insights/what%20the%20future%20of%20work%20will%20mean%20for%20jobs%20skills%20and%20wages/mgi-jobs-lost-jobs-gained-executive-summary-december-6-2017.pdf</p>
<p>## Hypothesis: &gt; <strong>Benefits of automation mostly accrue to Venture Capitalists (VCs), private equity (PEs) firms, investment funds, governments (via tax collection) and enterprises, while workers face job displacement or wage stagnation</strong></p>
<p>The <strong>labor share</strong> — the fraction of economic output that accrues to workers as compensation in exchange for their labor, could be a way to measure whether the benefits of automation is accruing to labour</p>
<p><img src="images/labour_share.png" width="650" height="650"></p>
<p>Source: - https://www.bls.gov/opub/mlr/2017/article/estimating-the-us-labor-share.htm</p>
<p><img src="images/labour_share_by_sector_and_factors.png" width="650" height="650"></p>
<p>Source: - A new look at the declining labor share of income in the United States https://www.mckinsey.com/~/media/McKinsey/Featured%20Insights/Employment%20and%20Growth/A%20new%20look%20at%20the%20declining%20labor%20share%20of%20income%20in%20the%20United%20States/MGI-A-new-look-at-the-declining-labor-share-of-income-in-the-United-States.pdf</p>
</section>
<section id="summary-of-five-main-reasons-for-declining-labor-share" class="level3">
<h3 class="anchored" data-anchor-id="summary-of-five-main-reasons-for-declining-labor-share">Summary of Five Main Reasons for Declining Labor Share:</h3>
<ul>
<li><ol type="i">
<li><strong>Capital Deepening, Substitution, and Automation</strong>: <br> <strong>Technological advancements, such as powerful computers and robots</strong>, reduce the cost of investment in capital, incentivizing companies to substitute labor with capital. This shift can lead to a decrease in the labor share of income as less labor is needed in production. However, the relationship is complex because technology can also complement labor, raising productivity and potentially leading to wage increases. The decline in labor’s share may occur if capital becomes more prominent in production, increasing returns on capital relative to labor.</li>
</ol></li>
<li><ol start="2" type="i">
<li><strong>“Superstar” Effects and Consolidation</strong>: <br> The rise of “superstar” firms that dominate profits and value added in their industries, especially in <strong>knowledge-intensive sectors</strong>, has led to a larger share of economic value going to capital owners rather than labor. This phenomenon is often associated with consolidation and reduced competition, which can occur in regulated sectors or those protected by strong intellectual property rights. These superstar firms often deploy more capital or achieve higher returns, further reducing the labor share.</li>
</ol></li>
<li><ol start="3" type="i">
<li><strong>Globalization and Labor Bargaining Power</strong>: <br> Increased global trade and competition from countries with lower labor costs, along with the threat of offshoring jobs, have put downward pressure on wages and employment. The weakening of labor market institutions, such as unions, has further diminished workers’ bargaining power, contributing to a declining labor share. While stronger bargaining power or higher minimum wages can temporarily increase the labor share, these measures may also encourage greater capital substitution in the long term.</li>
</ol></li>
<li><ol start="4" type="i">
<li><strong>Higher Depreciation (Due to Shift to Intangible Capital)</strong>: <br> The shift toward greater use of <strong>intangible assets, like intellectual property (IP) and software</strong>, which have faster depreciation cycles than traditional physical assets, has increased the depreciation share of income. This reduces the overall amount available to labor and capital. Additionally, the economy has been working through a capital overhang from the investment boom before the financial crisis, further increasing depreciation and reducing the labor share.</li>
</ol></li>
<li><ol start="22" type="a">
<li><strong>Supercycles and Boom-Bust</strong>: <br> Certain sectors, particularly those in energy and minerals, are subject to price supercycles, where rapidly rising commodity prices increase profits and reduce labor’s share of income. Other sectors, such as real estate and construction, have experienced boom-bust cycles that shift the capital and labor share of income. For example, tech services have shown industry-specific contractions followed by recovery, affecting labor’s share over time.</li>
</ol></li>
</ul>
<p>Out of these causative factors (i), (ii) and (iv) are directly or indirectly related to <strong>Tech &amp; Automation</strong></p>
</section>
</section>
<section id="impact-of-technological-disruption-underemployment-of-graduates" class="level2">
<h2 class="anchored" data-anchor-id="impact-of-technological-disruption-underemployment-of-graduates">Impact of Technological Disruption: Underemployment of Graduates:</h2>
<ul>
<li><p><strong>Overqualification</strong>: As more people pursue higher education, the labor market becomes saturated with degree holders, leading to underemployment. Graduates often find themselves in jobs that do not require their level of education, resulting in lower job satisfaction and income.</p></li>
<li><p><strong>Statistical Evidence</strong>: The Federal Reserve Bank of New York reported that as of 2021, about 41% of recent college graduates in the U.S. were underemployed, meaning they were working in jobs that typically do not require a bachelor’s degree</p></li>
<li><p><strong>52% of Graduates Underemployed</strong>: One year after graduation, 52% of college graduates with a terminal bachelor’s degree are underemployed. This rate decreases only slightly to 45% after 10 years​(Talent-Disrupted-2).</p></li>
</ul>
<blockquote class="blockquote">
<p>STEM is not a silver bullet. While policymakers typically think of STEM (science, technology, engineering, and mathematics) programs as a sure pathway to college-level employment and high wages, the reality is more nuanced. Graduates with a bachelor’s degree in computer science, engineering, or mathematics tend to experience very low underemployment, while those with a degree in a life sciences field (e.g., biology) tend to face higher underemployment rates.</p>
</blockquote>
<ul>
<li><p>Persistence of Underemployment: 73% Remain Underemployed: A staggering 73% of those who start out underemployed remain in such positions 10 years after graduation</p></li>
<li><p>Underemployment / Unemployment, beyond skill-gap, can also indicate over-supply in labour market. One way to measure that would be to capture data about <strong>Avg Applications per Job by Sectors</strong> or ratio of <strong>Job Openings to Unemployment</strong></p></li>
<li><p>Overeducation and depressive symptoms: diminishing mental health returns to education (https://sci-hub.se/10.1111/1467-9566.12039) &gt; On the supply side, the labour market value of educational credentials inflated (Hannum and Buchmann 2005), whereas on the demand side, employers started to compete for employees with the highest credentials in order to reduce the costs of job training (Hirsch 1977, Thurow 1976). As a result, the fact that the supply of highly educated people outnumbered the demand for educated labour (Freeman 1976) led to some highly educated people ending up in jobs that actually required lower qualifications (Duncan and Hoffman 1981). This phenomenon of overeducation thus became a permanent condition for a substantial number of employees (Pritchett 2001, Rubb 2003, Vaisey 2006). At the population level the presence of overeducation is inferred from the observation of diminishing returns to tertiary education. For instance, Freeman (1976) defines overeducation as ‘a falling private rate of return to college education’ (Psacharopoulos, 1994: 1334). At the individual level it is defined as job–education mismatch, that is, when ‘the level of education acquired exceeds the level of education required to adequately perform the job’ (Wolbers 2003: 251).</p></li>
</ul>
<p>Sources:</p>
<ul>
<li><a href="https://stradaeducation.org/wp-content/uploads/2024/03/Talent-Disrupted-2.pdf?utm_source=StradaEducation.org&amp;utm_medium=Website&amp;utm_campaign=TalentDisrupted&amp;utm_content=DownloadButton%20">TALENT DISRUPTED - College Graduates, Underemployment, and the Way Forward</a></li>
<li><a href="https://www.newyorkfed.org/research/college-labor-market#--:explore:outcomes-by-major">college-labor-market</a></li>
</ul>
<section id="trend-in-job-openings-to-unemployment" class="level3">
<h3 class="anchored" data-anchor-id="trend-in-job-openings-to-unemployment">Trend in Job openings to unemployment</h3>
<div id="5be635c8-9c18-4b79-aead-bcebb1248d63" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># BLS API Key</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>api_key <span class="op">=</span> <span class="st">'36aea4409aef4dd787a9ab7107c9d232'</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the series IDs for job openings (JOLTS) and unemployment (UNRATE)</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>series_ids <span class="op">=</span> {</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Job Openings"</span>: <span class="st">"JTS000000000000000JOL"</span>, </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Unemployment"</span>: <span class="st">"LNS13000000"</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the endpoint and parameters for the API request</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>endpoint <span class="op">=</span> <span class="st">"https://api.bls.gov/publicAPI/v2/timeseries/data/"</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>headers <span class="op">=</span> {</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Content-Type"</span>: <span class="st">"application/json"</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Request data for both series</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"seriesid"</span>: <span class="bu">list</span>(series_ids.values()),</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">NOTE</span><span class="co">:max data range can be of 20 years</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"startyear"</span>: <span class="st">'2004'</span>,</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"endyear"</span>: <span class="st">'2024'</span>,</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"registrationkey"</span>: api_key</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.post(endpoint, json<span class="op">=</span>data, headers<span class="op">=</span>headers)</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>json_data <span class="op">=</span> response.json()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="da37a0e0-5b3b-40ea-8351-6d0f25a0ebc5" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract data and create a DataFrame</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>series_data <span class="op">=</span> {}</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> series <span class="kw">in</span> json_data[<span class="st">'Results'</span>][<span class="st">'series'</span>]:</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    series_id <span class="op">=</span> series[<span class="st">'seriesID'</span>]</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    series_name <span class="op">=</span> [key <span class="cf">for</span> key, value <span class="kw">in</span> series_ids.items() <span class="cf">if</span> value <span class="op">==</span> series_id][<span class="dv">0</span>]</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    data_points <span class="op">=</span> [(item[<span class="st">'year'</span>], item[<span class="st">'value'</span>]) <span class="cf">for</span> item <span class="kw">in</span> series[<span class="st">'data'</span>]]</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(data_points, columns<span class="op">=</span>[<span class="st">'Year'</span>, series_name])</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    df[series_name] <span class="op">=</span> df[series_name].astype(<span class="bu">float</span>)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    series_data[series_name] <span class="op">=</span> df.set_index(<span class="st">'Year'</span>)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge the two dataframes</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>df_job_openings_unemployment_merged <span class="op">=</span> pd.merge(series_data[<span class="st">'Job Openings'</span>], </span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>                                               series_data[<span class="st">'Unemployment'</span>], </span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>                                               left_index<span class="op">=</span><span class="va">True</span>, </span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>                                               right_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the ratio of Job Openings to Unemployment</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>df_job_openings_unemployment_merged[<span class="st">'Job Openings to Unemployment Ratio'</span>] <span class="op">=</span> df_job_openings_unemployment_merged[<span class="st">'Job Openings'</span>] <span class="op">/</span> df_job_openings_unemployment_merged[<span class="st">'Unemployment'</span>]</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>plt.plot(df_job_openings_unemployment_merged.index, </span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>         df_job_openings_unemployment_merged[<span class="st">'Job Openings to Unemployment Ratio'</span>], </span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>         marker<span class="op">=</span><span class="st">'o'</span>)</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Job Openings to Unemployment Ratio (2004-2024)'</span>)</span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Ratio of Job Openings to Unemployment'</span>)</span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-25-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>What’s interesting is that the ratio remained &lt;1 (over-supply/skill-gap) till 2018, corrected during COVID and rebounded stronger. No we don’t know how much of that rebound is caused by transitioning to the “new world order”, remote/WFH tech jobs or monetary stimulus provided by government.</p>
<section id="trend-in-job-openings-to-unemployment---by-sectors" class="level4">
<h4 class="anchored" data-anchor-id="trend-in-job-openings-to-unemployment---by-sectors">Trend in Job openings to unemployment - By Sectors</h4>
<div id="7a681a0c-1aed-449d-a3cf-b89b71279fdb" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the series IDs for job openings (JOLTS) and unemployment for various sectors</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># https://www.bls.gov/help/hlpforma.htm#jt</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>series_ids <span class="op">=</span> {</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Tech Job Openings"</span>: <span class="st">"JTS540099000000000JOL"</span>,        <span class="co"># Professional and business services (often used as a proxy for tech)</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Manufacturing Job Openings"</span>: <span class="st">"JTS300000000000000JOL"</span>,</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Retail Job Openings"</span>: <span class="st">"JTS440000000000000JOL"</span>,</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># "Food Services Job Openings": "JTS720000000000000JOL",</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># https://data.bls.gov/timeseries/LNU04032215</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 04 = rate, 03 = level (numbers)</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Tech Unemployment"</span>: <span class="st">"LNU03032239"</span>,           <span class="co"># Unemployment for professional and technical services</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Manufacturing Unemployment"</span>: <span class="st">"LNU03032232"</span>,</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Retail Unemployment"</span>: <span class="st">"LNU03032235"</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># "Food Services Unemployment": "LNS14000032"</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the endpoint and parameters for the API request</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>endpoint <span class="op">=</span> <span class="st">"https://api.bls.gov/publicAPI/v2/timeseries/data/"</span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>headers <span class="op">=</span> {</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Content-Type"</span>: <span class="st">"application/json"</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Request data for each series</span></span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">"seriesid"</span>: <span class="bu">list</span>(series_ids.values()),</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">"startyear"</span>: <span class="st">"2004"</span>,</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">"endyear"</span>: <span class="st">"2024"</span>,</span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"registrationkey"</span>: api_key</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.post(endpoint, json<span class="op">=</span>data, headers<span class="op">=</span>headers)</span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>json_data <span class="op">=</span> response.json()</span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract data and create DataFrames for each sector</span></span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>sector_data <span class="op">=</span> {}</span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> series <span class="kw">in</span> json_data[<span class="st">'Results'</span>][<span class="st">'series'</span>]:</span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>    series_id <span class="op">=</span> series[<span class="st">'seriesID'</span>]</span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>    series_name <span class="op">=</span> [key <span class="cf">for</span> key, value <span class="kw">in</span> series_ids.items() <span class="cf">if</span> value <span class="op">==</span> series_id][<span class="dv">0</span>]</span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>    data_points <span class="op">=</span> [(item[<span class="st">'year'</span>], item[<span class="st">'value'</span>]) <span class="cf">for</span> item <span class="kw">in</span> series[<span class="st">'data'</span>]]</span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(data_points, columns<span class="op">=</span>[<span class="st">'Year'</span>, series_name])</span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a>    df[series_name] <span class="op">=</span> df[series_name].astype(<span class="bu">float</span>)</span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a>    sector_data[series_name] <span class="op">=</span> df.set_index(<span class="st">'Year'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="626521c5-ca3b-4e37-a2ce-bd4a31a25546" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge job openings and unemployment data for each sector</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>sectors <span class="op">=</span> [<span class="st">"Tech"</span>, <span class="st">"Manufacturing"</span>, <span class="st">"Retail"</span>]</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>df_ratios <span class="op">=</span> pd.DataFrame()</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> sector <span class="kw">in</span> sectors:</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    job_openings_col <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>sector<span class="sc">}</span><span class="ss"> Job Openings"</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    unemployment_col <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>sector<span class="sc">}</span><span class="ss"> Unemployment"</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    df_merged <span class="op">=</span> pd.merge(sector_data[job_openings_col], sector_data[unemployment_col], left_index<span class="op">=</span><span class="va">True</span>, right_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    df_merged[<span class="ss">f"</span><span class="sc">{</span>sector<span class="sc">}</span><span class="ss"> Job Openings to Unemployment Ratio"</span>] <span class="op">=</span> df_merged[job_openings_col] <span class="op">/</span> df_merged[unemployment_col]</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> df_ratios.empty:</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>        df_ratios <span class="op">=</span> df_merged[[<span class="ss">f"</span><span class="sc">{</span>sector<span class="sc">}</span><span class="ss"> Job Openings to Unemployment Ratio"</span>]]</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>        df_ratios <span class="op">=</span> df_ratios.join(df_merged[[<span class="ss">f"</span><span class="sc">{</span>sector<span class="sc">}</span><span class="ss"> Job Openings to Unemployment Ratio"</span>]], how<span class="op">=</span><span class="st">'outer'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="015b6efe-6f54-4388-bb78-3878acf25260" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>df_job_to_unemp_ratios <span class="op">=</span> df_ratios.groupby(df_ratios.index)[[<span class="st">"Tech Job Openings to Unemployment Ratio"</span>, <span class="st">"Manufacturing Job Openings to Unemployment Ratio"</span>, <span class="st">"Retail Job Openings to Unemployment Ratio"</span>]].mean()</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>df_job_to_unemp_ratios.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Tech Job Openings to Unemployment Ratio</th>
<th data-quarto-table-cell-role="th">Manufacturing Job Openings to Unemployment Ratio</th>
<th data-quarto-table-cell-role="th">Retail Job Openings to Unemployment Ratio</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2004</th>
<td>0.780469</td>
<td>0.273507</td>
<td>0.349046</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2005</th>
<td>0.958135</td>
<td>0.363483</td>
<td>0.430798</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2006</th>
<td>1.167889</td>
<td>0.479952</td>
<td>0.483758</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2007</th>
<td>1.263115</td>
<td>0.479159</td>
<td>0.489625</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2008</th>
<td>0.815361</td>
<td>0.260251</td>
<td>0.345037</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="45edd917-4ec7-4e4f-a486-8b7636d6054e" class="cell" data-execution_count="18">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">8</span>))</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>plt.plot(df_job_to_unemp_ratios.index, df_job_to_unemp_ratios[<span class="st">"Tech Job Openings to Unemployment Ratio"</span>], marker<span class="op">=</span><span class="st">'o'</span>, label<span class="op">=</span><span class="st">"Tech Job Openings to Unemployment Ratio"</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>plt.plot(df_job_to_unemp_ratios.index, df_job_to_unemp_ratios[<span class="st">"Manufacturing Job Openings to Unemployment Ratio"</span>], marker<span class="op">=</span><span class="st">'o'</span>, label<span class="op">=</span><span class="st">"Manufacturing Job Openings to Unemployment Ratio"</span>)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>plt.plot(df_job_to_unemp_ratios.index, df_job_to_unemp_ratios[<span class="st">"Retail Job Openings to Unemployment Ratio"</span>], marker<span class="op">=</span><span class="st">'o'</span>, label<span class="op">=</span><span class="st">"Retail Job Openings to Unemployment Ratio"</span>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Job Openings to Unemployment Ratio by Sector (2004-2024)'</span>)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Ratio of Job Openings to Unemployment'</span>)</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-29-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The above chart illustrates the ratio of job openings to unemployment across three sectors: Tech, Manufacturing, and Retail, over the period from 2004 to 2024. The Tech sector consistently shows a higher ratio compared to Manufacturing and Retail, particularly after 2014, where it surpasses a ratio of 1.0, indicating more job openings than unemployed individuals in that sector. The ratio peaks around 2022 at approximately 3.0 before slightly declining in 2023. The Manufacturing sector shows a steady increase in the ratio from around 0.2 in 2009 to about 1.0 in 2022, indicating a tightening labor market. Retail also shows a similar trend, with the ratio increasing from around 0.2 in 2009 to about 1.0 in 2022. However, both Manufacturing and Retail sectors exhibit more fluctuation compared to the Tech sector, particularly noticeable during the 2020-2021 period, reflecting the impact of economic disruptions during that time.</p>
<p><strong>Reflections</strong></p>
<p>Although tech is creating more openings than official unemployment numbers, there are two caveats.</p>
<ul>
<li><p>Tech itself changes fast and anyone in tech needs constant re-skilling/up-skilling to cope up with the change.</p></li>
<li><p>The definition of “Unemplyment” is tricky. &gt; Unemployment rate The unemployment rate represents the number of unemployed people as a percentage of the labor force (the labor force is the sum of the employed and unemployed). The unemployment rate is calculated as: (Unemployed ÷ Labor Force) x 100.</p>
<blockquote class="blockquote">
<p>Not in the labor force: In the Current Population Survey, people are classified as not in the labor force if: <br></p>
</blockquote>
<ol type="1">
<li>they were not employed during the survey reference week and <br></li>
<li>they had not actively looked for work (or been on temporary layoff) in the last 4 weeks <br> In other words, people not in the labor force are those who do not meet the criteria to be classified as either employed or unemployed, as defined above. People not in the labor force are asked whether they want a job and if they were available to take a job during the survey reference week. They also are asked about their job search activity in the last 12 months (or since the end of their last job, if they held one in the last 12 months) and their reason for not having looked for work in the most recent 4 weeks.</li>
</ol></li>
</ul>
<p>The value of degrees in fields like business, computer science, and engineering has significantly diminished compared to 30 years ago. While these degrees once paved a reliable path to stable and lucrative careers, today’s landscape is far more competitive, with qualified professionals and offshore workers willing to work for less. As a result, merely obtaining a degree is no longer a guaranteed ticket to success; one must be exceptionally skilled, and this often needs to start before even pursuing the degree. For many, it may be more advantageous to take the risk of business ownership and work for themselves, where they have greater control over their income and career. From the perspective of a seasoned software engineer with over a decade of experience, including leadership roles, the field has become increasingly challenging and less rewarding. If given the chance to start over, they would prioritize gaining experience quickly through startups, learning the intricacies of business, and eventually pursuing entrepreneurship to have more control over their destiny and financial rewards. In essence, a degree alone is not enough anymore; individuals must take proactive control of their careers and explore alternative paths like entrepreneurship to secure their futures.</p>
<ul>
<li>Student Debt: Federal Reserve data shows that student debt in the U.S. has skyrocketed, surpassing $1.7 trillion in 2021. This growing debt burden makes it harder for graduates to achieve financial stability, let alone upward mobility.</li>
</ul>
</section>
</section>
</section>
<section id="jor" class="level2">
<h2 class="anchored" data-anchor-id="jor">JOR</h2>
<p>The Job Openings Rate (JOR) is defined as the number of job openings on the last business day of the month as a percentage of total employment plus job openings. Mathematically:</p>
<p>$<br>
= ( ) $</p>
<section id="key-components" class="level3">
<h3 class="anchored" data-anchor-id="key-components">Key Components:</h3>
<ol type="1">
<li><strong>Job Openings</strong>: The number of available positions employers are actively recruiting to fill.</li>
<li><strong>Total Employment</strong>: The total number of individuals currently employed in the workforce.</li>
<li><strong>Denominator</strong>: The sum of total employment and job openings represents the total labor market capacity.</li>
</ol>
</section>
<section id="purpose" class="level3">
<h3 class="anchored" data-anchor-id="purpose">Purpose:</h3>
<ul>
<li>The JOR serves as an indicator of labor demand and provides insights into economic health.</li>
<li>Higher rates may signal strong demand for workers, while lower rates can indicate reduced hiring activity.</li>
</ul>
<p>This definition is relevant to the plotted data in your script, where JOR trends are analyzed across various industry sectors.</p>
<div id="4c39d98b-1a00-491d-a38e-71a57e9d5ba5" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define your BLS API key (replace with your actual API key)</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>API_KEY <span class="op">=</span> <span class="st">"36aea4409aef4dd787a9ab7107c9d232"</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the series IDs for different industries (replace with actual series IDs for JOR)</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>series_ids <span class="op">=</span> {</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Construction"</span>: <span class="st">"JTU000000000000000JOR"</span>,</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Manufacturing"</span>: <span class="st">"JTU300000000000000JOR"</span>,</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Retail Trade"</span>: <span class="st">"JTU440000000000000JOR"</span>,</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Professional Services"</span>: <span class="st">"JTU600000000000000JOR"</span>,</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Leisure and Hospitality"</span>: <span class="st">"JTU700000000000000JOR"</span>,</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the API URL</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>BASE_URL <span class="op">=</span> <span class="st">"https://api.bls.gov/publicAPI/v2/timeseries/data/"</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch data from BLS API</span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fetch_bls_data(series_id):</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>    payload <span class="op">=</span> {</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">"seriesid"</span>: [series_id],</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">"startyear"</span>: <span class="st">"2000"</span>,</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">"endyear"</span>: <span class="st">"2024"</span>,</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"registrationkey"</span>: API_KEY,</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.post(BASE_URL, json<span class="op">=</span>payload)</span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> response.status_code <span class="op">==</span> <span class="dv">200</span>:</span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a>        data <span class="op">=</span> response.json()</span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> data[<span class="st">"Results"</span>][<span class="st">"series"</span>][<span class="dv">0</span>][<span class="st">"data"</span>]</span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Error fetching data for </span><span class="sc">{</span>series_id<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>response<span class="sc">.</span>status_code<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> []</span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Process the fetched data</span></span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_data(data):</span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a>    years <span class="op">=</span> []</span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a>    values <span class="op">=</span> []</span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> entry <span class="kw">in</span> data:</span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a>        years.append(<span class="bu">int</span>(entry[<span class="st">"year"</span>]))</span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a>        values.append(<span class="bu">float</span>(entry[<span class="st">"value"</span>]))</span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.Series(values, index<span class="op">=</span>years)</span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch and process data for all series</span></span>
<span id="cb35-46"><a href="#cb35-46" aria-hidden="true" tabindex="-1"></a>jor_data <span class="op">=</span> {}</span>
<span id="cb35-47"><a href="#cb35-47" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> sector, series_id <span class="kw">in</span> series_ids.items():</span>
<span id="cb35-48"><a href="#cb35-48" aria-hidden="true" tabindex="-1"></a>    raw_data <span class="op">=</span> fetch_bls_data(series_id)</span>
<span id="cb35-49"><a href="#cb35-49" aria-hidden="true" tabindex="-1"></a>    jor_data[sector] <span class="op">=</span> process_data(raw_data)</span>
<span id="cb35-50"><a href="#cb35-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-51"><a href="#cb35-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all data into a single DataFrame</span></span>
<span id="cb35-52"><a href="#cb35-52" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(jor_data)</span>
<span id="cb35-53"><a href="#cb35-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-54"><a href="#cb35-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb35-55"><a href="#cb35-55" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb35-56"><a href="#cb35-56" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> column <span class="kw">in</span> df.columns:</span>
<span id="cb35-57"><a href="#cb35-57" aria-hidden="true" tabindex="-1"></a>    plt.plot(df.index, df[column], marker<span class="op">=</span><span class="st">"o"</span>, label<span class="op">=</span>column)</span>
<span id="cb35-58"><a href="#cb35-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-59"><a href="#cb35-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Add chart details</span></span>
<span id="cb35-60"><a href="#cb35-60" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Job Openings Rate (JOR) by Industry Sector (US)"</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb35-61"><a href="#cb35-61" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Year"</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb35-62"><a href="#cb35-62" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Job Openings Rate (%)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb35-63"><a href="#cb35-63" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">"Industry Sector"</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb35-64"><a href="#cb35-64" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb35-65"><a href="#cb35-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-66"><a href="#cb35-66" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the plot</span></span>
<span id="cb35-67"><a href="#cb35-67" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb35-68"><a href="#cb35-68" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-30-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="b.-social-status-and-mobility" class="level2">
<h2 class="anchored" data-anchor-id="b.-social-status-and-mobility">1b. Social Status and Mobility</h2>
<section id="labor-market-saturation-and-reduced-returns-on-education" class="level4">
<h4 class="anchored" data-anchor-id="labor-market-saturation-and-reduced-returns-on-education">Labor Market Saturation and Reduced Returns on Education:</h4>
<p>The saturation of the labor market with degree holders has diminished the economic returns of education for many individuals. With more people obtaining degrees, the competition for top-tier jobs has intensified, leading to a situation where a degree alone is no longer sufficient to guarantee upward mobility. This has led to a “credential inflation,” where higher qualifications are needed to stand out, further pushing individuals towards costly graduate education, such as MBAs, which again are becoming increasingly expensive due to M2 inflation.</p>
<p>Strategies to validate:</p>
<ul>
<li>Use LinkedIn data scraping for Application-to-job ratio</li>
<li>% of MBA degrees confered over years (National Center for Education Statistics (NCES) data)</li>
</ul>
</section>
<section id="rise-of-elite-education-as-a-gateway" class="level3">
<h3 class="anchored" data-anchor-id="rise-of-elite-education-as-a-gateway">Rise of Elite Education as a Gateway</h3>
<ul>
<li><p><strong>Business Leadership</strong>: Frank and Cook discuss how elite business schools (e.g., Harvard Business School, Stanford Graduate School of Business) dominate the pathways to top executive positions in Fortune 500 companies. The networks and brand recognition of these institutions give their graduates a significant edge in the competition for leadership roles.</p></li>
<li><p><strong>Legal Profession</strong>: The book highlights how top law firms overwhelmingly recruit from a handful of elite law schools (e.g., Harvard, Yale, Stanford). Graduates from these schools have a much higher chance of securing high-paying positions, regardless of their actual performance in law school compared to graduates from less prestigious institutions.</p></li>
<li><p>Educational background plays a crucial role in determining career trajectories. Those from elite schools continue to dominate leadership positions, whereas those from non-elite schools find it harder to break into these roles, even if they start at the same level.</p></li>
<li><p>Quantitative Data: The study provides data indicating that over the last few decades, the proportion of executives coming from elite schools has increased, while the proportion from non-elite schools has decreased.</p></li>
<li><p>Reference: Frank, R. H., &amp; Cook, P. J. (1995). The Winner-Take-All Society. This book discusses how certain elite institutions have monopolized access to top jobs.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/b8f955d7-bf03-415c-ad58-4f8af1cd1821-1-1a99e7cc-6208-49ae-af98-846708f4a1c4.png" class="img-fluid figure-img"></p>
<figcaption>image.png</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/9614dea3-7baa-44c4-9960-8a5dd7d611e4-1-a3ec610a-fbaa-4fb7-92f6-4512192fe2c0.png" class="img-fluid figure-img"></p>
<figcaption>image.png</figcaption>
</figure>
</div>
<p>Reference: - Diversity, Hierarchy, and Fit in Legal Careers: Insights from Fifteen Years of Qualitative Interviews https://www.law.georgetown.edu/legal-ethics-journal/wp-content/uploads/sites/24/2019/01/GT-GJLE180004.pdf</p>
</section>
<section id="data-on-educational-attainment-and-professional-success" class="level3">
<h3 class="anchored" data-anchor-id="data-on-educational-attainment-and-professional-success">Data on Educational Attainment and Professional Success</h3>
<p>To create a chart showing the proportion of executives from elite versus non-elite schools from 1980 to 2020, data from various studies indicate the following trends:</p>
<p>1980s: In the early 1980s, around 50% of executives in top U.S. firms had graduated from elite schools, with this figure remaining fairly stable through the decade. Elite schools are often defined as Ivy League institutions and other top-tier universities like Stanford and MIT​( Oxford Academic ).</p>
<p>1990s: The 1990s saw a slight increase in the proportion of executives from elite schools, reaching around 55%. This was driven by the increasing value placed on prestigious MBA programs from elite institutions as a key qualification for senior management roles​( Oxford Academic ).</p>
<p>2000s: During the 2000s, the proportion of executives from elite schools continued to rise, peaking at around 60-65% by the late 2000s. This trend was supported by the globalization of business and the preference for executives with international educational experiences, often obtained at elite institutions​( SpringerLink ).</p>
<p>2010-2020: The proportion of executives from elite schools has stabilized, fluctuating between 60-70%. This period also saw an increase in the importance of non-traditional elite schools, particularly for tech and innovative companies, where elite institutions like Stanford and MIT played a major role​( SpringerLink , Oxford Academic ).</p>
<p>Ref - Steven Brint, Sarah R K Yoshikawa, The Educational Backgrounds of American Business and Government Leaders: Inter-Industry Variation in Recruitment from Elite Colleges and Graduate Programs, Social Forces, Volume 96, Issue 2, December 2017, Pages 561–590, https://doi.org/10.1093/sf/sox059 https://academic.oup.com/sf/article-abstract/96/2/561/4622952?login=false - https://link.springer.com/chapter/10.1007/978-3-319-59966-3_5</p>
<p><strong>Educational Backgrounds of American Business and Government Leaders</strong></p>
<p>Steven Brint, Sarah R K Yoshikawa, The Educational Backgrounds of American Business and Government Leaders: Inter-Industry Variation in Recruitment from Elite Colleges and Graduate Programs, Social Forces, Volume 96, Issue 2, December 2017, Pages 561–590, https://doi.org/10.1093/sf/sox059</p>
<div id="656bb1a5-72b4-481a-a3c0-cec7b130c649" class="cell" data-execution_count="89">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Data from the table</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>groups <span class="op">=</span> [</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"A. Symbol production/Knowledge sector"</span>, <span class="st">"A. Symbol production/Knowledge sector"</span>, </span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"A. Symbol production/Knowledge sector"</span>, <span class="st">"A. Symbol production/Knowledge sector"</span>, </span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"A. Symbol production/Knowledge sector"</span>,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"B. Material production/Knowledge sector"</span>, <span class="st">"B. Material production/Knowledge sector"</span>, </span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"B. Material production/Knowledge sector"</span>, <span class="st">"B. Material production/Knowledge sector"</span>, </span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"B. Material production/Knowledge sector"</span>,</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"C. Material production/Outside knowledge sector"</span>, <span class="st">"C. Material production/Outside knowledge sector"</span>, </span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"C. Material production/Outside knowledge sector"</span>, <span class="st">"C. Material production/Outside knowledge sector"</span>, </span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"C. Material production/Outside knowledge sector"</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>industries <span class="op">=</span> [</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Internet services"</span>, <span class="st">"Entertainment/Media"</span>, <span class="st">"Finance"</span>, <span class="st">"Computer Software"</span>, <span class="st">"Government"</span>,</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Pharmaceuticals"</span>, <span class="st">"Telecommunications"</span>, <span class="st">"Aerospace/Security"</span>, <span class="st">"Health care"</span>, <span class="st">"Energy"</span>,</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Apparel"</span>, <span class="st">"Chemicals"</span>, <span class="st">"Construction"</span>, <span class="st">"Food products"</span>, <span class="st">"Motor vehicles"</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Steven Brint, Sarah R K Yoshikawa, The Educational Backgrounds of American Business and Government Leaders: Inter-Industry Variation in Recruitment from Elite Colleges and Graduate Programs, Social Forces, Volume 96, Issue 2, December 2017, Pages 561–590, https://doi.org/10.1093/sf/sox059 https://academic.oup.com/sf/article-abstract/96/2/561/4622952?login=false</span></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>bachelors_degrees <span class="op">=</span> [<span class="dv">32</span>, <span class="dv">28</span>, <span class="dv">28</span>, <span class="dv">22</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">18</span>, <span class="dv">15</span>, <span class="dv">14</span>, <span class="dv">14</span>, <span class="dv">20</span>, <span class="dv">13</span>, <span class="dv">12</span>, <span class="dv">9</span>, <span class="dv">8</span>]</span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>business_degrees <span class="op">=</span> [<span class="dv">73</span>, <span class="dv">59</span>, <span class="dv">57</span>, <span class="dv">49</span>, <span class="dv">34</span>, <span class="dv">48</span>, <span class="dv">31</span>, <span class="dv">32</span>, <span class="dv">39</span>, <span class="dv">35</span>, <span class="dv">52</span>, <span class="dv">50</span>, <span class="dv">39</span>, <span class="dv">45</span>, <span class="dv">32</span>]</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>law_degrees <span class="op">=</span> [<span class="dv">79</span>, <span class="dv">56</span>, <span class="dv">53</span>, <span class="dv">48</span>, <span class="dv">31</span>, <span class="dv">48</span>, <span class="dv">45</span>, <span class="dv">32</span>, <span class="dv">41</span>, <span class="dv">31</span>, <span class="dv">33</span>, <span class="dv">36</span>, <span class="dv">38</span>, <span class="dv">25</span>, <span class="dv">12</span>]</span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a more soothing color palette</span></span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a>bachelors_color <span class="op">=</span> <span class="st">"#a1c3d1"</span>  <span class="co"># Light teal</span></span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a>business_color <span class="op">=</span> <span class="st">"#70a4d3"</span>   <span class="co"># Medium teal</span></span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a>law_color <span class="op">=</span> <span class="st">"#4678c9"</span>        <span class="co"># Dark teal</span></span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-34"><a href="#cb36-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the trends</span></span>
<span id="cb36-35"><a href="#cb36-35" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.arange(<span class="bu">len</span>(industries))  <span class="co"># the label locations</span></span>
<span id="cb36-36"><a href="#cb36-36" aria-hidden="true" tabindex="-1"></a>width <span class="op">=</span> <span class="fl">0.25</span>  <span class="co"># the width of the bars</span></span>
<span id="cb36-37"><a href="#cb36-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-38"><a href="#cb36-38" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">8</span>))</span>
<span id="cb36-39"><a href="#cb36-39" aria-hidden="true" tabindex="-1"></a>rects1 <span class="op">=</span> ax.bar(x <span class="op">-</span> width, bachelors_degrees, width, label<span class="op">=</span><span class="st">"Bachelor's Degrees"</span>, color<span class="op">=</span>bachelors_color)</span>
<span id="cb36-40"><a href="#cb36-40" aria-hidden="true" tabindex="-1"></a>rects2 <span class="op">=</span> ax.bar(x, business_degrees, width, label<span class="op">=</span><span class="st">'Business Degrees'</span>, color<span class="op">=</span>business_color)</span>
<span id="cb36-41"><a href="#cb36-41" aria-hidden="true" tabindex="-1"></a>rects3 <span class="op">=</span> ax.bar(x <span class="op">+</span> width, law_degrees, width, label<span class="op">=</span><span class="st">'Law Degrees'</span>, color<span class="op">=</span>law_color)</span>
<span id="cb36-42"><a href="#cb36-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-43"><a href="#cb36-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Add vertical lines to visually segregate the industry groups</span></span>
<span id="cb36-44"><a href="#cb36-44" aria-hidden="true" tabindex="-1"></a>ax.axvline(x<span class="op">=</span><span class="fl">4.5</span>, color<span class="op">=</span><span class="st">'black'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, lw<span class="op">=</span><span class="dv">1</span>)  <span class="co"># End of Symbol production/Knowledge sector</span></span>
<span id="cb36-45"><a href="#cb36-45" aria-hidden="true" tabindex="-1"></a>ax.axvline(x<span class="op">=</span><span class="fl">9.5</span>, color<span class="op">=</span><span class="st">'black'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, lw<span class="op">=</span><span class="dv">1</span>)  <span class="co"># End of Material production/Knowledge sector</span></span>
<span id="cb36-46"><a href="#cb36-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-47"><a href="#cb36-47" aria-hidden="true" tabindex="-1"></a>ax.text(<span class="fl">2.5</span>, <span class="dv">85</span>, <span class="st">'Symbol production/</span><span class="ch">\n</span><span class="st">Knowledge sector'</span>, ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'bottom'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb36-48"><a href="#cb36-48" aria-hidden="true" tabindex="-1"></a>ax.text(<span class="fl">7.5</span>, <span class="dv">85</span>, <span class="st">'Material production/</span><span class="ch">\n</span><span class="st">Knowledge sector'</span>, ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'bottom'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb36-49"><a href="#cb36-49" aria-hidden="true" tabindex="-1"></a>ax.text(<span class="fl">12.5</span>, <span class="dv">85</span>, <span class="st">'Material production/</span><span class="ch">\n</span><span class="st">Outside knowledge sector'</span>, ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'bottom'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb36-50"><a href="#cb36-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-51"><a href="#cb36-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Add some text for labels, title and custom x-axis tick labels, etc.</span></span>
<span id="cb36-52"><a href="#cb36-52" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Industries'</span>)</span>
<span id="cb36-53"><a href="#cb36-53" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Percentage of Executives (%)'</span>)</span>
<span id="cb36-54"><a href="#cb36-54" aria-hidden="true" tabindex="-1"></a><span class="co">#ax.set_title('Percentage of Executives with Elite Degrees by Industry Group')</span></span>
<span id="cb36-55"><a href="#cb36-55" aria-hidden="true" tabindex="-1"></a>ax.set_xticks(x)</span>
<span id="cb36-56"><a href="#cb36-56" aria-hidden="true" tabindex="-1"></a>ax.set_xticklabels(industries, rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">"right"</span>)</span>
<span id="cb36-57"><a href="#cb36-57" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb36-58"><a href="#cb36-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-59"><a href="#cb36-59" aria-hidden="true" tabindex="-1"></a>fig.tight_layout()</span>
<span id="cb36-60"><a href="#cb36-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-61"><a href="#cb36-61" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-31-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>https://x.com/cremieuxrecueil/status/1831463564575699266/photo/1</p>
<p><img src="Education and QoL-Satisfaction_files/figure-html/c7b56710-ae26-44ca-9032-e4a6c9593b7b-1-c53f7dd3-437c-4590-9614-e4856344e293.png" class="img-fluid" alt="image.png">!</p>
<p>The chart illustrates the educational backgrounds of extraordinary American achievers across various categories. For example, Harvard University alumni account for approximately 50% of American Philosophical Society members and 35% of Forbes’ most powerful men. Graduate School graduates make up the majority in categories like National Academy of Medicine (over 70%) and Nobel Prize winners (about 60%). On the other hand, Ivy League graduates represent significant shares in categories like Pulitzer Prize winners (40%) and Four-Star Generals (20%). Some categories show missing educational information, such as Senators (around 10%).</p>
<p>In the last generation or two, the funnel of opportunity in American society has drastically narrowed, with a greater and greater proportion of our financial, media, business, and political elites being drawn from a relatively small number of our leading universities, together with their professional schools. <strong>The rise of a Henry Ford, from farm boy mechanic to world business tycoon</strong>, seems virtually impossible today, as even America’s most successful college dropouts such as Bill Gates and Mark Zuckerberg often turn out to be extremely well-connected former Harvard students. Indeed, the early success of Facebook was largely due to the powerful imprimatur it enjoyed from its exclusive availability first only at Harvard and later restricted to just the Ivy League</p>
<p>Let’s explore what are demographical and academic attributes of groups attaining eite education</p>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Children from families in the top 1% are more than twice as likely to attend an Ivy-Plus college (Ivy League, Stanford, MIT, Duke, and Chicago) as those from middle-class families with comparable SAT/ACT scores. Two-thirds of this gap is due to higher admissions rates for students with comparable test scores from high-income families</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>The highincome admissions advantage at private colleges is driven by three factors: - (1) preferences for children of alumni (legacies) - (2) weight placed on non-academic credentials, which tend to be stronger for students applying from private high schools (feeder) that have affluent student bodies, - (3) recruitment of athletes, who tend to come from higher-income families.</p>
</blockquote>
</blockquote>
<p><strong>References</strong></p>
<ul>
<li>Chetty, R., Deming, D., &amp; Friedman, J. (2023). Diversifying Society’s Leaders? The Determinants and Causal Effects of Admission to Highly Selective Private Colleges. National Bureau of Economic Research. https://doi.org/10.3386/w31492</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/8ba0bcc5-24ba-4a5c-ba12-5210f6035ec9-1-2db2d3b1-a403-49ce-8e28-c2a8fcf2a276.png" class="img-fluid figure-img"></p>
<figcaption>image.png</figcaption>
</figure>
</div>
<ul>
<li><p><strong>Development cases</strong>, where donations influence admissions, are common among Ivy Plus schools. For example, Jared Kushner’s father donated $2.5 million to Harvard before his son’s acceptance. Schools like USC also heavily weigh such cases. Political and celebrity connections—like children of U.S. Senators or famous actors—often sway admissions. This practice highlights how wealth and influence can shape access to top-tier education.</p></li>
<li><p>The push for <strong>legacy admissions</strong> persists, even as it faces criticism. Legacy students, those with family ties to alumni, receive special consideration, despite calls to end the practice. Ivy League schools, and some state flagships like Michigan and UVA, continue to favor legacies. For instance, Johns Hopkins recently ended legacy admissions, aiming for more socio-economic diversity, but this may impact future alumni donations.</p></li>
<li><p><strong>Athletics</strong> also play a crucial role in admissions at elite schools. Ivies admit a notable number of student-athletes (up to 10% of their student bodies). Brown, with 910 athletes, parallels Michigan despite a smaller overall student body. Schools like Stanford and Duke also recruit heavily for sports like sailing and lacrosse, reinforcing the socioeconomic skew in admissions, with wealthier, predominantly white students disproportionately represented.</p></li>
</ul>
<section id="unfair-advantage" class="level4">
<h4 class="anchored" data-anchor-id="unfair-advantage">Unfair Advantage</h4>
<p>Many universities offer tuition remission to employees’ children, with some covering up to 100% of tuition if the student attends the parent’s institution, but only 50-75% if they attend another school. This incentivizes universities to admit employees’ children, minimizing financial loss. Employees’ families, particularly those in academic households, often have greater cultural and academic capital, giving them an admissions advantage. Children of professors or staff, exposed to academic environments and cultural resources, may appear more competitive than wealthier, first-generation applicants, who lack such insider knowledge.</p>
<div id="ee74904e-7e4c-4e8b-bed8-4ea87111d93f" class="cell" data-execution_count="77">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Data for plotting</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>years <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1980</span>, <span class="dv">2021</span>, <span class="dv">5</span>))</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>elite_schools <span class="op">=</span> [<span class="dv">50</span>, <span class="dv">55</span>, <span class="dv">60</span>, <span class="dv">65</span>, <span class="dv">70</span>, <span class="dv">65</span>, <span class="dv">67</span>, <span class="dv">69</span>, <span class="dv">70</span>]</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>non_elite_schools <span class="op">=</span> [<span class="dv">100</span> <span class="op">-</span> x <span class="cf">for</span> x <span class="kw">in</span> elite_schools]</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>plt.plot(years, elite_schools, marker<span class="op">=</span><span class="st">'o'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, color<span class="op">=</span><span class="st">'blue'</span>, label<span class="op">=</span><span class="st">'Elite Schools'</span>)</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>plt.plot(years, non_elite_schools, marker<span class="op">=</span><span class="st">'o'</span>, linestyle<span class="op">=</span><span class="st">'-'</span>, color<span class="op">=</span><span class="st">'orange'</span>, label<span class="op">=</span><span class="st">'Non-Elite Schools'</span>)</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding titles and labels</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Proportion (appx.) of Executives from Elite vs. Non-Elite Schools (1980-2020)'</span>)</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Proportion of Executives (%)'</span>)</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="dv">100</span>)</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>plt.xticks(years)</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding a legend</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-32-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="the-winner-take-all-society" class="level3">
<h3 class="anchored" data-anchor-id="the-winner-take-all-society">The Winner-Take-All Society</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/5a5ae4f9-d8af-4272-b4fd-ada2508ff18d-1-fcbcade7-8372-4f61-8178-4baba479fbef.png" class="img-fluid figure-img"></p>
<figcaption>image.png</figcaption>
</figure>
</div>
<ul>
<li><p>How certain elite institutions have monopolized access to top jobs.</p>
<p>Frank, R. H., &amp; Cook, P. J. (1995). The Winner-Take-All Society</p></li>
<li><p><strong>Concentration of Rewards in Elite Institutions</strong>: Argument: Frank and Cook argue that in many fields, the rewards (jobs, salaries, opportunities) are increasingly concentrated among those who graduate from elite institutions. These institutions, such as Ivy League universities in the U.S., have become gatekeepers to the most lucrative and prestigious careers. Example: The authors discuss how a small number of elite schools produce a disproportionately high number of individuals in top positions across various industries, from law and finance to academia and government.</p></li>
</ul>
<p>https://academic.oup.com/qje/article/137/2/845/6449025</p>
<ul>
<li><p><strong>Winner-Take-All Markets</strong>: Concept: The book introduces the concept of “winner-take-all markets,” where small differences in talent or credentials can lead to vastly different outcomes in terms of success and earnings. In these markets, those at the very top capture the majority of rewards, while the rest receive significantly less. Data: The book cites examples such as the concentration of top lawyers from a handful of law schools or CEOs who predominantly come from elite business schools. This concentration means that individuals from non-elite institutions find it increasingly difficult to compete for top-tier positions.</p></li>
<li><p><strong>Impact on Social Mobility</strong>: Argument: The monopolization of access to top jobs by elite institutions exacerbates inequality and reduces social mobility. As these institutions become more selective and expensive, only individuals from affluent backgrounds can afford the education and connections needed to access these opportunities. Data: The book discusses how the children of affluent families are more likely to attend elite institutions, perpetuating a cycle of privilege. In contrast, those from less privileged backgrounds face significant barriers to entry, even if they have similar levels of talent or ambition.</p></li>
</ul>
<p><strong>Pedigree: How Elite Students Get Elite Jobs” by Lauren A. Rivera</strong></p>
<blockquote class="blockquote">
<p>Every year, elite firms designate lists of schools with which they have established relationships, and where they intend to post job openings, accept applications, and interview students. These lists have two tiers. <strong>Core schools</strong> are the three to five highly elite institutions from which firms draw the bulk of their new hires. Firms invest deeply at these campuses, flying current employees from across the country—if not the globe—to host information sessions, cocktail receptions, and dinners, prepare candidates for interviews, and interview scores or even hundreds of candidates every year. <strong>Target schools</strong>, by contrast, include five to fifteen additional institutions where firms intend to accept applications and interview candidates, but on a much smaller scale.14 Firms typically set quotas for each school, with cores receiving far more interview and final offer slots than targets.</p>
</blockquote>
<p>…</p>
<blockquote class="blockquote">
<p>Firms commonly made their school selections based on general perceptions of these institutions’ <strong><em>prestige</em></strong>. When asked how her law firm created its list, Kayla, a recruitment director, summarized the strategy this way:</p>
</blockquote>
<blockquote class="blockquote">
<p><em>It’s totally anecdotal. (She laughs.) I think it’s based upon—and it probably lags in terms of time and updating—but it’s based upon a kind of understanding of how selective the school was in terms of admitting students and how challenging is the work. So it’s largely just kind of school reputation and conventional wisdom, for better or worse.</em></p>
</blockquote>
<blockquote class="blockquote">
<p>This kind of anecdotal information was derived from the perceptions of partners and other decision makers (who, disproportionately, were themselves graduates of prestigious schools). In addition, firms used the reports of external rankings organizations, such as U.S. News &amp; World Report and the Law School Admissions Council. However, they typi- cally consulted outside sources only when setting the lower bounds of their lists. Consequently, in contrast to the volatility of national edu- cational rankings, firms’ lists remained quite stable from year to year</p>
</blockquote>
<p>…</p>
<blockquote class="blockquote">
<p>Although stable notions of <strong><em>prestige</em></strong> were the most common basis for designating schools as cores or targets, new or less prestigious schools could be put on the list if the firm had high-ranking employees who were graduates and pushed the firm to recruit from their alma mater. Michael, a banker, told me, “If a senior person has a particular inter- est in going to a particular school, we’ll generally go.” Another banker, Nicholae, described why his alma mater—a well-regarded but not top- ten liberal arts college—was included on his bank’s list of targets. “We started recruiting at [my school] because the CEO’s daughter was in my class there, and now two chairmen’s kids are there. [It’s] a good school, but it’s definitely those types of connections that make us recruit there.” A consultant named Ella provided a similar illustration:</p>
</blockquote>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>UVA [the University of Virginia] is actually a big target school of ours. . . . It started because there was a partner who was an alum and who just pushed it hard and so we ended up with actually having quite a big recruiting team associated with that school. Which maybe normally we wouldn’t, given [our firm’s] location and their ranking and what not.</p>
</blockquote>
</blockquote>
<blockquote class="blockquote">
<p>Such schools tended to stay on the list as long as the employee who initially pushed for the campus remained at the firm and continued to press for recruitment. Due to organizational inertia, some remained on the list after that employee’s departure.</p>
</blockquote>
</section>
</section>
<section id="high-competitive-stress-1" class="level2">
<h2 class="anchored" data-anchor-id="high-competitive-stress-1">High Competitive Stress:</h2>
<p>Mental Health Impacts: As the demand for higher education has increased, so has the competition, leading to significant stress among students. The pressure to perform well academically to secure top-tier jobs has contributed to a rise in mental health issues, including anxiety and depression. This competitive stress can negate some of the QoL improvements associated with higher education​ (World Bank).</p>
<p>Work-Life Imbalance: The need to excel in education often leads to work-life imbalances, where students and young professionals may sacrifice leisure and family time for academic or career success, potentially reducing overall life satisfaction.</p>
<section id="admission-to-ivy-league-and-other-selective-universities." class="level3">
<h3 class="anchored" data-anchor-id="admission-to-ivy-league-and-other-selective-universities.">Admission to Ivy League and Other Selective Universities.</h3>
<p>Data Sources:</p>
<ul>
<li>https://web.archive.org/web/20150222074515/http://www.hernandezcollegeconsulting.com/ivy-league-admission-statistics-2008/</li>
<li>https://web.archive.org/web/20150222070007/http://www.hernandezcollegeconsulting.com/ivy-league-admission-statistics-2009/</li>
<li>https://web.archive.org/web/20150222074602/http://www.hernandezcollegeconsulting.com/ivy-league-admission-statistics-2010/</li>
<li>https://web.archive.org/web/20150222074712/http://www.hernandezcollegeconsulting.com/ivy-league-admission-statistics-2011/</li>
<li>https://web.archive.org/web/20150222071302/http://www.hernandezcollegeconsulting.com/ivy-league-admission-statistics-2012/</li>
<li>https://web.archive.org/web/20150222074526/http://www.hernandezcollegeconsulting.com/ivy-league-admission-statistics-2013/</li>
<li>https://web.archive.org/web/20150222074708/http://www.hernandezcollegeconsulting.com/ivy-league-admissions-statistics-2014/</li>
<li>https://web.archive.org/web/20150222071001/http://www.hernandezcollegeconsulting.com/ivy-league-admissions-statistics-overall-2014/</li>
<li>https://web.archive.org/web/20150222074653/http://www.hernandezcollegeconsulting.com/ivy-league-admission-statistics-overall-2015/</li>
<li>https://web.archive.org/web/20150222074618/http://www.hernandezcollegeconsulting.com/ivy-league-admissions-statistics-overall-2016/</li>
<li>https://web.archive.org/web/20150222074639/http://www.hernandezcollegeconsulting.com/ivy-league-admission-statistics-2017/</li>
<li>https://web.archive.org/web/20150222004000/http://www.hernandezcollegeconsulting.com/ivy-league-admission-statistics-overall-2018/</li>
<li>https://web.archive.org/web/20150222074612/http://www.hernandezcollegeconsulting.com/ivy-league-admission-statistics-class-2019/</li>
</ul>
<div id="4b58a4c4-7543-4c89-8bc5-1a627ab91a7b" class="cell" data-execution_count="79">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Data for Ivy League Admission Statistics (2008 - 2019)</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Year'</span>: [<span class="dv">2008</span>, <span class="dv">2009</span>, <span class="dv">2010</span>, <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2013</span>, <span class="dv">2014</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>],</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Harvard_Admission_Rate'</span>: [<span class="fl">10.3</span>, <span class="fl">9.22</span>, <span class="fl">9.33</span>, <span class="fl">8.97</span>, <span class="fl">7.09</span>, <span class="fl">7.32</span>, <span class="fl">5.90</span>, <span class="fl">6.17</span>, <span class="fl">5.92</span>, <span class="fl">5.79</span>, <span class="fl">5.90</span>, <span class="fl">16.51</span>],</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Yale_Admission_Rate'</span>: [<span class="fl">9.9</span>, <span class="fl">9.67</span>, <span class="fl">8.90</span>, <span class="fl">9.63</span>, <span class="fl">8.29</span>, <span class="fl">7.50</span>, <span class="fl">6.59</span>, <span class="fl">7.35</span>, <span class="fl">6.82</span>, <span class="fl">6.72</span>, <span class="fl">6.26</span>, <span class="fl">16.05</span>],</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Princeton_Admission_Rate'</span>: [<span class="fl">11.9</span>, <span class="fl">10.94</span>, <span class="fl">10.19</span>, <span class="fl">9.46</span>, <span class="fl">9.25</span>, <span class="fl">9.93</span>, <span class="fl">7.29</span>, <span class="fl">8.39</span>, <span class="fl">7.86</span>, <span class="fl">7.29</span>, <span class="fl">7.28</span>, <span class="fl">19.92</span>],</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Dartmouth_Admission_Rate'</span>: [<span class="fl">18.3</span>, <span class="fl">17.02</span>, <span class="fl">15.68</span>, <span class="fl">15.28</span>, <span class="fl">13.24</span>, <span class="fl">12.05</span>, <span class="fl">9.92</span>, <span class="fl">9.73</span>, <span class="fl">9.43</span>, <span class="fl">10.05</span>, <span class="fl">11.50</span>, <span class="fl">25.98</span>],</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Brown_Admission_Rate'</span>: [<span class="fl">15.8</span>, <span class="fl">15.12</span>, <span class="fl">13.82</span>, <span class="fl">14.05</span>, <span class="fl">13.29</span>, <span class="fl">10.84</span>, <span class="fl">8.84</span>, <span class="fl">8.70</span>, <span class="fl">9.60</span>, <span class="fl">9.16</span>, <span class="fl">8.61</span>, <span class="fl">20.46</span>],</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Penn_Admission_Rate'</span>: [<span class="dv">21</span>, <span class="fl">20.80</span>, <span class="fl">17.66</span>, <span class="fl">16.06</span>, <span class="fl">16.44</span>, <span class="fl">17.11</span>, <span class="fl">11.97</span>, <span class="fl">12.26</span>, <span class="fl">12.32</span>, <span class="fl">12.10</span>, <span class="fl">9.90</span>, <span class="fl">23.98</span>],</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Columbia_Admission_Rate'</span>: [<span class="fl">12.76</span>, <span class="fl">12.76</span>, <span class="fl">11.57</span>, <span class="fl">10.57</span>, <span class="fl">10.05</span>, <span class="fl">9.82</span>, <span class="fl">6.89</span>, <span class="fl">6.93</span>, <span class="fl">7.42</span>, <span class="fl">6.89</span>, <span class="fl">6.95</span>, <span class="fl">17.79</span>],</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Cornell_Admission_Rate'</span>: [<span class="fl">28.7</span>, <span class="fl">27.08</span>, <span class="fl">24.68</span>, <span class="fl">21.40</span>, <span class="fl">20.40</span>, <span class="fl">19.10</span>, <span class="fl">15.04</span>, <span class="fl">17.95</span>, <span class="fl">16.19</span>, <span class="fl">15.15</span>, <span class="fl">13.98</span>, <span class="fl">25.00</span>],</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to DataFrame</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the trends for each university</span></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">8</span>))</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>universities <span class="op">=</span> [<span class="st">'Harvard'</span>, <span class="st">'Yale'</span>, <span class="st">'Princeton'</span>, <span class="st">'Dartmouth'</span>, <span class="st">'Brown'</span>, <span class="st">'Penn'</span>, <span class="st">'Columbia'</span>, <span class="st">'Cornell'</span>]</span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> uni <span class="kw">in</span> universities:</span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>    plt.plot(df[<span class="st">'Year'</span>], df[<span class="ss">f'</span><span class="sc">{</span>uni<span class="sc">}</span><span class="ss">_Admission_Rate'</span>], label<span class="op">=</span>uni)</span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Ivy League Admission Rates (2008 - 2019)'</span>)</span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Admission Rate (%)'</span>)</span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate and plot the aggregate Ivy League admission rate (average of all universities)</span></span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Average_Ivy_Admission_Rate'</span>] <span class="op">=</span> df[[<span class="ss">f'</span><span class="sc">{</span>uni<span class="sc">}</span><span class="ss">_Admission_Rate'</span> <span class="cf">for</span> uni <span class="kw">in</span> universities]].mean(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"></a>plt.plot(df[<span class="st">'Year'</span>], df[<span class="st">'Average_Ivy_Admission_Rate'</span>], label<span class="op">=</span><span class="st">'Average Ivy League'</span>, color<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb38-39"><a href="#cb38-39" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average Ivy League Admission Rate (2008 - 2019)'</span>)</span>
<span id="cb38-40"><a href="#cb38-40" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb38-41"><a href="#cb38-41" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Admission Rate (%)'</span>)</span>
<span id="cb38-42"><a href="#cb38-42" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb38-43"><a href="#cb38-43" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb38-44"><a href="#cb38-44" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-33-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-33-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Most every Ivy has an undergraduate admissions rate of under 10%. And every single one has a downward trend on admit percentages, meaning it’s harder to get into every Ivy than it was 5, 10, 15, 20, or 25 years ago.</p>
<p>From 2008 to 2019, the average admission rate fell from about 16% to just under 10%, with a sharp increase to over 20% in 2019, possibly due to external factors such as policy changes or exceptional circumstances (#COVID19 ?).</p>
<p>Each school within the Ivy League has its own trajectory. For instance, Harvard’s acceptance rate dropped from over 10% to around 5%, while Cornell showed more fluctuation, decreasing from 20% to below 15%.</p>
<p>Ivy League universities have consistently maintained small class sizes, yet the <strong>number of applicants continues to surge each year</strong>. This growing pool of applicants pushes down acceptance rates, which improves their standing in rankings like US News.</p>
</section>
<section id="why-did-number-of-applicants-continues-to-surge-each-year" class="level3">
<h3 class="anchored" data-anchor-id="why-did-number-of-applicants-continues-to-surge-each-year">Why did number of applicants continues to surge each year ?</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/559606fb-8415-4c54-aa71-1f55788b18b6-1-77ca2bb0-70f5-4656-8852-c441e9f04b50.png" class="img-fluid figure-img"></p>
<figcaption>image.png</figcaption>
</figure>
</div>
<p>The chart illustrates the educational backgrounds of extraordinary American achievers across various categories. For example, Harvard University alumni account for approximately 50% of American Philosophical Society members and 35% of Forbes’ most powerful men. Graduate School graduates make up the majority in categories like National Academy of Medicine (over 70%) and Nobel Prize winners (about 60%). On the other hand, Ivy League graduates represent significant shares in categories like Pulitzer Prize winners (40%) and Four-Star Generals (20%). Some categories show missing educational information, such as Senators (around 10%).</p>
<p>In the last generation or two, the funnel of opportunity in American society has drastically narrowed, with a greater and greater proportion of our financial, media, business, and political elites being drawn from a relatively small number of our leading universities, together with their professional schools. <strong>The rise of a Henry Ford, from farm boy mechanic to world business tycoon</strong>, seems virtually impossible today, as even America’s most successful college dropouts such as Bill Gates and Mark Zuckerberg often turn out to be extremely well-connected former Harvard students. Indeed, the early success of Facebook was largely due to the powerful imprimatur it enjoyed from its exclusive availability first only at Harvard and later restricted to just the Ivy League</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/748dc342-17c6-4486-9d0c-32b57b5e5f35-1-a2a7e865-e1e3-4433-aeac-eef7bb5a2704.png" class="img-fluid figure-img"></p>
<figcaption>image.png</figcaption>
</figure>
</div>
<p>References:</p>
<ul>
<li>https://www.openthebooks.com/assets/1/6/Oversight_IvyLeagueInc_FINAL.pdf</li>
</ul>
<p>Given such a narrow and diminishing window of opportunity, academic and wealth background of parent and even parenting style (“Helicopter parenting”) can add competitive advantage to students.</p>
<p>Since much of America’s elite today emerges from a meritocratic system, akin to ancient Roman or Chinese elite pathways, parents increasingly shape their children’s upbringing to ensure passage through the same achievement gates. “Helicopter parenting,” once seen as irrational, is a strategic response to this competitive landscape, as noted by Pamela Druckerman in 2019.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/c10c4e55-dc64-4df3-8bc0-4506438f9519-1-5857f02d-4284-4bfe-abd0-9deea45c30c7.png" class="img-fluid figure-img"></p>
<figcaption>image.png</figcaption>
</figure>
</div>
</section>
<section id="what-about-mental-health" class="level3">
<h3 class="anchored" data-anchor-id="what-about-mental-health">What about mental health ?</h3>
<p>Despite legacy admissions and insider knowledge aiding children, the <strong>competition narrows their lives</strong>, leaving little room for curiosity or rebellion. This controlled upbringing often robs individuals of the adventurousness seen in past pioneers</p>
<blockquote class="blockquote">
<p>This means that their (students’) lives are way more tightly controlled, in order to compete against everyone else attempting to achieve <strong>SUCCESS</strong> in the modern era, which is why so many of the most “successful” people according to conventional measurements aren’t very adventurous anymore, there’s not a lot of room for experimentation or much else anymore, since the road to professional success is, for the most part, so very <strong>NARROW</strong>, and doesn’t tend to <strong>reward the inquisitiveness and rebelliousness that many great people of the past had going for them</strong></p>
</blockquote>
</section>
<section id="decline-in-job-satisfaction-over-time" class="level3">
<h3 class="anchored" data-anchor-id="decline-in-job-satisfaction-over-time">Decline in Job Satisfaction Over Time</h3>
<p>In the mid-1980s, approximately 61% of workers reported being satisfied with their jobs, as shown by studies from NLS and Gallup surveys. However, as of 2021, this percentage has dropped to around 50%, reflecting increasing pressures in the workplace.</p>
<p>Many of these pressures stem from</p>
<ul>
<li>shifting expectations and demands,</li>
<li>exacerbated by the rise of the gig economy,</li>
<li>rapid technological changes,</li>
<li>the COVID-19 pandemic, oppressive hours,</li>
<li>political infighting,</li>
<li>increased competition sparked by globalization,</li>
<li>an “always-on culture” bred by the internet.</li>
</ul>
<p>The decline in job satisfaction is noticeable across several industries, especially in sectors that are fast-paced and high- stress, like engineering and finance.</p>
<p>One Harvard MBA observed about his Harvard MBA classmate: &gt; “One classmate described having to invest USD 5M a day — which didn’t sound terrible, until he explained that if he put only USD 4M to work on Monday, he had to scramble to place USD 6M on Tuesday, and his co-workers were constantly undermining one another in search of the next promotion. It was insanely stressful work, done among people he didn’t particularly like. He earned about $1.2 million a year and hated going to the office. &gt; <strong>‘I feel like I’m wasting my life,’</strong> he told me.’ When I die, is anyone going to care that I earned an extra percentage point of return? My work feels totally meaningless.’</p>
<blockquote class="blockquote">
<p>He recognized the incredible privilege of his pay and status, but his anguish seemed genuine.</p>
</blockquote>
<blockquote class="blockquote">
<p><strong>‘If you spend 12 hours a day doing work you hate, at some point it doesn’t matter what your paycheck says,’</strong> he told me.</p>
</blockquote>
<blockquote class="blockquote">
<p>There’s no magic salary at which a bad job becomes good. He had received an offer at a start-up, and he would have loved to take it, but it paid half as much, and he felt locked into a lifestyle that made this pay cut impossible”</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/c10c4e55-dc64-4df3-8bc0-4506438f9519-2-deb8c71f-daf5-4bdf-aca7-4e96913ff2b9.png" class="img-fluid figure-img"></p>
<figcaption>image.png</figcaption>
</figure>
</div>
<p>Take David, a stressed engineering manager. Although on paper he holds a managerial role, he feels powerless, with no real authority to make decisions. David, who originally hails from New Zealand, misses his home country and its cultural connection, which further strains his emotional well-being. His day-to-day involves constant delivery pressures, tight deadlines, and an unrelenting push to scale projects. For David, the lack of autonomy and cultural disconnection are significant contributors to his mental health challenges. Despite earning a comfortable salary, David experiences burnout and dissatisfaction, showing that financial reward alone doesn’t guarantee happiness.</p>
<p>By contrast, Priya, who runs a small social enterprise in rural Malaysia, has managed to structure her business in ways that align with her personal values and mental well-being. Priya’s business supports indigenous weavers and craftsmen, and while her work can be stressful, the novelty of her enterprise, its connection to community engagement, and the autonomy she enjoys significantly bolster her job satisfaction. Priya’s example illustrates how the five dimensions of job satisfaction—autonomy, novelty, cultural alignment, community engagement, and meaningful work—play pivotal roles in mental well-being. Despite financial challenges, Priya feels fulfilled because her work aligns with her personal values and provides her with control and purpose.</p>
<p>For professionals, mental health concerns have intensified over the last decade. The National Bureau of Economic Research (NBER) found that 68% of professionals in high-stress fields like finance and healthcare reported elevated stress and anxiety levels in 2022. Factors such as excessive workload, high expectations, and job insecurity contribute to this decline in mental health. David, as an example, mirrors this growing crisis in the professional world, where job satisfaction diminishes due to the relentless demands of modern work environments.</p>
<p>In contrast, professionals like Priya, who have woven community engagement and autonomy into their work, tend to report higher job satisfaction and better mental health outcomes. For Priya, who feels deeply connected to her work, her stress is mitigated by the purpose and authority embedded in her role.</p>
<p>The Five Dimensions of Job Satisfaction Research indicates that job satisfaction is most influenced by five dimensions:</p>
<ul>
<li><p><strong>Autonomy</strong>: The freedom to make decisions and control one’s work. Priya, who runs her own business, enjoys this freedom, while David, despite his managerial role, does not.</p></li>
<li><p><strong>Novelty</strong>: Engaging in unique and meaningful work that challenges and stimulates. David’s routine job lacks novelty, while Priya’s socially driven enterprise is constantly evolving.</p></li>
<li><p><strong>Cultural Alignment</strong>: Feeling connected to one’s values or heritage. David’s detachment from his New Zealand roots impacts his satisfaction, while Priya’s work is intertwined with the culture of rural Malaysia, fostering a sense of belonging.</p></li>
<li><p><strong>Community Engagement</strong>: Being involved in community-oriented work boosts well-being, as seen with Priya, whose business is centered around helping indigenous communities.</p></li>
<li><p><strong>Meaning and Lower Stress</strong>: Finding meaning in one’s work can mitigate stress. Priya’s sense of purpose helps her cope with the stresses of running a business, while David’s lack of meaning leads to burnout.</p></li>
</ul>
<p>Does More Pay Lead to More Happiness? Once basic financial needs are met, additional salary and benefits have diminishing returns on job satisfaction. Studies, including those from NBER, show that salary increases above a certain threshold (around $75,000 annually in the U.S.) no longer significantly affect happiness. Despite receiving a generous salary, David’s discontent stems from the lack of autonomy and personal fulfillment, illustrating that financial compensation alone does not ensure job satisfaction.</p>
</section>
<section id="mental-health-of-students-escalating-concerns" class="level3">
<h3 class="anchored" data-anchor-id="mental-health-of-students-escalating-concerns">Mental Health of Students: Escalating Concerns</h3>
<p>Mental health issues among students have become an alarming trend. Data from the American College Health Association (ACHA) shows that the percentage of students reporting mental health challenges increased from 25% in the early 2000s to nearly 46% by 2020. Anxiety, depression, and other mental health disorders have grown, driven by academic pressures, societal expectations, and increasingly uncertain futures. Over 60% of college students reported experiencing significant anxiety and depression during the COVID-19 pandemic.</p>
<p>Unlike earlier generations, where students balanced academic stress with social interactions, today’s students face a perfect storm of academic pressure, social media comparisons, and global uncertainties. Financial difficulties also weigh heavily, as tuition fees and student loans add to their stress levels. The frequency at which college students exhibit serious mental health conditions has reached an alarming level. Data from the Healthy Minds Study, an annual survey of US college students, show that the portion of students with a lifetime diagnosis of a mental health condition increased from 22% in 2007 to 36% by 2017.4 According to the Center for Collegiate Mental Health (CCMH) annual surveys, about 60% of students seeking mental health services in 2020 reported prior mental health treatment, compared with 48% in 2012-2013.5 The CCMH 2020 data also indicate that among students who reported that they had registered with a university’s disability office, 42% were for attention-deficit hyperactivity disorder and 32% for a psychological or psychiatric condition.5 Another large-scale survey, the American College Health Association National College Health Assessment II, has revealed an equally sizeable increase in reported mental health concerns among college students over the past 10 years.</p>
<p><strong>References</strong></p>
<ul>
<li>Responding to the Crisis in College Mental Health: A Call to Action. Patel, Bina Pulkit et al. The Journal of Pediatrics, Volume 257, 113390 https://www.jpeds.com/article/S0022-3476(23)00192-0/fulltext</li>
</ul>
<div id="a5a670c7-97ba-4e98-972d-c4ced7e2fa41" class="cell" data-execution_count="331">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Data from the snapshot table</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Year"</span>: [<span class="dv">2009</span>, <span class="dv">2014</span>, <span class="dv">2019</span>],</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Felt overwhelming anxiety"</span>: [<span class="fl">49.1</span>, <span class="fl">54.0</span>, <span class="fl">65.7</span>],</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Felt so depressed it was difficult to function"</span>: [<span class="fl">30.7</span>, <span class="fl">32.6</span>, <span class="fl">45.1</span>],</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Seriously considered suicide"</span>: [<span class="fl">6.0</span>, <span class="fl">8.1</span>, <span class="fl">13.3</span>],</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Attempted suicide"</span>: [<span class="fl">1.1</span>, <span class="fl">1.3</span>, <span class="fl">2.0</span>],</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Diagnosed with or treated for anxiety"</span>: [<span class="fl">10.5</span>, <span class="fl">14.3</span>, <span class="fl">24.3</span>],</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Diagnosed with or treated for depression"</span>: [<span class="fl">10.1</span>, <span class="fl">12.0</span>, <span class="fl">20.0</span>]</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a DataFrame</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> column <span class="kw">in</span> df.columns[<span class="dv">1</span>:]:</span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>    plt.plot(df[<span class="st">'Year'</span>], df[column], label<span class="op">=</span>column)</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Trends in Mental Health Among College Students (2009-2019)'</span>)</span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Percentage (%)'</span>)</span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper left'</span>, bbox_to_anchor<span class="op">=</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
/* Put everything inside the global mpl namespace */
/* global mpl */
window.mpl = {};

mpl.get_websocket_type = function () {
    if (typeof WebSocket !== 'undefined') {
        return WebSocket;
    } else if (typeof MozWebSocket !== 'undefined') {
        return MozWebSocket;
    } else {
        alert(
            'Your browser does not have WebSocket support. ' +
                'Please try Chrome, Safari or Firefox ≥ 6. ' +
                'Firefox 4 and 5 are also supported but you ' +
                'have to enable WebSockets in about:config.'
        );
    }
};

mpl.figure = function (figure_id, websocket, ondownload, parent_element) {
    this.id = figure_id;

    this.ws = websocket;

    this.supports_binary = this.ws.binaryType !== undefined;

    if (!this.supports_binary) {
        var warnings = document.getElementById('mpl-warnings');
        if (warnings) {
            warnings.style.display = 'block';
            warnings.textContent =
                'This browser does not support binary websocket messages. ' +
                'Performance may be slow.';
        }
    }

    this.imageObj = new Image();

    this.context = undefined;
    this.message = undefined;
    this.canvas = undefined;
    this.rubberband_canvas = undefined;
    this.rubberband_context = undefined;
    this.format_dropdown = undefined;

    this.image_mode = 'full';

    this.root = document.createElement('div');
    this.root.setAttribute('style', 'display: inline-block');
    this._root_extra_style(this.root);

    parent_element.appendChild(this.root);

    this._init_header(this);
    this._init_canvas(this);
    this._init_toolbar(this);

    var fig = this;

    this.waiting = false;

    this.ws.onopen = function () {
        fig.send_message('supports_binary', { value: fig.supports_binary });
        fig.send_message('send_image_mode', {});
        if (fig.ratio !== 1) {
            fig.send_message('set_device_pixel_ratio', {
                device_pixel_ratio: fig.ratio,
            });
        }
        fig.send_message('refresh', {});
    };

    this.imageObj.onload = function () {
        if (fig.image_mode === 'full') {
            // Full images could contain transparency (where diff images
            // almost always do), so we need to clear the canvas so that
            // there is no ghosting.
            fig.context.clearRect(0, 0, fig.canvas.width, fig.canvas.height);
        }
        fig.context.drawImage(fig.imageObj, 0, 0);
    };

    this.imageObj.onunload = function () {
        fig.ws.close();
    };

    this.ws.onmessage = this._make_on_message_function(this);

    this.ondownload = ondownload;
};

mpl.figure.prototype._init_header = function () {
    var titlebar = document.createElement('div');
    titlebar.classList =
        'ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix';
    var titletext = document.createElement('div');
    titletext.classList = 'ui-dialog-title';
    titletext.setAttribute(
        'style',
        'width: 100%; text-align: center; padding: 3px;'
    );
    titlebar.appendChild(titletext);
    this.root.appendChild(titlebar);
    this.header = titletext;
};

mpl.figure.prototype._canvas_extra_style = function (_canvas_div) {};

mpl.figure.prototype._root_extra_style = function (_canvas_div) {};

mpl.figure.prototype._init_canvas = function () {
    var fig = this;

    var canvas_div = (this.canvas_div = document.createElement('div'));
    canvas_div.setAttribute('tabindex', '0');
    canvas_div.setAttribute(
        'style',
        'border: 1px solid #ddd;' +
            'box-sizing: content-box;' +
            'clear: both;' +
            'min-height: 1px;' +
            'min-width: 1px;' +
            'outline: 0;' +
            'overflow: hidden;' +
            'position: relative;' +
            'resize: both;' +
            'z-index: 2;'
    );

    function on_keyboard_event_closure(name) {
        return function (event) {
            return fig.key_event(event, name);
        };
    }

    canvas_div.addEventListener(
        'keydown',
        on_keyboard_event_closure('key_press')
    );
    canvas_div.addEventListener(
        'keyup',
        on_keyboard_event_closure('key_release')
    );

    this._canvas_extra_style(canvas_div);
    this.root.appendChild(canvas_div);

    var canvas = (this.canvas = document.createElement('canvas'));
    canvas.classList.add('mpl-canvas');
    canvas.setAttribute(
        'style',
        'box-sizing: content-box;' +
            'pointer-events: none;' +
            'position: relative;' +
            'z-index: 0;'
    );

    this.context = canvas.getContext('2d');

    var backingStore =
        this.context.backingStorePixelRatio ||
        this.context.webkitBackingStorePixelRatio ||
        this.context.mozBackingStorePixelRatio ||
        this.context.msBackingStorePixelRatio ||
        this.context.oBackingStorePixelRatio ||
        this.context.backingStorePixelRatio ||
        1;

    this.ratio = (window.devicePixelRatio || 1) / backingStore;

    var rubberband_canvas = (this.rubberband_canvas = document.createElement(
        'canvas'
    ));
    rubberband_canvas.setAttribute(
        'style',
        'box-sizing: content-box;' +
            'left: 0;' +
            'pointer-events: none;' +
            'position: absolute;' +
            'top: 0;' +
            'z-index: 1;'
    );

    // Apply a ponyfill if ResizeObserver is not implemented by browser.
    if (this.ResizeObserver === undefined) {
        if (window.ResizeObserver !== undefined) {
            this.ResizeObserver = window.ResizeObserver;
        } else {
            var obs = _JSXTOOLS_RESIZE_OBSERVER({});
            this.ResizeObserver = obs.ResizeObserver;
        }
    }

    this.resizeObserverInstance = new this.ResizeObserver(function (entries) {
        var nentries = entries.length;
        for (var i = 0; i < nentries; i++) {
            var entry = entries[i];
            var width, height;
            if (entry.contentBoxSize) {
                if (entry.contentBoxSize instanceof Array) {
                    // Chrome 84 implements new version of spec.
                    width = entry.contentBoxSize[0].inlineSize;
                    height = entry.contentBoxSize[0].blockSize;
                } else {
                    // Firefox implements old version of spec.
                    width = entry.contentBoxSize.inlineSize;
                    height = entry.contentBoxSize.blockSize;
                }
            } else {
                // Chrome <84 implements even older version of spec.
                width = entry.contentRect.width;
                height = entry.contentRect.height;
            }

            // Keep the size of the canvas and rubber band canvas in sync with
            // the canvas container.
            if (entry.devicePixelContentBoxSize) {
                // Chrome 84 implements new version of spec.
                canvas.setAttribute(
                    'width',
                    entry.devicePixelContentBoxSize[0].inlineSize
                );
                canvas.setAttribute(
                    'height',
                    entry.devicePixelContentBoxSize[0].blockSize
                );
            } else {
                canvas.setAttribute('width', width * fig.ratio);
                canvas.setAttribute('height', height * fig.ratio);
            }
            /* This rescales the canvas back to display pixels, so that it
             * appears correct on HiDPI screens. */
            canvas.style.width = width + 'px';
            canvas.style.height = height + 'px';

            rubberband_canvas.setAttribute('width', width);
            rubberband_canvas.setAttribute('height', height);

            // And update the size in Python. We ignore the initial 0/0 size
            // that occurs as the element is placed into the DOM, which should
            // otherwise not happen due to the minimum size styling.
            if (fig.ws.readyState == 1 && width != 0 && height != 0) {
                fig.request_resize(width, height);
            }
        }
    });
    this.resizeObserverInstance.observe(canvas_div);

    function on_mouse_event_closure(name) {
        /* User Agent sniffing is bad, but WebKit is busted:
         * https://bugs.webkit.org/show_bug.cgi?id=144526
         * https://bugs.webkit.org/show_bug.cgi?id=181818
         * The worst that happens here is that they get an extra browser
         * selection when dragging, if this check fails to catch them.
         */
        var UA = navigator.userAgent;
        var isWebKit = /AppleWebKit/.test(UA) && !/Chrome/.test(UA);
        if(isWebKit) {
            return function (event) {
                /* This prevents the web browser from automatically changing to
                 * the text insertion cursor when the button is pressed. We
                 * want to control all of the cursor setting manually through
                 * the 'cursor' event from matplotlib */
                event.preventDefault()
                return fig.mouse_event(event, name);
            };
        } else {
            return function (event) {
                return fig.mouse_event(event, name);
            };
        }
    }

    canvas_div.addEventListener(
        'mousedown',
        on_mouse_event_closure('button_press')
    );
    canvas_div.addEventListener(
        'mouseup',
        on_mouse_event_closure('button_release')
    );
    canvas_div.addEventListener(
        'dblclick',
        on_mouse_event_closure('dblclick')
    );
    // Throttle sequential mouse events to 1 every 20ms.
    canvas_div.addEventListener(
        'mousemove',
        on_mouse_event_closure('motion_notify')
    );

    canvas_div.addEventListener(
        'mouseenter',
        on_mouse_event_closure('figure_enter')
    );
    canvas_div.addEventListener(
        'mouseleave',
        on_mouse_event_closure('figure_leave')
    );

    canvas_div.addEventListener('wheel', function (event) {
        if (event.deltaY < 0) {
            event.step = 1;
        } else {
            event.step = -1;
        }
        on_mouse_event_closure('scroll')(event);
    });

    canvas_div.appendChild(canvas);
    canvas_div.appendChild(rubberband_canvas);

    this.rubberband_context = rubberband_canvas.getContext('2d');
    this.rubberband_context.strokeStyle = '#000000';

    this._resize_canvas = function (width, height, forward) {
        if (forward) {
            canvas_div.style.width = width + 'px';
            canvas_div.style.height = height + 'px';
        }
    };

    // Disable right mouse context menu.
    canvas_div.addEventListener('contextmenu', function (_e) {
        event.preventDefault();
        return false;
    });

    function set_focus() {
        canvas.focus();
        canvas_div.focus();
    }

    window.setTimeout(set_focus, 100);
};

mpl.figure.prototype._init_toolbar = function () {
    var fig = this;

    var toolbar = document.createElement('div');
    toolbar.classList = 'mpl-toolbar';
    this.root.appendChild(toolbar);

    function on_click_closure(name) {
        return function (_event) {
            return fig.toolbar_button_onclick(name);
        };
    }

    function on_mouseover_closure(tooltip) {
        return function (event) {
            if (!event.currentTarget.disabled) {
                return fig.toolbar_button_onmouseover(tooltip);
            }
        };
    }

    fig.buttons = {};
    var buttonGroup = document.createElement('div');
    buttonGroup.classList = 'mpl-button-group';
    for (var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            /* Instead of a spacer, we start a new button group. */
            if (buttonGroup.hasChildNodes()) {
                toolbar.appendChild(buttonGroup);
            }
            buttonGroup = document.createElement('div');
            buttonGroup.classList = 'mpl-button-group';
            continue;
        }

        var button = (fig.buttons[name] = document.createElement('button'));
        button.classList = 'mpl-widget';
        button.setAttribute('role', 'button');
        button.setAttribute('aria-disabled', 'false');
        button.addEventListener('click', on_click_closure(method_name));
        button.addEventListener('mouseover', on_mouseover_closure(tooltip));

        var icon_img = document.createElement('img');
        icon_img.src = '_images/' + image + '.png';
        icon_img.srcset = '_images/' + image + '_large.png 2x';
        icon_img.alt = tooltip;
        button.appendChild(icon_img);

        buttonGroup.appendChild(button);
    }

    if (buttonGroup.hasChildNodes()) {
        toolbar.appendChild(buttonGroup);
    }

    var fmt_picker = document.createElement('select');
    fmt_picker.classList = 'mpl-widget';
    toolbar.appendChild(fmt_picker);
    this.format_dropdown = fmt_picker;

    for (var ind in mpl.extensions) {
        var fmt = mpl.extensions[ind];
        var option = document.createElement('option');
        option.selected = fmt === mpl.default_extension;
        option.innerHTML = fmt;
        fmt_picker.appendChild(option);
    }

    var status_bar = document.createElement('span');
    status_bar.classList = 'mpl-message';
    toolbar.appendChild(status_bar);
    this.message = status_bar;
};

mpl.figure.prototype.request_resize = function (x_pixels, y_pixels) {
    // Request matplotlib to resize the figure. Matplotlib will then trigger a resize in the client,
    // which will in turn request a refresh of the image.
    this.send_message('resize', { width: x_pixels, height: y_pixels });
};

mpl.figure.prototype.send_message = function (type, properties) {
    properties['type'] = type;
    properties['figure_id'] = this.id;
    this.ws.send(JSON.stringify(properties));
};

mpl.figure.prototype.send_draw_message = function () {
    if (!this.waiting) {
        this.waiting = true;
        this.ws.send(JSON.stringify({ type: 'draw', figure_id: this.id }));
    }
};

mpl.figure.prototype.handle_save = function (fig, _msg) {
    var format_dropdown = fig.format_dropdown;
    var format = format_dropdown.options[format_dropdown.selectedIndex].value;
    fig.ondownload(fig, format);
};

mpl.figure.prototype.handle_resize = function (fig, msg) {
    var size = msg['size'];
    if (size[0] !== fig.canvas.width || size[1] !== fig.canvas.height) {
        fig._resize_canvas(size[0], size[1], msg['forward']);
        fig.send_message('refresh', {});
    }
};

mpl.figure.prototype.handle_rubberband = function (fig, msg) {
    var x0 = msg['x0'] / fig.ratio;
    var y0 = (fig.canvas.height - msg['y0']) / fig.ratio;
    var x1 = msg['x1'] / fig.ratio;
    var y1 = (fig.canvas.height - msg['y1']) / fig.ratio;
    x0 = Math.floor(x0) + 0.5;
    y0 = Math.floor(y0) + 0.5;
    x1 = Math.floor(x1) + 0.5;
    y1 = Math.floor(y1) + 0.5;
    var min_x = Math.min(x0, x1);
    var min_y = Math.min(y0, y1);
    var width = Math.abs(x1 - x0);
    var height = Math.abs(y1 - y0);

    fig.rubberband_context.clearRect(
        0,
        0,
        fig.canvas.width / fig.ratio,
        fig.canvas.height / fig.ratio
    );

    fig.rubberband_context.strokeRect(min_x, min_y, width, height);
};

mpl.figure.prototype.handle_figure_label = function (fig, msg) {
    // Updates the figure title.
    fig.header.textContent = msg['label'];
};

mpl.figure.prototype.handle_cursor = function (fig, msg) {
    fig.canvas_div.style.cursor = msg['cursor'];
};

mpl.figure.prototype.handle_message = function (fig, msg) {
    fig.message.textContent = msg['message'];
};

mpl.figure.prototype.handle_draw = function (fig, _msg) {
    // Request the server to send over a new figure.
    fig.send_draw_message();
};

mpl.figure.prototype.handle_image_mode = function (fig, msg) {
    fig.image_mode = msg['mode'];
};

mpl.figure.prototype.handle_history_buttons = function (fig, msg) {
    for (var key in msg) {
        if (!(key in fig.buttons)) {
            continue;
        }
        fig.buttons[key].disabled = !msg[key];
        fig.buttons[key].setAttribute('aria-disabled', !msg[key]);
    }
};

mpl.figure.prototype.handle_navigate_mode = function (fig, msg) {
    if (msg['mode'] === 'PAN') {
        fig.buttons['Pan'].classList.add('active');
        fig.buttons['Zoom'].classList.remove('active');
    } else if (msg['mode'] === 'ZOOM') {
        fig.buttons['Pan'].classList.remove('active');
        fig.buttons['Zoom'].classList.add('active');
    } else {
        fig.buttons['Pan'].classList.remove('active');
        fig.buttons['Zoom'].classList.remove('active');
    }
};

mpl.figure.prototype.updated_canvas_event = function () {
    // Called whenever the canvas gets updated.
    this.send_message('ack', {});
};

// A function to construct a web socket function for onmessage handling.
// Called in the figure constructor.
mpl.figure.prototype._make_on_message_function = function (fig) {
    return function socket_on_message(evt) {
        if (evt.data instanceof Blob) {
            var img = evt.data;
            if (img.type !== 'image/png') {
                /* FIXME: We get "Resource interpreted as Image but
                 * transferred with MIME type text/plain:" errors on
                 * Chrome.  But how to set the MIME type?  It doesn't seem
                 * to be part of the websocket stream */
                img.type = 'image/png';
            }

            /* Free the memory for the previous frames */
            if (fig.imageObj.src) {
                (window.URL || window.webkitURL).revokeObjectURL(
                    fig.imageObj.src
                );
            }

            fig.imageObj.src = (window.URL || window.webkitURL).createObjectURL(
                img
            );
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        } else if (
            typeof evt.data === 'string' &&
            evt.data.slice(0, 21) === 'data:image/png;base64'
        ) {
            fig.imageObj.src = evt.data;
            fig.updated_canvas_event();
            fig.waiting = false;
            return;
        }

        var msg = JSON.parse(evt.data);
        var msg_type = msg['type'];

        // Call the  "handle_{type}" callback, which takes
        // the figure and JSON message as its only arguments.
        try {
            var callback = fig['handle_' + msg_type];
        } catch (e) {
            console.log(
                "No handler for the '" + msg_type + "' message type: ",
                msg
            );
            return;
        }

        if (callback) {
            try {
                // console.log("Handling '" + msg_type + "' message: ", msg);
                callback(fig, msg);
            } catch (e) {
                console.log(
                    "Exception inside the 'handler_" + msg_type + "' callback:",
                    e,
                    e.stack,
                    msg
                );
            }
        }
    };
};

function getModifiers(event) {
    var mods = [];
    if (event.ctrlKey) {
        mods.push('ctrl');
    }
    if (event.altKey) {
        mods.push('alt');
    }
    if (event.shiftKey) {
        mods.push('shift');
    }
    if (event.metaKey) {
        mods.push('meta');
    }
    return mods;
}

/*
 * return a copy of an object with only non-object keys
 * we need this to avoid circular references
 * https://stackoverflow.com/a/24161582/3208463
 */
function simpleKeys(original) {
    return Object.keys(original).reduce(function (obj, key) {
        if (typeof original[key] !== 'object') {
            obj[key] = original[key];
        }
        return obj;
    }, {});
}

mpl.figure.prototype.mouse_event = function (event, name) {
    if (name === 'button_press') {
        this.canvas.focus();
        this.canvas_div.focus();
    }

    // from https://stackoverflow.com/q/1114465
    var boundingRect = this.canvas.getBoundingClientRect();
    var x = (event.clientX - boundingRect.left) * this.ratio;
    var y = (event.clientY - boundingRect.top) * this.ratio;

    this.send_message(name, {
        x: x,
        y: y,
        button: event.button,
        step: event.step,
        modifiers: getModifiers(event),
        guiEvent: simpleKeys(event),
    });

    return false;
};

mpl.figure.prototype._key_event_extra = function (_event, _name) {
    // Handle any extra behaviour associated with a key event
};

mpl.figure.prototype.key_event = function (event, name) {
    // Prevent repeat events
    if (name === 'key_press') {
        if (event.key === this._key) {
            return;
        } else {
            this._key = event.key;
        }
    }
    if (name === 'key_release') {
        this._key = null;
    }

    var value = '';
    if (event.ctrlKey && event.key !== 'Control') {
        value += 'ctrl+';
    }
    else if (event.altKey && event.key !== 'Alt') {
        value += 'alt+';
    }
    else if (event.shiftKey && event.key !== 'Shift') {
        value += 'shift+';
    }

    value += 'k' + event.key;

    this._key_event_extra(event, name);

    this.send_message(name, { key: value, guiEvent: simpleKeys(event) });
    return false;
};

mpl.figure.prototype.toolbar_button_onclick = function (name) {
    if (name === 'download') {
        this.handle_save(this, null);
    } else {
        this.send_message('toolbar_button', { name: name });
    }
};

mpl.figure.prototype.toolbar_button_onmouseover = function (tooltip) {
    this.message.textContent = tooltip;
};

///////////////// REMAINING CONTENT GENERATED BY embed_js.py /////////////////
// prettier-ignore
var _JSXTOOLS_RESIZE_OBSERVER=function(A){var t,i=new WeakMap,n=new WeakMap,a=new WeakMap,r=new WeakMap,o=new Set;function s(e){if(!(this instanceof s))throw new TypeError("Constructor requires 'new' operator");i.set(this,e)}function h(){throw new TypeError("Function is not a constructor")}function c(e,t,i,n){e=0 in arguments?Number(arguments[0]):0,t=1 in arguments?Number(arguments[1]):0,i=2 in arguments?Number(arguments[2]):0,n=3 in arguments?Number(arguments[3]):0,this.right=(this.x=this.left=e)+(this.width=i),this.bottom=(this.y=this.top=t)+(this.height=n),Object.freeze(this)}function d(){t=requestAnimationFrame(d);var s=new WeakMap,p=new Set;o.forEach((function(t){r.get(t).forEach((function(i){var r=t instanceof window.SVGElement,o=a.get(t),d=r?0:parseFloat(o.paddingTop),f=r?0:parseFloat(o.paddingRight),l=r?0:parseFloat(o.paddingBottom),u=r?0:parseFloat(o.paddingLeft),g=r?0:parseFloat(o.borderTopWidth),m=r?0:parseFloat(o.borderRightWidth),w=r?0:parseFloat(o.borderBottomWidth),b=u+f,F=d+l,v=(r?0:parseFloat(o.borderLeftWidth))+m,W=g+w,y=r?0:t.offsetHeight-W-t.clientHeight,E=r?0:t.offsetWidth-v-t.clientWidth,R=b+v,z=F+W,M=r?t.width:parseFloat(o.width)-R-E,O=r?t.height:parseFloat(o.height)-z-y;if(n.has(t)){var k=n.get(t);if(k[0]===M&&k[1]===O)return}n.set(t,[M,O]);var S=Object.create(h.prototype);S.target=t,S.contentRect=new c(u,d,M,O),s.has(i)||(s.set(i,[]),p.add(i)),s.get(i).push(S)}))})),p.forEach((function(e){i.get(e).call(e,s.get(e),e)}))}return s.prototype.observe=function(i){if(i instanceof window.Element){r.has(i)||(r.set(i,new Set),o.add(i),a.set(i,window.getComputedStyle(i)));var n=r.get(i);n.has(this)||n.add(this),cancelAnimationFrame(t),t=requestAnimationFrame(d)}},s.prototype.unobserve=function(i){if(i instanceof window.Element&&r.has(i)){var n=r.get(i);n.has(this)&&(n.delete(this),n.size||(r.delete(i),o.delete(i))),n.size||r.delete(i),o.size||cancelAnimationFrame(t)}},A.DOMRectReadOnly=c,A.ResizeObserver=s,A.ResizeObserverEntry=h,A}; // eslint-disable-line
mpl.toolbar_items = [["Home", "Reset original view", "fa fa-home", "home"], ["Back", "Back to previous view", "fa fa-arrow-left", "back"], ["Forward", "Forward to next view", "fa fa-arrow-right", "forward"], ["", "", "", ""], ["Pan", "Left button pans, Right button zooms\nx/y fixes axis, CTRL fixes aspect", "fa fa-arrows", "pan"], ["Zoom", "Zoom to rectangle\nx/y fixes axis", "fa fa-square-o", "zoom"], ["", "", "", ""], ["Download", "Download plot", "fa fa-floppy-o", "download"]];

mpl.extensions = ["eps", "jpeg", "pgf", "pdf", "png", "ps", "raw", "svg", "tif", "webp"];

mpl.default_extension = "png";/* global mpl */

var comm_websocket_adapter = function (comm) {
    // Create a "websocket"-like object which calls the given IPython comm
    // object with the appropriate methods. Currently this is a non binary
    // socket, so there is still some room for performance tuning.
    var ws = {};

    ws.binaryType = comm.kernel.ws.binaryType;
    ws.readyState = comm.kernel.ws.readyState;
    function updateReadyState(_event) {
        if (comm.kernel.ws) {
            ws.readyState = comm.kernel.ws.readyState;
        } else {
            ws.readyState = 3; // Closed state.
        }
    }
    comm.kernel.ws.addEventListener('open', updateReadyState);
    comm.kernel.ws.addEventListener('close', updateReadyState);
    comm.kernel.ws.addEventListener('error', updateReadyState);

    ws.close = function () {
        comm.close();
    };
    ws.send = function (m) {
        //console.log('sending', m);
        comm.send(m);
    };
    // Register the callback with on_msg.
    comm.on_msg(function (msg) {
        //console.log('receiving', msg['content']['data'], msg);
        var data = msg['content']['data'];
        if (data['blob'] !== undefined) {
            data = {
                data: new Blob(msg['buffers'], { type: data['blob'] }),
            };
        }
        // Pass the mpl event to the overridden (by mpl) onmessage function.
        ws.onmessage(data);
    });
    return ws;
};

mpl.mpl_figure_comm = function (comm, msg) {
    // This is the function which gets called when the mpl process
    // starts-up an IPython Comm through the "matplotlib" channel.

    var id = msg.content.data.id;
    // Get hold of the div created by the display call when the Comm
    // socket was opened in Python.
    var element = document.getElementById(id);
    var ws_proxy = comm_websocket_adapter(comm);

    function ondownload(figure, _format) {
        window.open(figure.canvas.toDataURL());
    }

    var fig = new mpl.figure(id, ws_proxy, ondownload, element);

    // Call onopen now - mpl needs it, as it is assuming we've passed it a real
    // web socket which is closed, not our websocket->open comm proxy.
    ws_proxy.onopen();

    fig.parent_element = element;
    fig.cell_info = mpl.find_output_cell("<div id='" + id + "'></div>");
    if (!fig.cell_info) {
        console.error('Failed to find cell for figure', id, fig);
        return;
    }
    fig.cell_info[0].output_area.element.on(
        'cleared',
        { fig: fig },
        fig._remove_fig_handler
    );
};

mpl.figure.prototype.handle_close = function (fig, msg) {
    var width = fig.canvas.width / fig.ratio;
    fig.cell_info[0].output_area.element.off(
        'cleared',
        fig._remove_fig_handler
    );
    fig.resizeObserverInstance.unobserve(fig.canvas_div);

    // Update the output cell to use the data from the current canvas.
    fig.push_to_output();
    var dataURL = fig.canvas.toDataURL();
    // Re-enable the keyboard manager in IPython - without this line, in FF,
    // the notebook keyboard shortcuts fail.
    IPython.keyboard_manager.enable();
    fig.parent_element.innerHTML =
        '<img src="' + dataURL + '" width="' + width + '">';
    fig.close_ws(fig, msg);
};

mpl.figure.prototype.close_ws = function (fig, msg) {
    fig.send_message('closing', msg);
    // fig.ws.close()
};

mpl.figure.prototype.push_to_output = function (_remove_interactive) {
    // Turn the data on the canvas into data in the output cell.
    var width = this.canvas.width / this.ratio;
    var dataURL = this.canvas.toDataURL();
    this.cell_info[1]['text/html'] =
        '<img src="' + dataURL + '" width="' + width + '">';
};

mpl.figure.prototype.updated_canvas_event = function () {
    // Tell IPython that the notebook contents must change.
    IPython.notebook.set_dirty(true);
    this.send_message('ack', {});
    var fig = this;
    // Wait a second, then push the new image to the DOM so
    // that it is saved nicely (might be nice to debounce this).
    setTimeout(function () {
        fig.push_to_output();
    }, 1000);
};

mpl.figure.prototype._init_toolbar = function () {
    var fig = this;

    var toolbar = document.createElement('div');
    toolbar.classList = 'btn-toolbar';
    this.root.appendChild(toolbar);

    function on_click_closure(name) {
        return function (_event) {
            return fig.toolbar_button_onclick(name);
        };
    }

    function on_mouseover_closure(tooltip) {
        return function (event) {
            if (!event.currentTarget.disabled) {
                return fig.toolbar_button_onmouseover(tooltip);
            }
        };
    }

    fig.buttons = {};
    var buttonGroup = document.createElement('div');
    buttonGroup.classList = 'btn-group';
    var button;
    for (var toolbar_ind in mpl.toolbar_items) {
        var name = mpl.toolbar_items[toolbar_ind][0];
        var tooltip = mpl.toolbar_items[toolbar_ind][1];
        var image = mpl.toolbar_items[toolbar_ind][2];
        var method_name = mpl.toolbar_items[toolbar_ind][3];

        if (!name) {
            /* Instead of a spacer, we start a new button group. */
            if (buttonGroup.hasChildNodes()) {
                toolbar.appendChild(buttonGroup);
            }
            buttonGroup = document.createElement('div');
            buttonGroup.classList = 'btn-group';
            continue;
        }

        button = fig.buttons[name] = document.createElement('button');
        button.classList = 'btn btn-default';
        button.href = '#';
        button.title = name;
        button.innerHTML = '<i class="fa ' + image + ' fa-lg"></i>';
        button.addEventListener('click', on_click_closure(method_name));
        button.addEventListener('mouseover', on_mouseover_closure(tooltip));
        buttonGroup.appendChild(button);
    }

    if (buttonGroup.hasChildNodes()) {
        toolbar.appendChild(buttonGroup);
    }

    // Add the status bar.
    var status_bar = document.createElement('span');
    status_bar.classList = 'mpl-message pull-right';
    toolbar.appendChild(status_bar);
    this.message = status_bar;

    // Add the close button to the window.
    var buttongrp = document.createElement('div');
    buttongrp.classList = 'btn-group inline pull-right';
    button = document.createElement('button');
    button.classList = 'btn btn-mini btn-primary';
    button.href = '#';
    button.title = 'Stop Interaction';
    button.innerHTML = '<i class="fa fa-power-off icon-remove icon-large"></i>';
    button.addEventListener('click', function (_evt) {
        fig.handle_close(fig, {});
    });
    button.addEventListener(
        'mouseover',
        on_mouseover_closure('Stop Interaction')
    );
    buttongrp.appendChild(button);
    var titlebar = this.root.querySelector('.ui-dialog-titlebar');
    titlebar.insertBefore(buttongrp, titlebar.firstChild);
};

mpl.figure.prototype._remove_fig_handler = function (event) {
    var fig = event.data.fig;
    if (event.target !== this) {
        // Ignore bubbled events from children.
        return;
    }
    fig.close_ws(fig, {});
};

mpl.figure.prototype._root_extra_style = function (el) {
    el.style.boxSizing = 'content-box'; // override notebook setting of border-box.
};

mpl.figure.prototype._canvas_extra_style = function (el) {
    // this is important to make the div 'focusable
    el.setAttribute('tabindex', 0);
    // reach out to IPython and tell the keyboard manager to turn it's self
    // off when our div gets focus

    // location in version 3
    if (IPython.notebook.keyboard_manager) {
        IPython.notebook.keyboard_manager.register_events(el);
    } else {
        // location in version 2
        IPython.keyboard_manager.register_events(el);
    }
};

mpl.figure.prototype._key_event_extra = function (event, _name) {
    // Check for shift+enter
    if (event.shiftKey && event.which === 13) {
        this.canvas_div.blur();
        // select the cell after this one
        var index = IPython.notebook.find_cell_index(this.cell_info[0]);
        IPython.notebook.select(index + 1);
    }
};

mpl.figure.prototype.handle_save = function (fig, _msg) {
    fig.ondownload(fig, null);
};

mpl.find_output_cell = function (html_output) {
    // Return the cell and output element which can be found *uniquely* in the notebook.
    // Note - this is a bit hacky, but it is done because the "notebook_saving.Notebook"
    // IPython event is triggered only after the cells have been serialised, which for
    // our purposes (turning an active figure into a static one), is too late.
    var cells = IPython.notebook.get_cells();
    var ncells = cells.length;
    for (var i = 0; i < ncells; i++) {
        var cell = cells[i];
        if (cell.cell_type === 'code') {
            for (var j = 0; j < cell.output_area.outputs.length; j++) {
                var data = cell.output_area.outputs[j];
                if (data.data) {
                    // IPython >= 3 moved mimebundle to data attribute of output
                    data = data.data;
                }
                if (data['text/html'] === html_output) {
                    return [cell, data, j];
                }
            }
        }
    }
};

// Register the function which deals with the matplotlib target/channel.
// The kernel may be null if the page has been refreshed.
if (IPython.notebook.kernel !== null) {
    IPython.notebook.kernel.comm_manager.register_target(
        'matplotlib',
        mpl.mpl_figure_comm
    );
}

</script>
</div>
<div class="cell-output cell-output-display">
<div id="3fd8c416-eec9-486b-8fd2-63cc0b595701"></div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-34-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<ol type="1">
<li><strong>Extract Data and Reports on Anxiety and Depression among Students and Early Professionals</strong>: Data Sources:</li>
</ol>
<ul>
<li><p>National College Health Assessment (NCHA): The American College Health Association regularly publishes reports on student mental health, including data on anxiety, depression, and other mental health issues.</p></li>
<li><p>World Health Organization (WHO): The WHO provides global data on mental health, including anxiety and depression prevalence.</p></li>
<li><p>Centers for Disease Control and Prevention (CDC): The CDC offers data on mental health trends in the U.S., including among young adults.</p></li>
<li><p>National Institute of Mental Health (NIMH): NIMH provides comprehensive data and reports on the prevalence of anxiety and depression across different age groups, including early professionals.</p></li>
<li><p>PubMed and Google Scholar: Academic studies published on these platforms can offer insights into how anxiety and depression have evolved over time, particularly in students and early professionals.</p>
<p>Reports:</p>
<p>Look for reports from educational institutions, mental health organizations, and government health departments that discuss trends in mental health issues among students and professionals over the years. Surveys from organizations like the Gallup-Sharecare Well-Being Index or the Mental Health Foundation (UK) might also provide relevant insights.</p></li>
</ul>
<ol start="2" type="1">
<li>Quantify the Cost of Disease Burden: Economic Burden:</li>
</ol>
<ul>
<li><p>Direct Costs: These include medical costs related to the treatment of anxiety and depression, including therapy, medication, and hospitalization.</p></li>
<li><p>Indirect Costs: These encompass lost productivity due to absenteeism, presenteeism (reduced productivity while at work), and the long-term impact of mental health issues on career progression.</p></li>
<li><p>Intangible Costs: These involve the emotional toll on individuals and their families, which can be harder to quantify but is crucial in understanding the full impact of mental health issues.</p>
<p>Sources for Economic Data:</p>
<p>WHO Global Health Estimates: Provides data on the burden of mental health disorders globally, including the economic impact. Health Economics Studies: Published research papers on the economic burden of mental health disorders often quantify the cost of diseases like anxiety and depression in monetary terms. National Health Expenditure Data: Some countries provide data on national health expenditures, which can include spending on mental health.</p></li>
<li><p>https://www.kff.org/mental-health/issue-brief/exploring-the-rise-in-mental-health-care-use-by-demographics-and-insurance-status/</p></li>
<li><p>https://www.statnews.com/2017/02/06/mental-health-college-students/</p></li>
<li><p>https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10625532/</p></li>
</ul>
<div id="9b731fb6-7cab-4ca9-ac1a-6a848c155588" class="cell" data-execution_count="90">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Data from the table</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>years <span class="op">=</span> [<span class="dv">2019</span>, <span class="dv">2020</span>, <span class="dv">2021</span>, <span class="dv">2022</span>]</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>age_18_26 <span class="op">=</span> [<span class="dv">18</span>, <span class="dv">22</span>, <span class="dv">22</span>, <span class="dv">26</span>]</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>age_27_50 <span class="op">=</span> [<span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">23</span>, <span class="dv">25</span>]</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>age_51_64 <span class="op">=</span> [<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">21</span>, <span class="dv">23</span>]</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>age_65_plus <span class="op">=</span> [<span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">19</span>, <span class="dv">20</span>]</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>plt.plot(years, age_18_26, marker<span class="op">=</span><span class="st">'o'</span>, label<span class="op">=</span><span class="st">'Ages 18-26'</span>)</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>plt.plot(years, age_27_50, marker<span class="op">=</span><span class="st">'o'</span>, label<span class="op">=</span><span class="st">'Ages 27-50'</span>)</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>plt.plot(years, age_51_64, marker<span class="op">=</span><span class="st">'o'</span>, label<span class="op">=</span><span class="st">'Ages 51-64'</span>)</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>plt.plot(years, age_65_plus, marker<span class="op">=</span><span class="st">'o'</span>, label<span class="op">=</span><span class="st">'Ages 65+'</span>)</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding titles and labels</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Percentage of Adults Reporting Use of Mental Health Services (2019-2022)'</span>)</span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Percentage'</span>)</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Age Groups'</span>)</span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-35-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<section id="nhis-data" class="level4">
<h4 class="anchored" data-anchor-id="nhis-data">NHIS Data</h4>
<div id="7322954b-0bb0-48ae-ac04-991959bab37b" class="cell" data-execution_count="158">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> categorize_age(age):</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="dv">18</span> <span class="op">&lt;=</span> age <span class="op">&lt;=</span> <span class="dv">26</span>:</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'18-26'</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="dv">27</span> <span class="op">&lt;=</span> age <span class="op">&lt;=</span> <span class="dv">50</span>:</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'27-50'</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="dv">51</span> <span class="op">&lt;=</span> age <span class="op">&lt;=</span> <span class="dv">64</span>:</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'51-64'</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> age <span class="op">&gt;=</span> <span class="dv">65</span>:</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'65+'</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'Unknown'</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Load your dataset (replace 'nhis_data.csv' with your actual file)</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'nhis_data/nhis_00001.csv'</span>)</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Age_Group'</span>] <span class="op">=</span> df[<span class="st">'AGE'</span>].<span class="bu">apply</span>(categorize_age)</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df[df[<span class="st">'Age_Group'</span>] <span class="op">!=</span> <span class="st">'Unknown'</span>]</span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a><span class="co"># # Define the age group and filter the data</span></span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a><span class="co"># age_group = df[(df['AGE'] &gt;= 18) &amp; (df['AGE'] &lt;= 26) &amp; (df['YEAR'] &gt; 2018)]</span></span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'MENTAL_HEALTH_SERVICE_USE'</span>] <span class="op">=</span> (</span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>    (df[<span class="st">'HEALTHMENT'</span>] <span class="op">==</span> <span class="dv">1</span>) <span class="op">|</span>  <span class="co"># If respondent used mental health services</span></span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>    (df[<span class="st">'DEPRX'</span>] <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">|</span>  <span class="co"># If respondent received any prescription for depression</span></span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>    (df[<span class="st">'DEPFREQ'</span>] <span class="op">&gt;</span> <span class="dv">0</span>)  <span class="co"># Frequency of depressive symptoms, assuming higher means more service use</span></span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>).astype(<span class="bu">int</span>)</span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>total_adults_df <span class="op">=</span> df.groupby([<span class="st">'Age_Group'</span>, <span class="st">'YEAR'</span>]).agg({<span class="st">'SAMPWEIGHT'</span>: <span class="st">'sum'</span>}).reset_index()</span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a>total_adults_df.rename(columns<span class="op">=</span>{<span class="st">'SAMPWEIGHT'</span>: <span class="st">'Total_Adults'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge with the original dataframe to add Total_Adults column</span></span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.merge(df, total_adults_df, on<span class="op">=</span>[<span class="st">'Age_Group'</span>, <span class="st">'YEAR'</span>], how<span class="op">=</span><span class="st">'left'</span>)</span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the percentage of adults using mental health services</span></span>
<span id="cb41-37"><a href="#cb41-37" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'MENTAL_HEALTH_SERVICE_USE_PERCENT'</span>] <span class="op">=</span> (df[<span class="st">'MENTAL_HEALTH_SERVICE_USE'</span>] <span class="op">/</span> df[<span class="st">'Total_Adults'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb41-38"><a href="#cb41-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-39"><a href="#cb41-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by year and age group to calculate the percentage</span></span>
<span id="cb41-40"><a href="#cb41-40" aria-hidden="true" tabindex="-1"></a>percentage_df <span class="op">=</span> df.groupby([<span class="st">'YEAR'</span>, <span class="st">'Age_Group'</span>]).agg({</span>
<span id="cb41-41"><a href="#cb41-41" aria-hidden="true" tabindex="-1"></a>    <span class="st">'MENTAL_HEALTH_SERVICE_USE_PERCENT'</span>: <span class="st">'mean'</span></span>
<span id="cb41-42"><a href="#cb41-42" aria-hidden="true" tabindex="-1"></a>}).reset_index()</span>
<span id="cb41-43"><a href="#cb41-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-44"><a href="#cb41-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the percentage of adults using mental health services</span></span>
<span id="cb41-45"><a href="#cb41-45" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'MENTAL_HEALTH_SERVICE_USE_PERCENT'</span>] <span class="op">=</span> (df[<span class="st">'MENTAL_HEALTH_SERVICE_USE'</span>] <span class="op">/</span> df[<span class="st">'Total_Adults'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb41-46"><a href="#cb41-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-47"><a href="#cb41-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by year and age group to calculate the percentage</span></span>
<span id="cb41-48"><a href="#cb41-48" aria-hidden="true" tabindex="-1"></a>percentage_df <span class="op">=</span> df.groupby([<span class="st">'YEAR'</span>, <span class="st">'Age_Group'</span>]).agg({</span>
<span id="cb41-49"><a href="#cb41-49" aria-hidden="true" tabindex="-1"></a>    <span class="st">'MENTAL_HEALTH_SERVICE_USE_PERCENT'</span>: <span class="st">'mean'</span></span>
<span id="cb41-50"><a href="#cb41-50" aria-hidden="true" tabindex="-1"></a>}).reset_index()</span>
<span id="cb41-51"><a href="#cb41-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-52"><a href="#cb41-52" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.figure(figsize=(10, 6))</span></span>
<span id="cb41-53"><a href="#cb41-53" aria-hidden="true" tabindex="-1"></a><span class="co"># for age_group in percentage_df['Age_Group'].unique():</span></span>
<span id="cb41-54"><a href="#cb41-54" aria-hidden="true" tabindex="-1"></a><span class="co">#     subset = percentage_df[percentage_df['Age_Group'] == age_group]</span></span>
<span id="cb41-55"><a href="#cb41-55" aria-hidden="true" tabindex="-1"></a><span class="co">#     plt.plot(subset['YEAR'], subset['MENTAL_HEALTH_SERVICE_USE_PERCENT'], label=age_group)</span></span>
<span id="cb41-56"><a href="#cb41-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-57"><a href="#cb41-57" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.xlabel('Year')</span></span>
<span id="cb41-58"><a href="#cb41-58" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.ylabel('Percentage of Adults Using Mental Health Services (%)')</span></span>
<span id="cb41-59"><a href="#cb41-59" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.title('Share of Adults (%) Reporting Use of Mental Health Services by Age Group')</span></span>
<span id="cb41-60"><a href="#cb41-60" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.legend(title='Age Group')</span></span>
<span id="cb41-61"><a href="#cb41-61" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.grid(True)</span></span>
<span id="cb41-62"><a href="#cb41-62" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.show()</span></span>
<span id="cb41-63"><a href="#cb41-63" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot the data for a stacked bar plot</span></span>
<span id="cb41-64"><a href="#cb41-64" aria-hidden="true" tabindex="-1"></a>pivot_df <span class="op">=</span> percentage_df.pivot(index<span class="op">=</span><span class="st">'YEAR'</span>, columns<span class="op">=</span><span class="st">'Age_Group'</span>, values<span class="op">=</span><span class="st">'MENTAL_HEALTH_SERVICE_USE_PERCENT'</span>)</span>
<span id="cb41-65"><a href="#cb41-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-66"><a href="#cb41-66" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the stacked bar chart</span></span>
<span id="cb41-67"><a href="#cb41-67" aria-hidden="true" tabindex="-1"></a>pivot_df.plot(kind<span class="op">=</span><span class="st">'bar'</span>, stacked<span class="op">=</span><span class="va">True</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb41-68"><a href="#cb41-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-69"><a href="#cb41-69" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb41-70"><a href="#cb41-70" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Percentage of Adults Using Mental Health Services (%)'</span>)</span>
<span id="cb41-71"><a href="#cb41-71" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Share of Adults (%) Reporting Use of Mental Health Services by Age Group'</span>)</span>
<span id="cb41-72"><a href="#cb41-72" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Age Group'</span>)</span>
<span id="cb41-73"><a href="#cb41-73" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb41-74"><a href="#cb41-74" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>DtypeWarning: Columns (4,7,8) have mixed types. Specify dtype option on import or set low_memory=False.
  df = pd.read_csv('nhis_data/nhis_00001.csv')</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/cell-36-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Overeducation and depressive symptoms: diminishing mental health returns to education</strong> (https://sci-hub.se/10.1111/1467-9566.12039) &gt; In general, well-educated people enjoy better mental health than those with less education. As a result, some wonder whether there are limits to the mental health benefits of education. Inspired by the literature on the expansion of tertiary education, this article explores marginal mental health returns to education and studies the mental health status of overeducated people. To enhance the validity of the findings we use two indicators of educational attainment – years of education and ISCED97 categories – and two objective indicators of overeducation (the realised matches method and the job analyst method) in a sample of the working population of 25 European countries (unweighted sample N = 19,089). Depression is measured using an eight-item version of the CES-D scale. We find diminishing mental health returns to education. In addition, overeducated people report more depression symptoms. Both findings hold irrespective of the indicators used. The results must be interpreted in the light of the enduring expansion of education, as our findings show that the discussion of the relevance of the human capital perspective, and the diploma disease view on the relationship between education and modern society, is not obsolete.</p>
<ul>
<li>ISCED 0 = Early childhood education</li>
<li>ISCED 1 = Primary Education</li>
<li>ISCED 2 = Lower Secondary Education</li>
<li>ISCED 3 = Upper Secondary Education</li>
<li>ISCED 4 = Post-secondary non-Tertiary Education</li>
<li>ISCED 5 = Short-cycle tertiary education</li>
<li>ISCED 6 = Bachelors degree or equivalent tertiary education level</li>
<li>ISCED 7 = Masters degree or equivalent tertiary education level</li>
<li>ISCED 8 = Doctoral degree or equivalent tertiary education level</li>
</ul>
</section>
<section id="the-impact-of-phd-studies-on-mental-healtha-longitudinal-population-study" class="level4">
<h4 class="anchored" data-anchor-id="the-impact-of-phd-studies-on-mental-healtha-longitudinal-population-study">The Impact of PhD Studies on Mental Health—A Longitudinal Population Study</h4>
<p><strong>References</strong>: https://lucris.lub.lu.se/ws/portalfiles/portal/194583123/WP24_5.pdf</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Education and QoL-Satisfaction_files/figure-html/3b208ab0-b1d6-4302-9f10-1bee92277f81-1-dfb2aa22-3072-4d88-8dae-50102b6206be.png" class="img-fluid figure-img"></p>
<figcaption>image.png</figcaption>
</figure>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/dbose\.github\.io");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>